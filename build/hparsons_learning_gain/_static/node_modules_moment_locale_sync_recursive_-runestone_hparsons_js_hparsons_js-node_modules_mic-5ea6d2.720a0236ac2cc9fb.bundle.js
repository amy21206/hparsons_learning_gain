(self["webpackChunkWebComponents"] = self["webpackChunkWebComponents"] || []).push([["node_modules_moment_locale_sync_recursive_-runestone_hparsons_js_hparsons_js-node_modules_mic-5ea6d2"],{

/***/ 28528:
/*!***********************************************!*\
  !*** ./runestone/hparsons/css/hljs-xcode.css ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ 32571:
/*!*********************************************!*\
  !*** ./runestone/hparsons/css/hparsons.css ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ 46700:
/*!***************************************************!*\
  !*** ./node_modules/moment/locale/ sync ^\.\/.*$ ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./af": 42786,
	"./af.js": 42786,
	"./ar": 30867,
	"./ar-dz": 14130,
	"./ar-dz.js": 14130,
	"./ar-kw": 96135,
	"./ar-kw.js": 96135,
	"./ar-ly": 56440,
	"./ar-ly.js": 56440,
	"./ar-ma": 47702,
	"./ar-ma.js": 47702,
	"./ar-sa": 16040,
	"./ar-sa.js": 16040,
	"./ar-tn": 37100,
	"./ar-tn.js": 37100,
	"./ar.js": 30867,
	"./az": 31083,
	"./az.js": 31083,
	"./be": 9808,
	"./be.js": 9808,
	"./bg": 68338,
	"./bg.js": 68338,
	"./bm": 67438,
	"./bm.js": 67438,
	"./bn": 8905,
	"./bn.js": 8905,
	"./bo": 11560,
	"./bo.js": 11560,
	"./br": 1278,
	"./br.js": 1278,
	"./bs": 80622,
	"./bs.js": 80622,
	"./ca": 2468,
	"./ca.js": 2468,
	"./cs": 5822,
	"./cs.js": 5822,
	"./cv": 50877,
	"./cv.js": 50877,
	"./cy": 47373,
	"./cy.js": 47373,
	"./da": 24780,
	"./da.js": 24780,
	"./de": 59740,
	"./de-at": 60217,
	"./de-at.js": 60217,
	"./de-ch": 60894,
	"./de-ch.js": 60894,
	"./de.js": 59740,
	"./dv": 5300,
	"./dv.js": 5300,
	"./el": 50837,
	"./el.js": 50837,
	"./en-au": 78348,
	"./en-au.js": 78348,
	"./en-ca": 77925,
	"./en-ca.js": 77925,
	"./en-gb": 22243,
	"./en-gb.js": 22243,
	"./en-ie": 46436,
	"./en-ie.js": 46436,
	"./en-nz": 76319,
	"./en-nz.js": 76319,
	"./eo": 92915,
	"./eo.js": 92915,
	"./es": 55655,
	"./es-do": 55251,
	"./es-do.js": 55251,
	"./es-us": 71146,
	"./es-us.js": 71146,
	"./es.js": 55655,
	"./et": 5603,
	"./et.js": 5603,
	"./eu": 77763,
	"./eu.js": 77763,
	"./fa": 76959,
	"./fa.js": 76959,
	"./fi": 11897,
	"./fi.js": 11897,
	"./fo": 94694,
	"./fo.js": 94694,
	"./fr": 94470,
	"./fr-ca": 63049,
	"./fr-ca.js": 63049,
	"./fr-ch": 52330,
	"./fr-ch.js": 52330,
	"./fr.js": 94470,
	"./fy": 5044,
	"./fy.js": 5044,
	"./gd": 2101,
	"./gd.js": 2101,
	"./gl": 38794,
	"./gl.js": 38794,
	"./gom-latn": 23168,
	"./gom-latn.js": 23168,
	"./gu": 95349,
	"./gu.js": 95349,
	"./he": 24206,
	"./he.js": 24206,
	"./hi": 30094,
	"./hi.js": 30094,
	"./hr": 30316,
	"./hr.js": 30316,
	"./hu": 22138,
	"./hu.js": 22138,
	"./hy-am": 11423,
	"./hy-am.js": 11423,
	"./id": 29218,
	"./id.js": 29218,
	"./is": 90135,
	"./is.js": 90135,
	"./it": 90626,
	"./it.js": 90626,
	"./ja": 39183,
	"./ja.js": 39183,
	"./jv": 24286,
	"./jv.js": 24286,
	"./ka": 40415,
	"./ka.js": 40415,
	"./kk": 47772,
	"./kk.js": 47772,
	"./km": 18758,
	"./km.js": 18758,
	"./kn": 79282,
	"./kn.js": 79282,
	"./ko": 33730,
	"./ko.js": 33730,
	"./ky": 33291,
	"./ky.js": 33291,
	"./lb": 36841,
	"./lb.js": 36841,
	"./lo": 55466,
	"./lo.js": 55466,
	"./lt": 57010,
	"./lt.js": 57010,
	"./lv": 37595,
	"./lv.js": 37595,
	"./me": 39861,
	"./me.js": 39861,
	"./mi": 35493,
	"./mi.js": 35493,
	"./mk": 95966,
	"./mk.js": 95966,
	"./ml": 87341,
	"./ml.js": 87341,
	"./mr": 10370,
	"./mr.js": 10370,
	"./ms": 9847,
	"./ms-my": 41237,
	"./ms-my.js": 41237,
	"./ms.js": 9847,
	"./mt": 72126,
	"./mt.js": 72126,
	"./my": 56165,
	"./my.js": 56165,
	"./nb": 64924,
	"./nb.js": 64924,
	"./ne": 16744,
	"./ne.js": 16744,
	"./nl": 93901,
	"./nl-be": 59814,
	"./nl-be.js": 59814,
	"./nl.js": 93901,
	"./nn": 83877,
	"./nn.js": 83877,
	"./pa-in": 15858,
	"./pa-in.js": 15858,
	"./pl": 64495,
	"./pl.js": 64495,
	"./pt": 89520,
	"./pt-br": 57971,
	"./pt-br.js": 57971,
	"./pt.js": 89520,
	"./ro": 96459,
	"./ro.js": 96459,
	"./ru": 21793,
	"./ru.js": 21793,
	"./sd": 40950,
	"./sd.js": 40950,
	"./se": 10490,
	"./se.js": 10490,
	"./si": 90124,
	"./si.js": 90124,
	"./sk": 64249,
	"./sk.js": 64249,
	"./sl": 14985,
	"./sl.js": 14985,
	"./sq": 51104,
	"./sq.js": 51104,
	"./sr": 49131,
	"./sr-cyrl": 13709,
	"./sr-cyrl.js": 13709,
	"./sr.js": 49131,
	"./ss": 85893,
	"./ss.js": 85893,
	"./sv": 98760,
	"./sv.js": 98760,
	"./sw": 91172,
	"./sw.js": 91172,
	"./ta": 27333,
	"./ta.js": 27333,
	"./te": 23110,
	"./te.js": 23110,
	"./tet": 52095,
	"./tet.js": 52095,
	"./th": 9041,
	"./th.js": 9041,
	"./tl-ph": 75768,
	"./tl-ph.js": 75768,
	"./tlh": 89444,
	"./tlh.js": 89444,
	"./tr": 72397,
	"./tr.js": 72397,
	"./tzl": 28254,
	"./tzl.js": 28254,
	"./tzm": 51106,
	"./tzm-latn": 30699,
	"./tzm-latn.js": 30699,
	"./tzm.js": 51106,
	"./uk": 67691,
	"./uk.js": 67691,
	"./ur": 13795,
	"./ur.js": 13795,
	"./uz": 6791,
	"./uz-latn": 60588,
	"./uz-latn.js": 60588,
	"./uz.js": 6791,
	"./vi": 65666,
	"./vi.js": 65666,
	"./x-pseudo": 14378,
	"./x-pseudo.js": 14378,
	"./yo": 75805,
	"./yo.js": 75805,
	"./zh-cn": 83839,
	"./zh-cn.js": 83839,
	"./zh-hk": 55726,
	"./zh-hk.js": 55726,
	"./zh-tw": 74152,
	"./zh-tw.js": 74152
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 46700;

/***/ }),

/***/ 87036:
/*!************************************************!*\
  !*** ./runestone/hparsons/js/BlockFeedback.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BlockFeedback)
/* harmony export */ });
/* harmony import */ var _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hparsonsFeedback */ 33965);
/* harmony import */ var _blockGrader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blockGrader.js */ 92753);
/* harmony import */ var _parsons_js_parsons_i18n_en_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../parsons/js/parsons-i18n.en.js */ 59164);
/* harmony import */ var _parsons_js_parsons_i18n_en_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_parsons_js_parsons_i18n_en_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _parsons_js_parsons_i18n_pt_br_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../parsons/js/parsons-i18n.pt-br.js */ 16432);
/* harmony import */ var _parsons_js_parsons_i18n_pt_br_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_parsons_js_parsons_i18n_pt_br_js__WEBPACK_IMPORTED_MODULE_3__);





class BlockFeedback extends _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__["default"] {
    createOutput() {
        // Block based grading output
        this.messageDiv = document.createElement("div");
        this.hparsons.outerDiv.appendChild(this.messageDiv);
    }
    customizeUI() {
        $(this.hparsons.runButton).text('Check Me');
    }

    init() {
        this.checkCount = 0;
        this.solved = false;
        // TODO: not sure what is the best way to do this
        this.grader = new _blockGrader_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
        let solutionBlocks = [];
        for (let i = 0; i < this.hparsons.blockAnswer.length; ++i) {
            solutionBlocks.push(this.hparsons.originalBlocks[this.hparsons.blockAnswer[i]]);
        }
        this.solution = solutionBlocks;
        this.grader.solution = solutionBlocks;
        this.answerArea = this.hparsons.hparsonsInput.querySelector('.drop-area');
    }

    // Called when check button clicked (block-based Feedback)
    async runButtonHandler() {
        this.checkCurrentAnswer();
        this.logCurrentAnswer();
        this.renderFeedback();
    }

    async logCurrentAnswer() {
        let act = {
            scheme: "block",
            correct: this.grader.graderState == 'correct' ? "T" : "F",
            answer: this.hparsons.hparsonsInput.getParsonsTextArray(),
            percent: this.grader.percent
        }
        let logData = {
            event: "hparsonsAnswer",
            div_id: this.hparsons.divid, 
            act: act
        }
        await this.hparsons.logBookEvent(logData);
    }

    // Used for block-based feedback
    checkCurrentAnswer() {
        if (!this.solved) {
            this.checkCount++;
            this.clearFeedback();
            this.grader.answer = this.hparsons.hparsonsInput.getParsonsTextArray();
            this.grade = this.grader.grade();
            if (this.grade == "correct") {
                $(this.hparsons.runButton).prop("disabled", true);
                this.solved = true;
            }
        }
    }

    renderFeedback() {
        this.grade = this.grader.graderState;
        var feedbackArea;
        var answerArea = $(this.answerArea);
        feedbackArea = $(this.messageDiv);

        if (this.grade === "correct") {
            answerArea.addClass("correct");
            feedbackArea.fadeIn(100);
            feedbackArea.attr("class", "alert alert-info");
            if (this.checkCount > 1) {
                feedbackArea.html(
                    $.i18n("msg_parson_correct", this.checkCount)
                );
            } else {
                feedbackArea.html($.i18n("msg_parson_correct_first_try"));
            }
            this.checkCount = 0;
        }

        if (this.grade === "incorrectTooShort") {
            // too little code
            answerArea.addClass("incorrect");
            feedbackArea.fadeIn(500);
            feedbackArea.attr("class", "alert alert-danger");
            feedbackArea.html($.i18n("msg_parson_too_short"));
        }

        if (this.grade === "incorrectMoveBlocks") {
            var answerBlocks = this.answerArea.children;
            var inSolution = [];
            var inSolutionIndexes = [];
            var notInSolution = [];
            for (let i = 0; i < answerBlocks.length; i++) {
                var block = answerBlocks[i];
                var index = this.solution.indexOf(block.textContent);
                if (index == -1) {
                    notInSolution.push(block);
                } else {
                    inSolution.push(block);
                    inSolutionIndexes.push(index);
                }
            }
            var lisIndexes = this.grader.inverseLISIndices(inSolutionIndexes);
            for (let i = 0; i < lisIndexes.length; i++) {
                notInSolution.push(inSolution[lisIndexes[i]]);
            }
            answerArea.addClass("incorrect");
            feedbackArea.fadeIn(500);
            feedbackArea.attr("class", "alert alert-danger");
            for (let i = 0; i < notInSolution.length; i++) {
                $(notInSolution[i]).addClass("incorrectPosition");
            }
            feedbackArea.html($.i18n("msg_parson_wrong_order"));
        }
    }

    // Feedback UI for Block-based Feedback
    clearFeedback() {
        $(this.answerArea).removeClass("incorrect correct");
        var children = this.answerArea.childNodes;
        for (var i = 0; i < children.length; i++) {
            $(children[i]).removeClass(
                "correctPosition incorrectPosition"
            );
        }
        $(this.messageDiv).hide();
    }

    reset() {
        if (this.solved) {
            this.checkCount = 0;
            $(this.hparsons.runButton).prop("disabled", false);
            this.solved = false;
        }
        this.clearFeedback();
    }

}

/***/ }),

/***/ 3291:
/*!**********************************************!*\
  !*** ./runestone/hparsons/js/SQLFeedback.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SQLFeedback)
/* harmony export */ });
/* harmony import */ var _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hparsonsFeedback */ 33965);
/* harmony import */ var sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sql.js/dist/sql-wasm.js */ 26657);
/* harmony import */ var sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var handsontable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! handsontable */ 36080);
/* harmony import */ var handsontable_dist_handsontable_full_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! handsontable/dist/handsontable.full.css */ 59823);





var allDburls = {};

class SQLFeedback extends _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__["default"] {

    createOutput() {
        var outDiv = document.createElement("div");
        $(outDiv).addClass("hp_output col-md-12");
        this.outDiv = outDiv;
        this.output = document.createElement("pre");
        this.output.id = this.hparsons.divid + "_stdout";
        $(this.output).css("visibility", "hidden");
        var clearDiv = document.createElement("div");
        $(clearDiv).css("clear", "both"); // needed to make parent div resize properly
        this.hparsons.outerDiv.appendChild(clearDiv);
        outDiv.appendChild(this.output);
        this.hparsons.outerDiv.appendChild(outDiv);
        clearDiv = document.createElement("div");
        $(clearDiv).css("clear", "both"); // needed to make parent div resize properly
        this.hparsons.outerDiv.appendChild(clearDiv);
    }

    renderFeedback() {
        if (this.testResult) {
            $(this.output).text(this.testResult);
            $(this.output).css("visibility", "visible");
        }
        $(this.outDiv).show();
    }

    clearFeedback() {
        $(this.outDiv).hide();
    }

    reset() {
        this.clearFeedback();
    }

    init() {
        // adapted from activecode-sql
        // fnprefix sets the path to load the sql-wasm.wasm file
        var bookprefix;
        var fnprefix;
        if (
            eBookConfig.useRunestoneServices ||
            window.location.search.includes("mode=browsing")
        ) {
            bookprefix = `${eBookConfig.app}/books/published/${eBookConfig.basecourse}`;
            fnprefix = bookprefix + "/_static";
        } else {
            // The else clause handles the case where you are building for a static web browser
            bookprefix = "";
            fnprefix = "/_static";
        }
        let SQLconfig = {
            locateFile: (filename) => `${fnprefix}/${filename}`,
        };
        // this.showLast = $(this.origElem).data("showlastsql");
        var self = this.hparsons;
        sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1___default()(SQLconfig).then(function (SQL) {
            // set up call to load database asynchronously if given
            if (self.dburl) {
                if (self.dburl.startsWith("/_static")) {
                    self.dburl = `${bookprefix}${self.dburl}`;
                }
                $(self.runButton).attr("disabled", "disabled");
                let buttonText = $(self.runButton).text();
                $(self.runButton).text($.i18n("msg_activecode_load_db"));
                if (!(self.dburl in allDburls)) {
                    allDburls[self.dburl] = {
                        status: "loading",
                        xWaitFor: jQuery.Deferred(),
                    };
                } else {
                    if (allDburls[self.dburl].status == "loading") {
                        allDburls[self.dburl].xWaitFor.done(function () {
                            self.db = allDburls[self.dburl].dbObject;
                            $(self.runButton).removeAttr("disabled");
                            $(self.runButton).text(buttonText);
                        });
                        return;
                    }
                    self.db = allDburls[self.dburl].dbObject;
                    $(self.runButton).removeAttr("disabled");
                    $(self.runButton).text(buttonText);
                    return;
                }
                var xhr = new XMLHttpRequest();
                // For example: https://github.com/lerocha/chinook-database/raw/master/ChinookDatabase/DataSources/Chinook_Sqlite.sqlite
                xhr.open("GET", self.dburl, true);
                xhr.responseType = "arraybuffer";
                xhr.onload = (e) => {
                    var uInt8Array = new Uint8Array(xhr.response);
                    self.db = new SQL.Database(uInt8Array);
                    allDburls[self.dburl].dbObject = self.db;
                    $(self.runButton).text(buttonText);
                    $(self.runButton).removeAttr("disabled");
                    allDburls[self.dburl].db = uInt8Array;
                    allDburls[self.dburl].status = "ready";
                    allDburls[self.dburl].xWaitFor.resolve();
                    // contents is now [{columns:['col1','col2',...], values:[[first row], [second row], ...]}]
                };
                xhr.send();
            } else {
                self.db = new SQL.Database();
            }
        });
    }

    // adapted from activecode - SQL
    async runButtonHandler() {
        // Disable the run button until the run is finished.
        this.hparsons.runButton.disabled = true;
        try {
            await this.runProg();
        } catch (e) {
            console.log(`there was an error ${e} running the code`);
        }
        this.logCurrentAnswer();
        this.renderFeedback();
        // The run is finished; re-enable the button.
        this.hparsons.runButton.disabled = false;
    }

    // adapted from activecode-sql
    async runProg() {
        // Clear any old results
        let divid = this.hparsons.divid + "_sql_out";
        let respDiv = document.getElementById(divid);
        if (respDiv) {
            respDiv.parentElement.removeChild(respDiv);
        }
        $(this.output).text("");
        // creating new results div
        respDiv = document.createElement("div");
        respDiv.id = divid;
        this.outDiv.appendChild(respDiv);

        // Run this query
        let query = await this.buildProg();
        if (!this.hparsons.db) {
            $(this.output).text(
                `Error: Database not initialized! DBURL: ${this.hparsons.dburl}`
            );
            return;
        }

        let executionSuccessFlag = true;

        // executing hidden prefix if exist
        if (query.prefix) {
            this.prefixresults = this.executeIteratedStatements(this.hparsons.db.iterateStatements(query.prefix));
            if (this.prefixresults.at(-1).status == 'failure') {
                // if error occured in hidden prefix, log and stop executing the rest
                this.visualizeResults(respDiv, this.prefixresults, "Error executing hidden code in prefix");
                executionSuccessFlag = false;
            }
        }

        // executing student input in micro Parsons
        if (executionSuccessFlag) {
            this.results = this.executeIteratedStatements(this.hparsons.db.iterateStatements(query.input));
            // always render full execution results of student input regardless of success/failure
            this.visualizeResults(respDiv, this.results);
            if (this.results.at(-1).status == 'failure') {
                // if error occured in student input, stop executing suffix/unitttest 
                executionSuccessFlag = false;
            }
        }
        
        // executing hidden suffix if exist
        // In most cases the suffix is just "select * from x" to 
        //    see if the operations on the database is correct
        if (executionSuccessFlag && query.suffix) {
            this.suffixresults = this.executeIteratedStatements(this.hparsons.db.iterateStatements(query.suffix));
            if (this.suffixresults.at(-1).status == 'failure') {
                // if error occured in hidden suffix, visualize the results
                this.visualizeResults(respDiv, this.suffixresults, "Error executing hidden code in suffix");
            }
        }

        // show the output div
        $(this.outDiv).show();

        // Now handle autograding
        // autograding takes the results of the hidden suffix if exist
        // otherwise take the result of student input
        if (this.hparsons.unittest) {
            if (this.suffixresults) {
                this.testResult = this.autograde(
                    this.suffixresults[this.suffixresults.length - 1]
                );
            } else {
                this.testResult = this.autograde(
                    this.results[this.results.length - 1]
                );
            }
        } else {
            $(this.output).css("visibility", "hidden");
        }

        return Promise.resolve("done");
    }

    // Refactored from activecode-sql.
    // Takes iterated statements from db.iterateStatemnts(queryString)
    // Returns Array<result>:
    /* each result: {
        status: "success" or "faliure",
        // for SELECT statements (?):
        columns: number of columns,
        values: data,
        rowcount: number of rows in data,
        // for INSERT, UPDATE, DELETE:
        operation: "INSERT", "UPDATE", or "DELETE",
        rowcount: number of rows modified,
        // when error occurred (aside from status):
        message: error message,
        sql: remaining SQL (?)
        // when no queries were executed:
        message: "no queries submitted"
    }*/
    // If an error occurs it will stop executing the rest of queries in it.
    // Thus the error result will always be the last item.
    executeIteratedStatements(it) {
        let results = [];
        try {
            for (let statement of it) {
                let columns = statement.getColumnNames();
                if (columns.length > 0) {
                    // data! probably a SELECT
                    let data = [];
                    while (statement.step()) {
                        data.push(statement.get());
                    }
                    results.push({
                        status: "success",
                        columns: columns,
                        values: data,
                        rowcount: data.length,
                    });
                } else {
                    let nsql = statement.getNormalizedSQL();
                    let prefix = nsql.substr(0, 6).toLowerCase();
                    statement.step(); // execute the query
                    // Try to detect INSERT/UPDATE/DELETE to give friendly feedback
                    // on rows modified - unfortunately, this won't catch such queries
                    // if they use CTEs.  There seems to be no reliable way of knowing
                    // when a SQLite query actually modified data.
                    if (
                        prefix === "insert" ||
                        prefix === "update" ||
                        prefix === "delete"
                    ) {
                        results.push({
                            status: "success",
                            operation: prefix,
                            rowcount: this.hparsons.db.getRowsModified(),
                        });
                    } else {
                        results.push({ status: "success" });
                    }
                }
            }
        } catch (e) {
            results.push({
                status: "failure",
                message: e.toString(),
                sql: it.getRemainingSQL(),
            });
        }
        if (results.length === 0) {
            results.push({
                status: "failure",
                message: "No queries submitted.",
            });
        }
        return results;
    }

    // output the results in the resultArray(Array<results>).
    // container: the container that contains the results
    // resultArray (Array<result>): see executeIteratedStatements
    // Each result will be in a separate row.
    // devNote will be displayed in the top row if exist.
    // Current usage: "error executing hidden code in prefix/suffix"
    visualizeResults(container, resultArray, devNote) {
        if (devNote) {
            let section = document.createElement("div");
            section.setAttribute("class", "hp_sql_result");
            container.appendChild(section);
            let messageBox = document.createElement("pre");
            messageBox.textContent = devNote;
            messageBox.setAttribute("class", "hp_sql_result_failure");
            section.appendChild(messageBox);
        }
        for (let r of resultArray) {
            let section = document.createElement("div");
            section.setAttribute("class", "hp_sql_result");
            container.appendChild(section);
            if (r.status === "success") {
                if (r.columns) {
                    let tableDiv = document.createElement("div");
                    section.appendChild(tableDiv);
                    console.log('r', r);
                    createTable(r, tableDiv, 200);
                    let messageBox = document.createElement("pre");
                    let rmsg = r.rowcount !== 1 ? " rows " : " row ";
                    let msg = "" + r.rowcount + rmsg + "returned";
                    if (r.rowcount > 100) {
                        msg = msg + " (only first 100 rows displayed)";
                    }
                    msg = msg + ".";
                    messageBox.textContent = msg;
                    messageBox.setAttribute("class", "hp_sql_result_success");
                    section.appendChild(messageBox);
                } else if (r.rowcount) {
                    let messageBox = document.createElement("pre");
                    let op = r.operation;
                    op = op + (op.charAt(op.length - 1) === "e" ? "d." : "ed.");
                    let rmsg = r.rowcount !== 1 ? " rows " : " row ";
                    messageBox.textContent = "" + r.rowcount + rmsg + op;
                    messageBox.setAttribute("class", "hp_sql_result_success");
                    section.appendChild(messageBox);
                } else {
                    let messageBox = document.createElement("pre");
                    messageBox.textContent = "Operation succeeded.";
                    messageBox.setAttribute("class", "hp_sql_result_success");
                    section.appendChild(messageBox);
                }
            } else {
                let messageBox = document.createElement("pre");
                messageBox.textContent = r.message;
                messageBox.setAttribute("class", "hp_sql_result_failure");
                section.appendChild(messageBox);
            }
        }
    }
 
    // adapted from activecode
    async buildProg() {
        // assemble code from prefix, suffix, and editor for running.
        let prog = {};
        if (this.hparsons.hiddenPrefix) {
            prog.prefix = this.hparsons.hiddenPrefix;
        }
        prog.input = this.hparsons.hparsonsInput.getParsonsTextArray().join(' ') + "\n";
        if (this.hparsons.hiddenSuffix) {
            prog.suffix = this.hparsons.hiddenSuffix;
        }
        return Promise.resolve(prog);
    }

    // copied from activecode-sql
    async logCurrentAnswer() {
        if (this.unit_results) {
            let act = {
                scheme: "execution",
                correct: (this.failed === 0 && this.percent != null) ? "T" : "F",
                answer: this.hparsons.hparsonsInput.getParsonsTextArray(),
                percent: this.percent // percent is null if there is execution error
            }
            let logData = {
                event: "hparsonsAnswer",
                div_id: this.hparsons.divid,
                act: act
            }
            await this.hparsons.logBookEvent(logData);
        }
    }

    // might move to base class if used by multiple execution based feedback
    autograde(result_table) {
        var tests = this.hparsons.unittest.split(/\n/);
        this.passed = 0;
        this.failed = 0;
        // Tests should be of the form
        // assert row,col oper value for example
        // assert 4,4 == 3
        var result = "";
        tests = tests.filter(function (s) {
            return s.indexOf("assert") > -1;
        });
        for (let test of tests) {
            let wlist = test.split(/\s+/);
            wlist.shift();
            let loc = wlist.shift();
            let oper = wlist.shift();
            let expected = wlist.join(" ");
            let [row, col] = loc.split(",");
            result += this.testOneAssert(
                row,
                col,
                oper,
                expected,
                result_table
            );
            result += "\n";
        }
        let pct = (100 * this.passed) / (this.passed + this.failed);
        this.percent = pct;
        pct = pct.toLocaleString(undefined, { maximumFractionDigits: 2 });
        result += `You passed ${this.passed} out of ${this.passed + this.failed
            } tests for ${pct}%`;
        this.unit_results = `percent:${pct}:passed:${this.passed}:failed:${this.failed}`;
        return result;
    }

    // might move to base class if used by multiple execution based feedback
    testOneAssert(row, col, oper, expected, result_table) {
        // make sure row and col are in bounds
        let actual;
        let output = "";
        try {
            actual = result_table.values[row][col];
        } catch (e) {
            if (expected == 'NO_DATA') {
                this.passed++;
                output = `Passed: No data in row ${row}, column ${col}`;
                return output;
            } else {
                output = `Failed: Not enough data to check row ${row} or column ${col}`;
                return output;
            }
        }
        const operators = {
            "==": function (operand1, operand2) {
                return operand1 == operand2;
            },
            "!=": function (operand1, operand2) {
                return operand1 != operand2;
            },
            ">": function (operand1, operand2) {
                return operand1 > operand2;
            },
            "<": function (operand1, operand2) {
                return operand1 > operand2;
            },
        };
        let res = operators[oper](actual, expected);
        if (res) {
            output = `Pass: ${actual} ${oper} ${expected} in row ${row} column ${result_table.columns[col]}`;
            this.passed++;
        } else {
            output = `Failed ${actual} ${oper} ${expected} in row ${row} column ${result_table.columns[col]}`;
            this.failed++;
        }
        return output;
    }
}

function createTable(tableData, container, maxHeight) {
    let data = tableData.values;
    let trimRows = undefined;
    if (data.length === 0) {
        // kludge: no column headers will show up unless we do this
        data = [tableData.columns.map((e) => null)];
        trimRows = [0];
    }

    var hot = new handsontable__WEBPACK_IMPORTED_MODULE_2__["default"](container, {
        data: data,
        trimRows: trimRows,
        width: "100%",
        height: maxHeight,
        autoRowSize: true,
        autoColumnSize: { useHeaders: true },
        rowHeaders: false,
        colHeaders: tableData.columns,
        editor: false,
        maxRows: 100,
        filters: false,
        dropdownMenu: false,
        licenseKey: "non-commercial-and-evaluation",
    });

    console.log('hot', hot)

    // calculate actual height and resize
    let actualHeight = 40; // header height + small margin
    if (tableData.values.length > 0) {
        for (let i = 0; i < data.length; i++) {
            console.log(i);
            console.log('getrowheight', hot.getRowHeight(i));
            actualHeight = actualHeight + hot.getRowHeight(i);
            console.log('actualheight', actualHeight);
            if (actualHeight > maxHeight) break;
        }
    }
    console.log('actualheight',actualHeight)

    hot.updateSettings({ height: actualHeight });

    return hot;
}


/***/ }),

/***/ 92753:
/*!**********************************************!*\
  !*** ./runestone/hparsons/js/blockGrader.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BlockBasedGrader)
/* harmony export */ });
// This file is adapted from lineGrader in parsons directive.
// We could have fit our data structure to use the original LineBasedGrader directly,
// but that would result in changes in parsons directive affecting this, so we created a copy
// instead.

class BlockBasedGrader {
    constructor(problem) {
        this.problem = problem;
        this.percent = 0;
    }
    // Use a LIS (Longest Increasing Subsequence) algorithm to return the indexes
    // that are not part of that subsequence.
    inverseLISIndices(arr) {
        // Get all subsequences
        var allSubsequences = [];
        for (var i = 0; i < arr.length; i++) {
            var subsequenceForCurrent = [arr[i]],
                current = arr[i],
                lastElementAdded = -1;
            for (var j = i; j < arr.length; j++) {
                var subsequent = arr[j];
                if (subsequent > current && lastElementAdded < subsequent) {
                    subsequenceForCurrent.push(subsequent);
                    lastElementAdded = subsequent;
                }
            }
            allSubsequences.push(subsequenceForCurrent);
        }
        // Figure out the longest one
        var longestSubsequenceLength = -1;
        var longestSubsequence;
        for (let i in allSubsequences) {
            var subs = allSubsequences[i];
            if (subs.length > longestSubsequenceLength) {
                longestSubsequenceLength = subs.length;
                longestSubsequence = subs;
            }
        }
        // Create the inverse indexes
        var indexes = [];
        var lIndex = 0;
        for (let i = 0; i < arr.length; i++) {
            if (lIndex > longestSubsequence.length) {
                indexes.push(i);
            } else {
                if (arr[i] == longestSubsequence[lIndex]) {
                    lIndex += 1;
                } else {
                    indexes.push(i);
                }
            }
        }
        return indexes;
    }
    // grade that element, returning the state
    grade() {
        this.correctLines = 0;
        this.percentLines = 0;
        var solutionLines = this.solution;
        var answerLines = this.answer;
        var i;
        var state;
        this.percentLines =
            Math.min(answerLines.length, solutionLines.length) /
            Math.max(answerLines.length, solutionLines.length);
        if (answerLines.length < solutionLines.length) {
            state = "incorrectTooShort";
            this.correctLength = false;
        } else if (answerLines.length == solutionLines.length) {
            this.correctLength = true;
        } else {
            this.correctLength = false;
        }

        // Determine whether the code **that is there** is in the correct order
        // If there is too much or too little code this only matters for
        // calculating a percentage score.
        let isCorrectOrder = true;
        this.correctLines = 0;
        this.solutionLength = solutionLines.length;
        let loopLimit = Math.min(solutionLines.length, answerLines.length);
        for (i = 0; i < loopLimit; i++) {
            if (answerLines[i] !== solutionLines[i]) {
                isCorrectOrder = false;
            } else {
                this.correctLines += 1;
            }
        }

        if (
            isCorrectOrder &&
            this.correctLength
        ) {
            // Perfect
            state = "correct";
        } else if (!isCorrectOrder && state != "incorrectTooShort") {
            state = "incorrectMoveBlocks";
        } else if (!this.correctLength && state != "incorrectTooShort") {
            state = "incorrectMoveBlocks";
        }
        this.calculatePercent();
        this.graderState = state;
        return state;
    }

    calculatePercent() {
        let numLines = this.percentLines * 0.2;
        let lines = this.answer.length;
        let numCorrectBlocks = (this.correctLines / lines) * 0.8;

        this.percent = numLines + numCorrectBlocks;
    }
}


/***/ }),

/***/ 58722:
/*!*******************************************!*\
  !*** ./runestone/hparsons/js/hparsons.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ HParsons),
/* harmony export */   "hpList": () => (/* binding */ hpList)
/* harmony export */ });
/* harmony import */ var _common_js_runestonebase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/js/runestonebase.js */ 2568);
/* harmony import */ var _css_hparsons_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../css/hparsons.css */ 32571);
/* harmony import */ var _css_hljs_xcode_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../css/hljs-xcode.css */ 28528);
/* harmony import */ var _BlockFeedback_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BlockFeedback.js */ 87036);
/* harmony import */ var _SQLFeedback_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SQLFeedback.js */ 3291);
/* harmony import */ var micro_parsons_micro_parsons_micro_parsons_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! micro-parsons/micro-parsons/micro-parsons.js */ 34344);
/* harmony import */ var micro_parsons_micro_parsons_micro_parsons_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! micro-parsons/micro-parsons/micro-parsons.css */ 67727);








var hpList;
// Dictionary that contains all instances of horizontal Parsons problem objects
if (hpList === undefined) hpList = {};


class HParsons extends _common_js_runestonebase_js__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(opts) {
        super(opts);
        // getting settings
        var orig = $(opts.orig).find("textarea")[0];
        this.reuse = $(orig).data("reuse") ? true : false;
        this.randomize = $(orig).data("randomize") ? true : false;
        this.isBlockGrading = $(orig).data("blockanswer") ? true : false;
        this.language = $(orig).data("language");
        if (this.isBlockGrading) {
            this.blockAnswer = $(orig).data("blockanswer").split(" ");
        }
        this.divid = opts.orig.id;
        this.containerDiv = opts.orig;
        this.useRunestoneServices = opts.useRunestoneServices;
        this.origElem = orig;
        this.origText = this.origElem.textContent;
        this.code = $(orig).text() || "\n\n\n\n\n";
        this.dburl = $(orig).data("dburl");
        this.runButton = null;
        this.saveButton = null;
        this.loadButton = null;
        this.outerDiv = null;
        this.controlDiv = null;
        this.processContent(this.code)

        // Change to factory when more execution based feedback is included
        if (this.isBlockGrading) {
            this.feedbackController = new _BlockFeedback_js__WEBPACK_IMPORTED_MODULE_3__["default"](this);
        } else {
            this.feedbackController = new _SQLFeedback_js__WEBPACK_IMPORTED_MODULE_4__["default"](this);
        }

        // creating UI components
        this.createEditor();
        this.createOutput();
        this.createControls();
        this.feedbackController.customizeUI();

        if ($(orig).data("caption")) {
            this.caption = $(orig).data("caption");
        } else {
            this.caption = "MicroParsons";
        }
        this.addCaption("runestone");
        this.indicate_component_ready();

        // initializing functionalities for different feedback
        this.feedbackController.init();
    }

    processContent(code) {
        // todo: add errors when blocks are nonexistent (maybe in python)?
        this.hiddenPrefix = this.processSingleContent(code, '--hiddenprefix--');
        this.originalBlocks = this.processSingleContent(code, '--blocks--').split('\n').slice(1,-1);
        this.hiddenSuffix = this.processSingleContent(code, '--hiddensuffix--');
        this.unittest = this.processSingleContent(code, '--unittest--');
    }

    processSingleContent(code, delimitier) {
        let index = code.indexOf(delimitier);
        if (index > -1) {
            let content = code.substring(index + delimitier.length);
            let endIndex = content.indexOf("\n--");
            content =
                endIndex > -1
                    ? content.substring(0, endIndex + 1)
                    : content;
            return content;
        }
        return undefined;
    }

    // copied from activecode, already modified to add parsons
    createEditor() {
        this.outerDiv = document.createElement("div");
        $(this.origElem).replaceWith(this.outerDiv);
        this.outerDiv.id = `${this.divid}-container`;
        this.outerDiv.addEventListener("micro-parsons", (ev) => {
            this.logHorizontalParsonsEvent(ev.detail);
            this.feedbackController.clearFeedback();
        });
        const props = {
            selector: `#${this.divid}-container`,
            id: `${this.divid}-hparsons`,
            reuse: this.reuse,
            randomize: this.randomize,
            parsonsBlocks: [...this.originalBlocks],
            language: this.language
        }
        ;(0,micro_parsons_micro_parsons_micro_parsons_js__WEBPACK_IMPORTED_MODULE_5__.InitMicroParsons)(props);
        this.hparsonsInput = $(this.outerDiv).find("micro-parsons")[0];
    }

    createOutput() {
        this.feedbackController.createOutput();
    }

    // copied from activecode
    createControls() {
        var ctrlDiv = document.createElement("div");
        $(ctrlDiv).addClass("hp_actions");
        $(ctrlDiv).addClass("col-md-12");

        // Run Button
        this.runButton = document.createElement("button");
        $(this.runButton).addClass("btn btn-success run-button");
        ctrlDiv.appendChild(this.runButton);
        $(this.runButton).attr("type", "button");
        $(this.runButton).text("Run");
        this.runButton.onclick = () => {
            this.feedbackController.runButtonHandler();
        };

        // Reset button
        var resetBtn;
        resetBtn = document.createElement("button");
        $(resetBtn).text("Reset");
        $(resetBtn).addClass("btn btn-warning run-button");
        ctrlDiv.appendChild(resetBtn);
        this.resetButton = resetBtn;
        this.resetButton.onclick = () => {
            this.hparsonsInput.resetInput();
            this.feedbackController.reset();
        };
        $(resetBtn).attr("type", "button");

        $(this.outerDiv).prepend(ctrlDiv);
        this.controlDiv = ctrlDiv;
    }

    logHorizontalParsonsEvent(hparsonsEvent) {
        let ev = {
            event: "hparsons",
            div_id: this.divid,
            act: JSON.stringify(hparsonsEvent),
        };
        this.logBookEvent(ev);
    }
}


/*=================================
== Find the custom HTML tags and ==
==   execute our code on them    ==
=================================*/
$(document).on("runestone:login-complete", function () {
    $("[data-component=hparsons]").each(function () {
        if ($(this).closest("[data-component=timedAssessment]").length == 0) {
            // If this element exists within a timed component, don't render it here
            // try {
            hpList[this.id] = new HParsons({
                orig: this,
                useRunestoneServices: eBookConfig.useRunestoneServices,
            });
            // } catch (err) {
            //     console.log(`Error rendering ShortAnswer Problem ${this.id}
            //     Details: ${err}`);
            // }
        }
    });
});

if (typeof window.component_factory === "undefined") {
    window.component_factory = {};
}
window.component_factory["hparsons"] = function (opts) {
    return new HParsons(opts);
};


/***/ }),

/***/ 33965:
/*!***************************************************!*\
  !*** ./runestone/hparsons/js/hparsonsFeedback.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ HParsonsFeedback)
/* harmony export */ });
class HParsonsFeedback {
    constructor(hparsons) {
        this.hparsons = hparsons;
        this.percent = 0;
    }
    createOutput() {
        console.log('createOutput method not implemented in feedback!');
    }
    async runButtonHandler() {
        console.log('runButtonClicked method not implemented in feedback!');
    }
    customizeUI() {
        // used to change some minor UI, e.g. the text on Run button
    }
    init() {
        // initlizations functionalities such as preparing SQL,
        // or checking related options
    }

    clearFeedback() {
        // called when input is changed
        console.log('clearFeedback method not implemented in feedback!');
    }
    
    reset() {
        // called when reset is clicked
        console.log('reset method not implemented in feedback!');
    }
}


/***/ }),

/***/ 59164:
/*!*************************************************!*\
  !*** ./runestone/parsons/js/parsons-i18n.en.js ***!
  \*************************************************/
/***/ (() => {

$.i18n().load({
    en: {
        msg_parson_check_me: "Check",
        msg_parson_reset: "Reset",
        msg_parson_help: "Help me",
        msg_parson_too_short: "Your answer is too short. Add more blocks.",
        msg_parson_drag_from_here: "Drag from here",
        msg_parson_drag_to_here: "Drop blocks here",
        msg_parson_correct_first_try:
            "Perfect!  It took you only one try to solve this.  Great job!",
        msg_parson_correct:
            "Perfect!  It took you $1 tries to solve this.  Click Reset to try to solve it in one attempt.",
        msg_parson_wrong_indent:
            "This block is not indented correctly. Either indent it more by dragging it right or reduce the indention by dragging it left.",
        msg_parson_wrong_indents:
            "These blocks are not indented correctly. To indent a block more, drag it to the right. To reduce the indention, drag it to the left.",
        msg_parson_wrong_order:
            "Highlighted blocks in your answer are wrong or are in the wrong order. This can be fixed by moving, removing, or replacing highlighted blocks.",
        msg_parson_arrow_navigate:
            "Arrow keys to navigate. Space to select / deselect block to move.",
        msg_parson_help_info:
            "Click on the Help Me button if you want to make the problem easier",
        msg_parson_not_solution:
            "Disabled an unneeded code block (one that is not part of the solution).",
        msg_parson_provided_indent: "Provided the indentation.",
        msg_parson_combined_blocks: "Combined two code blocks into one.",
        msg_parson_remove_incorrect:
            "Will remove an incorrect code block from answer area",
        msg_parson_will_combine: "Will combine two blocks",
        msg_parson_atleast_three_attempts:
            "You must make at least three distinct full attempts at a solution before you can get help",
        msg_parson_three_blocks_left:
            "There are only 3 correct blocks left.  You should be able to put them in order",
        msg_parson_will_provide_indent: "Will provide indentation",
    },
});


/***/ }),

/***/ 16432:
/*!****************************************************!*\
  !*** ./runestone/parsons/js/parsons-i18n.pt-br.js ***!
  \****************************************************/
/***/ (() => {

$.i18n().load({
    "pt-br": {
        msg_parson_check_me: "Verificar",
        msg_parson_reset: "Resetar",
        msg_parson_help:"Ajuda",
        msg_parson_too_short: "Seu programa é muito curto. Adicione mais blocos.",
        msg_parson_drag_from_here: "Arraste daqui",
        msg_parson_drag_to_here: "Largue os blocos aqui",
        msg_parson_correct_first_try:
            "Perfeito! Você levou apenas uma tentativa para resolver. Bom trabalho!",
        msg_parson_correct:
            "Perfeito! Você levou $1 tentativas para resolver. Clique em Resetar para tentar resolver em uma tentativa." ,
        msg_parson_wrong_indent:
            "Este bloco não está indentado corretamente. Indente mais arrastando-o para a direita ou reduza a indentação arrastando para a esquerda.",
        msg_parson_wrong_indents:
            "Estes blocos não estão indentados corretamente. Para indentar mais, arraste o bloco para a direita. Para reduzir a indentação, arraste para a esquerda.",
        msg_parson_wrong_order:
            "Blocos destacados no seu programa estão errados ou estão na ordem errada. Isso pode ser resolvido movendo, excluindo ou substituindo os blocos destacados.",
        msg_parson_arrow_navigate:
            "Use as teclas de setas para navegar. Espaço para selecionar/ desmarcar blocos para mover.",
        msg_parson_help_info:
            "Clique no botão Ajuda se você quiser facilitar o problema",
        msg_parson_not_solution:
            "Foi desabilitado um bloco de código desnecessário (que não faz parte da solução).",
        msg_parson_provided_indent:"Foi fornecida a indentação.",
        msg_parson_combined_blocks:"Dois blocos de códigos foram combinados em um.",
        msg_parson_remove_incorrect:
            "Será removido um bloco de código incorreto da área de resposta",
        msg_parson_will_combine:"Serão combinados dois blocos",
        msg_parson_atleast_three_attempts:
            "Você deve tentar pelo menos três vezes antes de pedir ajuda",
        msg_parson_three_blocks_left:
            "Restam apenas 3 blocos corretos. Você deve colocá-los em ordem",
        msg_parson_will_provide_indent: "Será fornecida a indentação"
    },
});


/***/ }),

/***/ 37607:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ 70803:
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ 59547:
/*!**********************!*\
  !*** path (ignored) ***!
  \**********************/
/***/ (() => {

/* (ignored) */

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX21vbWVudF9sb2NhbGVfc3luY19yZWN1cnNpdmVfLXJ1bmVzdG9uZV9ocGFyc29uc19qc19ocGFyc29uc19qcy1ub2RlX21vZHVsZXNfbWljLTVlYTZkMi43MjBhMDIzNmFjMmNjOWZiLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDblFrRDtBQUNGO0FBQ0g7QUFDRzs7QUFFakMsNEJBQTRCLHlEQUFnQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVEQUFnQjtBQUMxQztBQUNBLHdCQUF3QixzQ0FBc0M7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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QUFDQTtBQUNBOzs7Ozs7Ozs7OztBQzVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOzs7Ozs7Ozs7OztBQ25DRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOzs7Ozs7Ozs7OztBQ25DRDs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vcnVuZXN0b25lL2hwYXJzb25zL2Nzcy9obGpzLXhjb2RlLmNzcyIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vcnVuZXN0b25lL2hwYXJzb25zL2Nzcy9ocGFyc29ucy5jc3MiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy8uL25vZGVfbW9kdWxlcy9tb21lbnQvbG9jYWxlLyBzeW5jIF5cXC5cXC8uKiQiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy8uL3J1bmVzdG9uZS9ocGFyc29ucy9qcy9CbG9ja0ZlZWRiYWNrLmpzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvaHBhcnNvbnMvanMvU1FMRmVlZGJhY2suanMiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy8uL3J1bmVzdG9uZS9ocGFyc29ucy9qcy9ibG9ja0dyYWRlci5qcyIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vcnVuZXN0b25lL2hwYXJzb25zL2pzL2hwYXJzb25zLmpzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvaHBhcnNvbnMvanMvaHBhcnNvbnNGZWVkYmFjay5qcyIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vcnVuZXN0b25lL3BhcnNvbnMvanMvcGFyc29ucy1pMThuLmVuLmpzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvcGFyc29ucy9qcy9wYXJzb25zLWkxOG4ucHQtYnIuanMiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy9pZ25vcmVkfC9ob21lL2FteTIxMjA2L3J1bmVzdG9uZV9zZXJ2ZXIvcnNkb2NrZXIvUnVuZXN0b25lQ29tcG9uZW50cy9ub2RlX21vZHVsZXMvc3FsLmpzL2Rpc3R8Y3J5cHRvIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvaWdub3JlZHwvaG9tZS9hbXkyMTIwNi9ydW5lc3RvbmVfc2VydmVyL3JzZG9ja2VyL1J1bmVzdG9uZUNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL3NxbC5qcy9kaXN0fGZzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvaWdub3JlZHwvaG9tZS9hbXkyMTIwNi9ydW5lc3RvbmVfc2VydmVyL3JzZG9ja2VyL1J1bmVzdG9uZUNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL3NxbC5qcy9kaXN0fHBhdGgiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwidmFyIG1hcCA9IHtcblx0XCIuL2FmXCI6IDQyNzg2LFxuXHRcIi4vYWYuanNcIjogNDI3ODYsXG5cdFwiLi9hclwiOiAzMDg2Nyxcblx0XCIuL2FyLWR6XCI6IDE0MTMwLFxuXHRcIi4vYXItZHouanNcIjogMTQxMzAsXG5cdFwiLi9hci1rd1wiOiA5NjEzNSxcblx0XCIuL2FyLWt3LmpzXCI6IDk2MTM1LFxuXHRcIi4vYXItbHlcIjogNTY0NDAsXG5cdFwiLi9hci1seS5qc1wiOiA1NjQ0MCxcblx0XCIuL2FyLW1hXCI6IDQ3NzAyLFxuXHRcIi4vYXItbWEuanNcIjogNDc3MDIsXG5cdFwiLi9hci1zYVwiOiAxNjA0MCxcblx0XCIuL2FyLXNhLmpzXCI6IDE2MDQwLFxuXHRcIi4vYXItdG5cIjogMzcxMDAsXG5cdFwiLi9hci10bi5qc1wiOiAzNzEwMCxcblx0XCIuL2FyLmpzXCI6IDMwODY3LFxuXHRcIi4vYXpcIjogMzEwODMsXG5cdFwiLi9hei5qc1wiOiAzMTA4Myxcblx0XCIuL2JlXCI6IDk4MDgsXG5cdFwiLi9iZS5qc1wiOiA5ODA4LFxuXHRcIi4vYmdcIjogNjgzMzgsXG5cdFwiLi9iZy5qc1wiOiA2ODMzOCxcblx0XCIuL2JtXCI6IDY3NDM4LFxuXHRcIi4vYm0uanNcIjogNjc0MzgsXG5cdFwiLi9iblwiOiA4OTA1LFxuXHRcIi4vYm4uanNcIjogODkwNSxcblx0XCIuL2JvXCI6IDExNTYwLFxuXHRcIi4vYm8uanNcIjogMTE1NjAsXG5cdFwiLi9iclwiOiAxMjc4LFxuXHRcIi4vYnIuanNcIjogMTI3OCxcblx0XCIuL2JzXCI6IDgwNjIyLFxuXHRcIi4vYnMuanNcIjogODA2MjIsXG5cdFwiLi9jYVwiOiAyNDY4LFxuXHRcIi4vY2EuanNcIjogMjQ2OCxcblx0XCIuL2NzXCI6IDU4MjIsXG5cdFwiLi9jcy5qc1wiOiA1ODIyLFxuXHRcIi4vY3ZcIjogNTA4NzcsXG5cdFwiLi9jdi5qc1wiOiA1MDg3Nyxcblx0XCIuL2N5XCI6IDQ3MzczLFxuXHRcIi4vY3kuanNcIjogNDczNzMsXG5cdFwiLi9kYVwiOiAyNDc4MCxcblx0XCIuL2RhLmpzXCI6IDI0NzgwLFxuXHRcIi4vZGVcIjogNTk3NDAsXG5cdFwiLi9kZS1hdFwiOiA2MDIxNyxcblx0XCIuL2RlLWF0LmpzXCI6IDYwMjE3LFxuXHRcIi4vZGUtY2hcIjogNjA4OTQsXG5cdFwiLi9kZS1jaC5qc1wiOiA2MDg5NCxcblx0XCIuL2RlLmpzXCI6IDU5NzQwLFxuXHRcIi4vZHZcIjogNTMwMCxcblx0XCIuL2R2LmpzXCI6IDUzMDAsXG5cdFwiLi9lbFwiOiA1MDgzNyxcblx0XCIuL2VsLmpzXCI6IDUwODM3LFxuXHRcIi4vZW4tYXVcIjogNzgzNDgsXG5cdFwiLi9lbi1hdS5qc1wiOiA3ODM0OCxcblx0XCIuL2VuLWNhXCI6IDc3OTI1LFxuXHRcIi4vZW4tY2EuanNcIjogNzc5MjUsXG5cdFwiLi9lbi1nYlwiOiAyMjI0Myxcblx0XCIuL2VuLWdiLmpzXCI6IDIyMjQzLFxuXHRcIi4vZW4taWVcIjogNDY0MzYsXG5cdFwiLi9lbi1pZS5qc1wiOiA0NjQzNixcblx0XCIuL2VuLW56XCI6IDc2MzE5LFxuXHRcIi4vZW4tbnouanNcIjogNzYzMTksXG5cdFwiLi9lb1wiOiA5MjkxNSxcblx0XCIuL2VvLmpzXCI6IDkyOTE1LFxuXHRcIi4vZXNcIjogNTU2NTUsXG5cdFwiLi9lcy1kb1wiOiA1NTI1MSxcblx0XCIuL2VzLWRvLmpzXCI6IDU1MjUxLFxuXHRcIi4vZXMtdXNcIjogNzExNDYsXG5cdFwiLi9lcy11cy5qc1wiOiA3MTE0Nixcblx0XCIuL2VzLmpzXCI6IDU1NjU1LFxuXHRcIi4vZXRcIjogNTYwMyxcblx0XCIuL2V0LmpzXCI6IDU2MDMsXG5cdFwiLi9ldVwiOiA3Nzc2Myxcblx0XCIuL2V1LmpzXCI6IDc3NzYzLFxuXHRcIi4vZmFcIjogNzY5NTksXG5cdFwiLi9mYS5qc1wiOiA3Njk1OSxcblx0XCIuL2ZpXCI6IDExODk3LFxuXHRcIi4vZmkuanNcIjogMTE4OTcsXG5cdFwiLi9mb1wiOiA5NDY5NCxcblx0XCIuL2ZvLmpzXCI6IDk0Njk0LFxuXHRcIi4vZnJcIjogOTQ0NzAsXG5cdFwiLi9mci1jYVwiOiA2MzA0OSxcblx0XCIuL2ZyLWNhLmpzXCI6IDYzMDQ5LFxuXHRcIi4vZnItY2hcIjogNTIzMzAsXG5cdFwiLi9mci1jaC5qc1wiOiA1MjMzMCxcblx0XCIuL2ZyLmpzXCI6IDk0NDcwLFxuXHRcIi4vZnlcIjogNTA0NCxcblx0XCIuL2Z5LmpzXCI6IDUwNDQsXG5cdFwiLi9nZFwiOiAyMTAxLFxuXHRcIi4vZ2QuanNcIjogMjEwMSxcblx0XCIuL2dsXCI6IDM4Nzk0LFxuXHRcIi4vZ2wuanNcIjogMzg3OTQsXG5cdFwiLi9nb20tbGF0blwiOiAyMzE2OCxcblx0XCIuL2dvbS1sYXRuLmpzXCI6IDIzMTY4LFxuXHRcIi4vZ3VcIjogOTUzNDksXG5cdFwiLi9ndS5qc1wiOiA5NTM0OSxcblx0XCIuL2hlXCI6IDI0MjA2LFxuXHRcIi4vaGUuanNcIjogMjQyMDYsXG5cdFwiLi9oaVwiOiAzMDA5NCxcblx0XCIuL2hpLmpzXCI6IDMwMDk0LFxuXHRcIi4vaHJcIjogMzAzMTYsXG5cdFwiLi9oci5qc1wiOiAzMDMxNixcblx0XCIuL2h1XCI6IDIyMTM4LFxuXHRcIi4vaHUuanNcIjogMjIxMzgsXG5cdFwiLi9oeS1hbVwiOiAxMTQyMyxcblx0XCIuL2h5LWFtLmpzXCI6IDExNDIzLFxuXHRcIi4vaWRcIjogMjkyMTgsXG5cdFwiLi9pZC5qc1wiOiAyOTIxOCxcblx0XCIuL2lzXCI6IDkwMTM1LFxuXHRcIi4vaXMuanNcIjogOTAxMzUsXG5cdFwiLi9pdFwiOiA5MDYyNixcblx0XCIuL2l0LmpzXCI6IDkwNjI2LFxuXHRcIi4vamFcIjogMzkxODMsXG5cdFwiLi9qYS5qc1wiOiAzOTE4Myxcblx0XCIuL2p2XCI6IDI0Mjg2LFxuXHRcIi4vanYuanNcIjogMjQyODYsXG5cdFwiLi9rYVwiOiA0MDQxNSxcblx0XCIuL2thLmpzXCI6IDQwNDE1LFxuXHRcIi4va2tcIjogNDc3NzIsXG5cdFwiLi9ray5qc1wiOiA0Nzc3Mixcblx0XCIuL2ttXCI6IDE4NzU4LFxuXHRcIi4va20uanNcIjogMTg3NTgsXG5cdFwiLi9rblwiOiA3OTI4Mixcblx0XCIuL2tuLmpzXCI6IDc5MjgyLFxuXHRcIi4va29cIjogMzM3MzAsXG5cdFwiLi9rby5qc1wiOiAzMzczMCxcblx0XCIuL2t5XCI6IDMzMjkxLFxuXHRcIi4va3kuanNcIjogMzMyOTEsXG5cdFwiLi9sYlwiOiAzNjg0MSxcblx0XCIuL2xiLmpzXCI6IDM2ODQxLFxuXHRcIi4vbG9cIjogNTU0NjYsXG5cdFwiLi9sby5qc1wiOiA1NTQ2Nixcblx0XCIuL2x0XCI6IDU3MDEwLFxuXHRcIi4vbHQuanNcIjogNTcwMTAsXG5cdFwiLi9sdlwiOiAzNzU5NSxcblx0XCIuL2x2LmpzXCI6IDM3NTk1LFxuXHRcIi4vbWVcIjogMzk4NjEsXG5cdFwiLi9tZS5qc1wiOiAzOTg2MSxcblx0XCIuL21pXCI6IDM1NDkzLFxuXHRcIi4vbWkuanNcIjogMzU0OTMsXG5cdFwiLi9ta1wiOiA5NTk2Nixcblx0XCIuL21rLmpzXCI6IDk1OTY2LFxuXHRcIi4vbWxcIjogODczNDEsXG5cdFwiLi9tbC5qc1wiOiA4NzM0MSxcblx0XCIuL21yXCI6IDEwMzcwLFxuXHRcIi4vbXIuanNcIjogMTAzNzAsXG5cdFwiLi9tc1wiOiA5ODQ3LFxuXHRcIi4vbXMtbXlcIjogNDEyMzcsXG5cdFwiLi9tcy1teS5qc1wiOiA0MTIzNyxcblx0XCIuL21zLmpzXCI6IDk4NDcsXG5cdFwiLi9tdFwiOiA3MjEyNixcblx0XCIuL210LmpzXCI6IDcyMTI2LFxuXHRcIi4vbXlcIjogNTYxNjUsXG5cdFwiLi9teS5qc1wiOiA1NjE2NSxcblx0XCIuL25iXCI6IDY0OTI0LFxuXHRcIi4vbmIuanNcIjogNjQ5MjQsXG5cdFwiLi9uZVwiOiAxNjc0NCxcblx0XCIuL25lLmpzXCI6IDE2NzQ0LFxuXHRcIi4vbmxcIjogOTM5MDEsXG5cdFwiLi9ubC1iZVwiOiA1OTgxNCxcblx0XCIuL25sLWJlLmpzXCI6IDU5ODE0LFxuXHRcIi4vbmwuanNcIjogOTM5MDEsXG5cdFwiLi9ublwiOiA4Mzg3Nyxcblx0XCIuL25uLmpzXCI6IDgzODc3LFxuXHRcIi4vcGEtaW5cIjogMTU4NTgsXG5cdFwiLi9wYS1pbi5qc1wiOiAxNTg1OCxcblx0XCIuL3BsXCI6IDY0NDk1LFxuXHRcIi4vcGwuanNcIjogNjQ0OTUsXG5cdFwiLi9wdFwiOiA4OTUyMCxcblx0XCIuL3B0LWJyXCI6IDU3OTcxLFxuXHRcIi4vcHQtYnIuanNcIjogNTc5NzEsXG5cdFwiLi9wdC5qc1wiOiA4OTUyMCxcblx0XCIuL3JvXCI6IDk2NDU5LFxuXHRcIi4vcm8uanNcIjogOTY0NTksXG5cdFwiLi9ydVwiOiAyMTc5Myxcblx0XCIuL3J1LmpzXCI6IDIxNzkzLFxuXHRcIi4vc2RcIjogNDA5NTAsXG5cdFwiLi9zZC5qc1wiOiA0MDk1MCxcblx0XCIuL3NlXCI6IDEwNDkwLFxuXHRcIi4vc2UuanNcIjogMTA0OTAsXG5cdFwiLi9zaVwiOiA5MDEyNCxcblx0XCIuL3NpLmpzXCI6IDkwMTI0LFxuXHRcIi4vc2tcIjogNjQyNDksXG5cdFwiLi9zay5qc1wiOiA2NDI0OSxcblx0XCIuL3NsXCI6IDE0OTg1LFxuXHRcIi4vc2wuanNcIjogMTQ5ODUsXG5cdFwiLi9zcVwiOiA1MTEwNCxcblx0XCIuL3NxLmpzXCI6IDUxMTA0LFxuXHRcIi4vc3JcIjogNDkxMzEsXG5cdFwiLi9zci1jeXJsXCI6IDEzNzA5LFxuXHRcIi4vc3ItY3lybC5qc1wiOiAxMzcwOSxcblx0XCIuL3NyLmpzXCI6IDQ5MTMxLFxuXHRcIi4vc3NcIjogODU4OTMsXG5cdFwiLi9zcy5qc1wiOiA4NTg5Myxcblx0XCIuL3N2XCI6IDk4NzYwLFxuXHRcIi4vc3YuanNcIjogOTg3NjAsXG5cdFwiLi9zd1wiOiA5MTE3Mixcblx0XCIuL3N3LmpzXCI6IDkxMTcyLFxuXHRcIi4vdGFcIjogMjczMzMsXG5cdFwiLi90YS5qc1wiOiAyNzMzMyxcblx0XCIuL3RlXCI6IDIzMTEwLFxuXHRcIi4vdGUuanNcIjogMjMxMTAsXG5cdFwiLi90ZXRcIjogNTIwOTUsXG5cdFwiLi90ZXQuanNcIjogNTIwOTUsXG5cdFwiLi90aFwiOiA5MDQxLFxuXHRcIi4vdGguanNcIjogOTA0MSxcblx0XCIuL3RsLXBoXCI6IDc1NzY4LFxuXHRcIi4vdGwtcGguanNcIjogNzU3NjgsXG5cdFwiLi90bGhcIjogODk0NDQsXG5cdFwiLi90bGguanNcIjogODk0NDQsXG5cdFwiLi90clwiOiA3MjM5Nyxcblx0XCIuL3RyLmpzXCI6IDcyMzk3LFxuXHRcIi4vdHpsXCI6IDI4MjU0LFxuXHRcIi4vdHpsLmpzXCI6IDI4MjU0LFxuXHRcIi4vdHptXCI6IDUxMTA2LFxuXHRcIi4vdHptLWxhdG5cIjogMzA2OTksXG5cdFwiLi90em0tbGF0bi5qc1wiOiAzMDY5OSxcblx0XCIuL3R6bS5qc1wiOiA1MTEwNixcblx0XCIuL3VrXCI6IDY3NjkxLFxuXHRcIi4vdWsuanNcIjogNjc2OTEsXG5cdFwiLi91clwiOiAxMzc5NSxcblx0XCIuL3VyLmpzXCI6IDEzNzk1LFxuXHRcIi4vdXpcIjogNjc5MSxcblx0XCIuL3V6LWxhdG5cIjogNjA1ODgsXG5cdFwiLi91ei1sYXRuLmpzXCI6IDYwNTg4LFxuXHRcIi4vdXouanNcIjogNjc5MSxcblx0XCIuL3ZpXCI6IDY1NjY2LFxuXHRcIi4vdmkuanNcIjogNjU2NjYsXG5cdFwiLi94LXBzZXVkb1wiOiAxNDM3OCxcblx0XCIuL3gtcHNldWRvLmpzXCI6IDE0Mzc4LFxuXHRcIi4veW9cIjogNzU4MDUsXG5cdFwiLi95by5qc1wiOiA3NTgwNSxcblx0XCIuL3poLWNuXCI6IDgzODM5LFxuXHRcIi4vemgtY24uanNcIjogODM4MzksXG5cdFwiLi96aC1oa1wiOiA1NTcyNixcblx0XCIuL3poLWhrLmpzXCI6IDU1NzI2LFxuXHRcIi4vemgtdHdcIjogNzQxNTIsXG5cdFwiLi96aC10dy5qc1wiOiA3NDE1MlxufTtcblxuXG5mdW5jdGlvbiB3ZWJwYWNrQ29udGV4dChyZXEpIHtcblx0dmFyIGlkID0gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSk7XG5cdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKGlkKTtcbn1cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0UmVzb2x2ZShyZXEpIHtcblx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhtYXAsIHJlcSkpIHtcblx0XHR2YXIgZSA9IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIgKyByZXEgKyBcIidcIik7XG5cdFx0ZS5jb2RlID0gJ01PRFVMRV9OT1RfRk9VTkQnO1xuXHRcdHRocm93IGU7XG5cdH1cblx0cmV0dXJuIG1hcFtyZXFdO1xufVxud2VicGFja0NvbnRleHQua2V5cyA9IGZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0S2V5cygpIHtcblx0cmV0dXJuIE9iamVjdC5rZXlzKG1hcCk7XG59O1xud2VicGFja0NvbnRleHQucmVzb2x2ZSA9IHdlYnBhY2tDb250ZXh0UmVzb2x2ZTtcbm1vZHVsZS5leHBvcnRzID0gd2VicGFja0NvbnRleHQ7XG53ZWJwYWNrQ29udGV4dC5pZCA9IDQ2NzAwOyIsImltcG9ydCBIUGFyc29uc0ZlZWRiYWNrIGZyb20gXCIuL2hwYXJzb25zRmVlZGJhY2tcIjtcbmltcG9ydCBCbG9ja0Jhc2VkR3JhZGVyIGZyb20gXCIuL2Jsb2NrR3JhZGVyLmpzXCI7XG5pbXBvcnQgXCIuLi8uLi9wYXJzb25zL2pzL3BhcnNvbnMtaTE4bi5lbi5qc1wiO1xuaW1wb3J0IFwiLi4vLi4vcGFyc29ucy9qcy9wYXJzb25zLWkxOG4ucHQtYnIuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxvY2tGZWVkYmFjayBleHRlbmRzIEhQYXJzb25zRmVlZGJhY2sge1xuICAgIGNyZWF0ZU91dHB1dCgpIHtcbiAgICAgICAgLy8gQmxvY2sgYmFzZWQgZ3JhZGluZyBvdXRwdXRcbiAgICAgICAgdGhpcy5tZXNzYWdlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy5ocGFyc29ucy5vdXRlckRpdi5hcHBlbmRDaGlsZCh0aGlzLm1lc3NhZ2VEaXYpO1xuICAgIH1cbiAgICBjdXN0b21pemVVSSgpIHtcbiAgICAgICAgJCh0aGlzLmhwYXJzb25zLnJ1bkJ1dHRvbikudGV4dCgnQ2hlY2sgTWUnKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICB0aGlzLmNoZWNrQ291bnQgPSAwO1xuICAgICAgICB0aGlzLnNvbHZlZCA9IGZhbHNlO1xuICAgICAgICAvLyBUT0RPOiBub3Qgc3VyZSB3aGF0IGlzIHRoZSBiZXN0IHdheSB0byBkbyB0aGlzXG4gICAgICAgIHRoaXMuZ3JhZGVyID0gbmV3IEJsb2NrQmFzZWRHcmFkZXIoKTtcbiAgICAgICAgbGV0IHNvbHV0aW9uQmxvY2tzID0gW107XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5ocGFyc29ucy5ibG9ja0Fuc3dlci5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgc29sdXRpb25CbG9ja3MucHVzaCh0aGlzLmhwYXJzb25zLm9yaWdpbmFsQmxvY2tzW3RoaXMuaHBhcnNvbnMuYmxvY2tBbnN3ZXJbaV1dKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNvbHV0aW9uID0gc29sdXRpb25CbG9ja3M7XG4gICAgICAgIHRoaXMuZ3JhZGVyLnNvbHV0aW9uID0gc29sdXRpb25CbG9ja3M7XG4gICAgICAgIHRoaXMuYW5zd2VyQXJlYSA9IHRoaXMuaHBhcnNvbnMuaHBhcnNvbnNJbnB1dC5xdWVyeVNlbGVjdG9yKCcuZHJvcC1hcmVhJyk7XG4gICAgfVxuXG4gICAgLy8gQ2FsbGVkIHdoZW4gY2hlY2sgYnV0dG9uIGNsaWNrZWQgKGJsb2NrLWJhc2VkIEZlZWRiYWNrKVxuICAgIGFzeW5jIHJ1bkJ1dHRvbkhhbmRsZXIoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tDdXJyZW50QW5zd2VyKCk7XG4gICAgICAgIHRoaXMubG9nQ3VycmVudEFuc3dlcigpO1xuICAgICAgICB0aGlzLnJlbmRlckZlZWRiYWNrKCk7XG4gICAgfVxuXG4gICAgYXN5bmMgbG9nQ3VycmVudEFuc3dlcigpIHtcbiAgICAgICAgbGV0IGFjdCA9IHtcbiAgICAgICAgICAgIHNjaGVtZTogXCJibG9ja1wiLFxuICAgICAgICAgICAgY29ycmVjdDogdGhpcy5ncmFkZXIuZ3JhZGVyU3RhdGUgPT0gJ2NvcnJlY3QnID8gXCJUXCIgOiBcIkZcIixcbiAgICAgICAgICAgIGFuc3dlcjogdGhpcy5ocGFyc29ucy5ocGFyc29uc0lucHV0LmdldFBhcnNvbnNUZXh0QXJyYXkoKSxcbiAgICAgICAgICAgIHBlcmNlbnQ6IHRoaXMuZ3JhZGVyLnBlcmNlbnRcbiAgICAgICAgfVxuICAgICAgICBsZXQgbG9nRGF0YSA9IHtcbiAgICAgICAgICAgIGV2ZW50OiBcImhwYXJzb25zQW5zd2VyXCIsXG4gICAgICAgICAgICBkaXZfaWQ6IHRoaXMuaHBhcnNvbnMuZGl2aWQsIFxuICAgICAgICAgICAgYWN0OiBhY3RcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmhwYXJzb25zLmxvZ0Jvb2tFdmVudChsb2dEYXRhKTtcbiAgICB9XG5cbiAgICAvLyBVc2VkIGZvciBibG9jay1iYXNlZCBmZWVkYmFja1xuICAgIGNoZWNrQ3VycmVudEFuc3dlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNvbHZlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvdW50Kys7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmVlZGJhY2soKTtcbiAgICAgICAgICAgIHRoaXMuZ3JhZGVyLmFuc3dlciA9IHRoaXMuaHBhcnNvbnMuaHBhcnNvbnNJbnB1dC5nZXRQYXJzb25zVGV4dEFycmF5KCk7XG4gICAgICAgICAgICB0aGlzLmdyYWRlID0gdGhpcy5ncmFkZXIuZ3JhZGUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyYWRlID09IFwiY29ycmVjdFwiKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzLmhwYXJzb25zLnJ1bkJ1dHRvbikucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckZlZWRiYWNrKCkge1xuICAgICAgICB0aGlzLmdyYWRlID0gdGhpcy5ncmFkZXIuZ3JhZGVyU3RhdGU7XG4gICAgICAgIHZhciBmZWVkYmFja0FyZWE7XG4gICAgICAgIHZhciBhbnN3ZXJBcmVhID0gJCh0aGlzLmFuc3dlckFyZWEpO1xuICAgICAgICBmZWVkYmFja0FyZWEgPSAkKHRoaXMubWVzc2FnZURpdik7XG5cbiAgICAgICAgaWYgKHRoaXMuZ3JhZGUgPT09IFwiY29ycmVjdFwiKSB7XG4gICAgICAgICAgICBhbnN3ZXJBcmVhLmFkZENsYXNzKFwiY29ycmVjdFwiKTtcbiAgICAgICAgICAgIGZlZWRiYWNrQXJlYS5mYWRlSW4oMTAwKTtcbiAgICAgICAgICAgIGZlZWRiYWNrQXJlYS5hdHRyKFwiY2xhc3NcIiwgXCJhbGVydCBhbGVydC1pbmZvXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgICBmZWVkYmFja0FyZWEuaHRtbChcbiAgICAgICAgICAgICAgICAgICAgJC5pMThuKFwibXNnX3BhcnNvbl9jb3JyZWN0XCIsIHRoaXMuY2hlY2tDb3VudClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmZWVkYmFja0FyZWEuaHRtbCgkLmkxOG4oXCJtc2dfcGFyc29uX2NvcnJlY3RfZmlyc3RfdHJ5XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hlY2tDb3VudCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ncmFkZSA9PT0gXCJpbmNvcnJlY3RUb29TaG9ydFwiKSB7XG4gICAgICAgICAgICAvLyB0b28gbGl0dGxlIGNvZGVcbiAgICAgICAgICAgIGFuc3dlckFyZWEuYWRkQ2xhc3MoXCJpbmNvcnJlY3RcIik7XG4gICAgICAgICAgICBmZWVkYmFja0FyZWEuZmFkZUluKDUwMCk7XG4gICAgICAgICAgICBmZWVkYmFja0FyZWEuYXR0cihcImNsYXNzXCIsIFwiYWxlcnQgYWxlcnQtZGFuZ2VyXCIpO1xuICAgICAgICAgICAgZmVlZGJhY2tBcmVhLmh0bWwoJC5pMThuKFwibXNnX3BhcnNvbl90b29fc2hvcnRcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ3JhZGUgPT09IFwiaW5jb3JyZWN0TW92ZUJsb2Nrc1wiKSB7XG4gICAgICAgICAgICB2YXIgYW5zd2VyQmxvY2tzID0gdGhpcy5hbnN3ZXJBcmVhLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGluU29sdXRpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciBpblNvbHV0aW9uSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIG5vdEluU29sdXRpb24gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5zd2VyQmxvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gYW5zd2VyQmxvY2tzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuc29sdXRpb24uaW5kZXhPZihibG9jay50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdEluU29sdXRpb24ucHVzaChibG9jayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5Tb2x1dGlvbi5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgaW5Tb2x1dGlvbkluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpc0luZGV4ZXMgPSB0aGlzLmdyYWRlci5pbnZlcnNlTElTSW5kaWNlcyhpblNvbHV0aW9uSW5kZXhlcyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc0luZGV4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub3RJblNvbHV0aW9uLnB1c2goaW5Tb2x1dGlvbltsaXNJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbnN3ZXJBcmVhLmFkZENsYXNzKFwiaW5jb3JyZWN0XCIpO1xuICAgICAgICAgICAgZmVlZGJhY2tBcmVhLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgZmVlZGJhY2tBcmVhLmF0dHIoXCJjbGFzc1wiLCBcImFsZXJ0IGFsZXJ0LWRhbmdlclwiKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90SW5Tb2x1dGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICQobm90SW5Tb2x1dGlvbltpXSkuYWRkQ2xhc3MoXCJpbmNvcnJlY3RQb3NpdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZlZWRiYWNrQXJlYS5odG1sKCQuaTE4bihcIm1zZ19wYXJzb25fd3Jvbmdfb3JkZXJcIikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmVlZGJhY2sgVUkgZm9yIEJsb2NrLWJhc2VkIEZlZWRiYWNrXG4gICAgY2xlYXJGZWVkYmFjaygpIHtcbiAgICAgICAgJCh0aGlzLmFuc3dlckFyZWEpLnJlbW92ZUNsYXNzKFwiaW5jb3JyZWN0IGNvcnJlY3RcIik7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuYW5zd2VyQXJlYS5jaGlsZE5vZGVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAkKGNoaWxkcmVuW2ldKS5yZW1vdmVDbGFzcyhcbiAgICAgICAgICAgICAgICBcImNvcnJlY3RQb3NpdGlvbiBpbmNvcnJlY3RQb3NpdGlvblwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcy5tZXNzYWdlRGl2KS5oaWRlKCk7XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvbHZlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvdW50ID0gMDtcbiAgICAgICAgICAgICQodGhpcy5ocGFyc29ucy5ydW5CdXR0b24pLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnNvbHZlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXJGZWVkYmFjaygpO1xuICAgIH1cblxufSIsImltcG9ydCBIUGFyc29uc0ZlZWRiYWNrIGZyb20gXCIuL2hwYXJzb25zRmVlZGJhY2tcIjtcbmltcG9ydCBpbml0U3FsSnMgZnJvbSBcInNxbC5qcy9kaXN0L3NxbC13YXNtLmpzXCI7XG5pbXBvcnQgSGFuZHNvbnRhYmxlIGZyb20gXCJoYW5kc29udGFibGVcIjtcbmltcG9ydCAnaGFuZHNvbnRhYmxlL2Rpc3QvaGFuZHNvbnRhYmxlLmZ1bGwuY3NzJztcblxudmFyIGFsbERidXJscyA9IHt9O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTUUxGZWVkYmFjayBleHRlbmRzIEhQYXJzb25zRmVlZGJhY2sge1xuXG4gICAgY3JlYXRlT3V0cHV0KCkge1xuICAgICAgICB2YXIgb3V0RGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgJChvdXREaXYpLmFkZENsYXNzKFwiaHBfb3V0cHV0IGNvbC1tZC0xMlwiKTtcbiAgICAgICAgdGhpcy5vdXREaXYgPSBvdXREaXY7XG4gICAgICAgIHRoaXMub3V0cHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgICAgdGhpcy5vdXRwdXQuaWQgPSB0aGlzLmhwYXJzb25zLmRpdmlkICsgXCJfc3Rkb3V0XCI7XG4gICAgICAgICQodGhpcy5vdXRwdXQpLmNzcyhcInZpc2liaWxpdHlcIiwgXCJoaWRkZW5cIik7XG4gICAgICAgIHZhciBjbGVhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICQoY2xlYXJEaXYpLmNzcyhcImNsZWFyXCIsIFwiYm90aFwiKTsgLy8gbmVlZGVkIHRvIG1ha2UgcGFyZW50IGRpdiByZXNpemUgcHJvcGVybHlcbiAgICAgICAgdGhpcy5ocGFyc29ucy5vdXRlckRpdi5hcHBlbmRDaGlsZChjbGVhckRpdik7XG4gICAgICAgIG91dERpdi5hcHBlbmRDaGlsZCh0aGlzLm91dHB1dCk7XG4gICAgICAgIHRoaXMuaHBhcnNvbnMub3V0ZXJEaXYuYXBwZW5kQ2hpbGQob3V0RGl2KTtcbiAgICAgICAgY2xlYXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAkKGNsZWFyRGl2KS5jc3MoXCJjbGVhclwiLCBcImJvdGhcIik7IC8vIG5lZWRlZCB0byBtYWtlIHBhcmVudCBkaXYgcmVzaXplIHByb3Blcmx5XG4gICAgICAgIHRoaXMuaHBhcnNvbnMub3V0ZXJEaXYuYXBwZW5kQ2hpbGQoY2xlYXJEaXYpO1xuICAgIH1cblxuICAgIHJlbmRlckZlZWRiYWNrKCkge1xuICAgICAgICBpZiAodGhpcy50ZXN0UmVzdWx0KSB7XG4gICAgICAgICAgICAkKHRoaXMub3V0cHV0KS50ZXh0KHRoaXMudGVzdFJlc3VsdCk7XG4gICAgICAgICAgICAkKHRoaXMub3V0cHV0KS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwidmlzaWJsZVwiKTtcbiAgICAgICAgfVxuICAgICAgICAkKHRoaXMub3V0RGl2KS5zaG93KCk7XG4gICAgfVxuXG4gICAgY2xlYXJGZWVkYmFjaygpIHtcbiAgICAgICAgJCh0aGlzLm91dERpdikuaGlkZSgpO1xuICAgIH1cblxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmNsZWFyRmVlZGJhY2soKTtcbiAgICB9XG5cbiAgICBpbml0KCkge1xuICAgICAgICAvLyBhZGFwdGVkIGZyb20gYWN0aXZlY29kZS1zcWxcbiAgICAgICAgLy8gZm5wcmVmaXggc2V0cyB0aGUgcGF0aCB0byBsb2FkIHRoZSBzcWwtd2FzbS53YXNtIGZpbGVcbiAgICAgICAgdmFyIGJvb2twcmVmaXg7XG4gICAgICAgIHZhciBmbnByZWZpeDtcbiAgICAgICAgaWYgKFxuICAgICAgICAgICAgZUJvb2tDb25maWcudXNlUnVuZXN0b25lU2VydmljZXMgfHxcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guaW5jbHVkZXMoXCJtb2RlPWJyb3dzaW5nXCIpXG4gICAgICAgICkge1xuICAgICAgICAgICAgYm9va3ByZWZpeCA9IGAke2VCb29rQ29uZmlnLmFwcH0vYm9va3MvcHVibGlzaGVkLyR7ZUJvb2tDb25maWcuYmFzZWNvdXJzZX1gO1xuICAgICAgICAgICAgZm5wcmVmaXggPSBib29rcHJlZml4ICsgXCIvX3N0YXRpY1wiO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVGhlIGVsc2UgY2xhdXNlIGhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgeW91IGFyZSBidWlsZGluZyBmb3IgYSBzdGF0aWMgd2ViIGJyb3dzZXJcbiAgICAgICAgICAgIGJvb2twcmVmaXggPSBcIlwiO1xuICAgICAgICAgICAgZm5wcmVmaXggPSBcIi9fc3RhdGljXCI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IFNRTGNvbmZpZyA9IHtcbiAgICAgICAgICAgIGxvY2F0ZUZpbGU6IChmaWxlbmFtZSkgPT4gYCR7Zm5wcmVmaXh9LyR7ZmlsZW5hbWV9YCxcbiAgICAgICAgfTtcbiAgICAgICAgLy8gdGhpcy5zaG93TGFzdCA9ICQodGhpcy5vcmlnRWxlbSkuZGF0YShcInNob3dsYXN0c3FsXCIpO1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMuaHBhcnNvbnM7XG4gICAgICAgIGluaXRTcWxKcyhTUUxjb25maWcpLnRoZW4oZnVuY3Rpb24gKFNRTCkge1xuICAgICAgICAgICAgLy8gc2V0IHVwIGNhbGwgdG8gbG9hZCBkYXRhYmFzZSBhc3luY2hyb25vdXNseSBpZiBnaXZlblxuICAgICAgICAgICAgaWYgKHNlbGYuZGJ1cmwpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYnVybC5zdGFydHNXaXRoKFwiL19zdGF0aWNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYnVybCA9IGAke2Jvb2twcmVmaXh9JHtzZWxmLmRidXJsfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoc2VsZi5ydW5CdXR0b24pLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgIGxldCBidXR0b25UZXh0ID0gJChzZWxmLnJ1bkJ1dHRvbikudGV4dCgpO1xuICAgICAgICAgICAgICAgICQoc2VsZi5ydW5CdXR0b24pLnRleHQoJC5pMThuKFwibXNnX2FjdGl2ZWNvZGVfbG9hZF9kYlwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoc2VsZi5kYnVybCBpbiBhbGxEYnVybHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJsb2FkaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB4V2FpdEZvcjogalF1ZXJ5LkRlZmVycmVkKCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbERidXJsc1tzZWxmLmRidXJsXS5zdGF0dXMgPT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS54V2FpdEZvci5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRiID0gYWxsRGJ1cmxzW3NlbGYuZGJ1cmxdLmRiT2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoc2VsZi5ydW5CdXR0b24pLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS50ZXh0KGJ1dHRvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYiA9IGFsbERidXJsc1tzZWxmLmRidXJsXS5kYk9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgJChzZWxmLnJ1bkJ1dHRvbikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS50ZXh0KGJ1dHRvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogaHR0cHM6Ly9naXRodWIuY29tL2xlcm9jaGEvY2hpbm9vay1kYXRhYmFzZS9yYXcvbWFzdGVyL0NoaW5vb2tEYXRhYmFzZS9EYXRhU291cmNlcy9DaGlub29rX1NxbGl0ZS5zcWxpdGVcbiAgICAgICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCBzZWxmLmRidXJsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdUludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGIgPSBuZXcgU1FMLkRhdGFiYXNlKHVJbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICBhbGxEYnVybHNbc2VsZi5kYnVybF0uZGJPYmplY3QgPSBzZWxmLmRiO1xuICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS50ZXh0KGJ1dHRvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS5kYiA9IHVJbnQ4QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS5zdGF0dXMgPSBcInJlYWR5XCI7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS54V2FpdEZvci5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRzIGlzIG5vdyBbe2NvbHVtbnM6Wydjb2wxJywnY29sMicsLi4uXSwgdmFsdWVzOltbZmlyc3Qgcm93XSwgW3NlY29uZCByb3ddLCAuLi5dfV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuZGIgPSBuZXcgU1FMLkRhdGFiYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFkYXB0ZWQgZnJvbSBhY3RpdmVjb2RlIC0gU1FMXG4gICAgYXN5bmMgcnVuQnV0dG9uSGFuZGxlcigpIHtcbiAgICAgICAgLy8gRGlzYWJsZSB0aGUgcnVuIGJ1dHRvbiB1bnRpbCB0aGUgcnVuIGlzIGZpbmlzaGVkLlxuICAgICAgICB0aGlzLmhwYXJzb25zLnJ1bkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blByb2coKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYHRoZXJlIHdhcyBhbiBlcnJvciAke2V9IHJ1bm5pbmcgdGhlIGNvZGVgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ0N1cnJlbnRBbnN3ZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJGZWVkYmFjaygpO1xuICAgICAgICAvLyBUaGUgcnVuIGlzIGZpbmlzaGVkOyByZS1lbmFibGUgdGhlIGJ1dHRvbi5cbiAgICAgICAgdGhpcy5ocGFyc29ucy5ydW5CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBhZGFwdGVkIGZyb20gYWN0aXZlY29kZS1zcWxcbiAgICBhc3luYyBydW5Qcm9nKCkge1xuICAgICAgICAvLyBDbGVhciBhbnkgb2xkIHJlc3VsdHNcbiAgICAgICAgbGV0IGRpdmlkID0gdGhpcy5ocGFyc29ucy5kaXZpZCArIFwiX3NxbF9vdXRcIjtcbiAgICAgICAgbGV0IHJlc3BEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZpZCk7XG4gICAgICAgIGlmIChyZXNwRGl2KSB7XG4gICAgICAgICAgICByZXNwRGl2LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocmVzcERpdik7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzLm91dHB1dCkudGV4dChcIlwiKTtcbiAgICAgICAgLy8gY3JlYXRpbmcgbmV3IHJlc3VsdHMgZGl2XG4gICAgICAgIHJlc3BEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByZXNwRGl2LmlkID0gZGl2aWQ7XG4gICAgICAgIHRoaXMub3V0RGl2LmFwcGVuZENoaWxkKHJlc3BEaXYpO1xuXG4gICAgICAgIC8vIFJ1biB0aGlzIHF1ZXJ5XG4gICAgICAgIGxldCBxdWVyeSA9IGF3YWl0IHRoaXMuYnVpbGRQcm9nKCk7XG4gICAgICAgIGlmICghdGhpcy5ocGFyc29ucy5kYikge1xuICAgICAgICAgICAgJCh0aGlzLm91dHB1dCkudGV4dChcbiAgICAgICAgICAgICAgICBgRXJyb3I6IERhdGFiYXNlIG5vdCBpbml0aWFsaXplZCEgREJVUkw6ICR7dGhpcy5ocGFyc29ucy5kYnVybH1gXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGV4ZWN1dGlvblN1Y2Nlc3NGbGFnID0gdHJ1ZTtcblxuICAgICAgICAvLyBleGVjdXRpbmcgaGlkZGVuIHByZWZpeCBpZiBleGlzdFxuICAgICAgICBpZiAocXVlcnkucHJlZml4KSB7XG4gICAgICAgICAgICB0aGlzLnByZWZpeHJlc3VsdHMgPSB0aGlzLmV4ZWN1dGVJdGVyYXRlZFN0YXRlbWVudHModGhpcy5ocGFyc29ucy5kYi5pdGVyYXRlU3RhdGVtZW50cyhxdWVyeS5wcmVmaXgpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByZWZpeHJlc3VsdHMuYXQoLTEpLnN0YXR1cyA9PSAnZmFpbHVyZScpIHtcbiAgICAgICAgICAgICAgICAvLyBpZiBlcnJvciBvY2N1cmVkIGluIGhpZGRlbiBwcmVmaXgsIGxvZyBhbmQgc3RvcCBleGVjdXRpbmcgdGhlIHJlc3RcbiAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbGl6ZVJlc3VsdHMocmVzcERpdiwgdGhpcy5wcmVmaXhyZXN1bHRzLCBcIkVycm9yIGV4ZWN1dGluZyBoaWRkZW4gY29kZSBpbiBwcmVmaXhcIik7XG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uU3VjY2Vzc0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGV4ZWN1dGluZyBzdHVkZW50IGlucHV0IGluIG1pY3JvIFBhcnNvbnNcbiAgICAgICAgaWYgKGV4ZWN1dGlvblN1Y2Nlc3NGbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdHMgPSB0aGlzLmV4ZWN1dGVJdGVyYXRlZFN0YXRlbWVudHModGhpcy5ocGFyc29ucy5kYi5pdGVyYXRlU3RhdGVtZW50cyhxdWVyeS5pbnB1dCkpO1xuICAgICAgICAgICAgLy8gYWx3YXlzIHJlbmRlciBmdWxsIGV4ZWN1dGlvbiByZXN1bHRzIG9mIHN0dWRlbnQgaW5wdXQgcmVnYXJkbGVzcyBvZiBzdWNjZXNzL2ZhaWx1cmVcbiAgICAgICAgICAgIHRoaXMudmlzdWFsaXplUmVzdWx0cyhyZXNwRGl2LCB0aGlzLnJlc3VsdHMpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0cy5hdCgtMSkuc3RhdHVzID09ICdmYWlsdXJlJykge1xuICAgICAgICAgICAgICAgIC8vIGlmIGVycm9yIG9jY3VyZWQgaW4gc3R1ZGVudCBpbnB1dCwgc3RvcCBleGVjdXRpbmcgc3VmZml4L3VuaXR0dGVzdCBcbiAgICAgICAgICAgICAgICBleGVjdXRpb25TdWNjZXNzRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBleGVjdXRpbmcgaGlkZGVuIHN1ZmZpeCBpZiBleGlzdFxuICAgICAgICAvLyBJbiBtb3N0IGNhc2VzIHRoZSBzdWZmaXggaXMganVzdCBcInNlbGVjdCAqIGZyb20geFwiIHRvIFxuICAgICAgICAvLyAgICBzZWUgaWYgdGhlIG9wZXJhdGlvbnMgb24gdGhlIGRhdGFiYXNlIGlzIGNvcnJlY3RcbiAgICAgICAgaWYgKGV4ZWN1dGlvblN1Y2Nlc3NGbGFnICYmIHF1ZXJ5LnN1ZmZpeCkge1xuICAgICAgICAgICAgdGhpcy5zdWZmaXhyZXN1bHRzID0gdGhpcy5leGVjdXRlSXRlcmF0ZWRTdGF0ZW1lbnRzKHRoaXMuaHBhcnNvbnMuZGIuaXRlcmF0ZVN0YXRlbWVudHMocXVlcnkuc3VmZml4KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWZmaXhyZXN1bHRzLmF0KC0xKS5zdGF0dXMgPT0gJ2ZhaWx1cmUnKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgZXJyb3Igb2NjdXJlZCBpbiBoaWRkZW4gc3VmZml4LCB2aXN1YWxpemUgdGhlIHJlc3VsdHNcbiAgICAgICAgICAgICAgICB0aGlzLnZpc3VhbGl6ZVJlc3VsdHMocmVzcERpdiwgdGhpcy5zdWZmaXhyZXN1bHRzLCBcIkVycm9yIGV4ZWN1dGluZyBoaWRkZW4gY29kZSBpbiBzdWZmaXhcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaG93IHRoZSBvdXRwdXQgZGl2XG4gICAgICAgICQodGhpcy5vdXREaXYpLnNob3coKTtcblxuICAgICAgICAvLyBOb3cgaGFuZGxlIGF1dG9ncmFkaW5nXG4gICAgICAgIC8vIGF1dG9ncmFkaW5nIHRha2VzIHRoZSByZXN1bHRzIG9mIHRoZSBoaWRkZW4gc3VmZml4IGlmIGV4aXN0XG4gICAgICAgIC8vIG90aGVyd2lzZSB0YWtlIHRoZSByZXN1bHQgb2Ygc3R1ZGVudCBpbnB1dFxuICAgICAgICBpZiAodGhpcy5ocGFyc29ucy51bml0dGVzdCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3VmZml4cmVzdWx0cykge1xuICAgICAgICAgICAgICAgIHRoaXMudGVzdFJlc3VsdCA9IHRoaXMuYXV0b2dyYWRlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1ZmZpeHJlc3VsdHNbdGhpcy5zdWZmaXhyZXN1bHRzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy50ZXN0UmVzdWx0ID0gdGhpcy5hdXRvZ3JhZGUoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0c1t0aGlzLnJlc3VsdHMubGVuZ3RoIC0gMV1cbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzLm91dHB1dCkuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXCJkb25lXCIpO1xuICAgIH1cblxuICAgIC8vIFJlZmFjdG9yZWQgZnJvbSBhY3RpdmVjb2RlLXNxbC5cbiAgICAvLyBUYWtlcyBpdGVyYXRlZCBzdGF0ZW1lbnRzIGZyb20gZGIuaXRlcmF0ZVN0YXRlbW50cyhxdWVyeVN0cmluZylcbiAgICAvLyBSZXR1cm5zIEFycmF5PHJlc3VsdD46XG4gICAgLyogZWFjaCByZXN1bHQ6IHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIiBvciBcImZhbGl1cmVcIixcbiAgICAgICAgLy8gZm9yIFNFTEVDVCBzdGF0ZW1lbnRzICg/KTpcbiAgICAgICAgY29sdW1uczogbnVtYmVyIG9mIGNvbHVtbnMsXG4gICAgICAgIHZhbHVlczogZGF0YSxcbiAgICAgICAgcm93Y291bnQ6IG51bWJlciBvZiByb3dzIGluIGRhdGEsXG4gICAgICAgIC8vIGZvciBJTlNFUlQsIFVQREFURSwgREVMRVRFOlxuICAgICAgICBvcGVyYXRpb246IFwiSU5TRVJUXCIsIFwiVVBEQVRFXCIsIG9yIFwiREVMRVRFXCIsXG4gICAgICAgIHJvd2NvdW50OiBudW1iZXIgb2Ygcm93cyBtb2RpZmllZCxcbiAgICAgICAgLy8gd2hlbiBlcnJvciBvY2N1cnJlZCAoYXNpZGUgZnJvbSBzdGF0dXMpOlxuICAgICAgICBtZXNzYWdlOiBlcnJvciBtZXNzYWdlLFxuICAgICAgICBzcWw6IHJlbWFpbmluZyBTUUwgKD8pXG4gICAgICAgIC8vIHdoZW4gbm8gcXVlcmllcyB3ZXJlIGV4ZWN1dGVkOlxuICAgICAgICBtZXNzYWdlOiBcIm5vIHF1ZXJpZXMgc3VibWl0dGVkXCJcbiAgICB9Ki9cbiAgICAvLyBJZiBhbiBlcnJvciBvY2N1cnMgaXQgd2lsbCBzdG9wIGV4ZWN1dGluZyB0aGUgcmVzdCBvZiBxdWVyaWVzIGluIGl0LlxuICAgIC8vIFRodXMgdGhlIGVycm9yIHJlc3VsdCB3aWxsIGFsd2F5cyBiZSB0aGUgbGFzdCBpdGVtLlxuICAgIGV4ZWN1dGVJdGVyYXRlZFN0YXRlbWVudHMoaXQpIHtcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IHN0YXRlbWVudCBvZiBpdCkge1xuICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gc3RhdGVtZW50LmdldENvbHVtbk5hbWVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhISBwcm9iYWJseSBhIFNFTEVDVFxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhdGVtZW50LnN0ZXAoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHN0YXRlbWVudC5nZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Y291bnQ6IGRhdGEubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbnNxbCA9IHN0YXRlbWVudC5nZXROb3JtYWxpemVkU1FMKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSBuc3FsLnN1YnN0cigwLCA2KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZW1lbnQuc3RlcCgpOyAvLyBleGVjdXRlIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZGV0ZWN0IElOU0VSVC9VUERBVEUvREVMRVRFIHRvIGdpdmUgZnJpZW5kbHkgZmVlZGJhY2tcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gcm93cyBtb2RpZmllZCAtIHVuZm9ydHVuYXRlbHksIHRoaXMgd29uJ3QgY2F0Y2ggc3VjaCBxdWVyaWVzXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXkgdXNlIENURXMuICBUaGVyZSBzZWVtcyB0byBiZSBubyByZWxpYWJsZSB3YXkgb2Yga25vd2luZ1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGEgU1FMaXRlIHF1ZXJ5IGFjdHVhbGx5IG1vZGlmaWVkIGRhdGEuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9PT0gXCJpbnNlcnRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID09PSBcInVwZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPT09IFwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBwcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Y291bnQ6IHRoaXMuaHBhcnNvbnMuZGIuZ2V0Um93c01vZGlmaWVkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7IHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcImZhaWx1cmVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgc3FsOiBpdC5nZXRSZW1haW5pbmdTUUwoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZmFpbHVyZVwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gcXVlcmllcyBzdWJtaXR0ZWQuXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICAvLyBvdXRwdXQgdGhlIHJlc3VsdHMgaW4gdGhlIHJlc3VsdEFycmF5KEFycmF5PHJlc3VsdHM+KS5cbiAgICAvLyBjb250YWluZXI6IHRoZSBjb250YWluZXIgdGhhdCBjb250YWlucyB0aGUgcmVzdWx0c1xuICAgIC8vIHJlc3VsdEFycmF5IChBcnJheTxyZXN1bHQ+KTogc2VlIGV4ZWN1dGVJdGVyYXRlZFN0YXRlbWVudHNcbiAgICAvLyBFYWNoIHJlc3VsdCB3aWxsIGJlIGluIGEgc2VwYXJhdGUgcm93LlxuICAgIC8vIGRldk5vdGUgd2lsbCBiZSBkaXNwbGF5ZWQgaW4gdGhlIHRvcCByb3cgaWYgZXhpc3QuXG4gICAgLy8gQ3VycmVudCB1c2FnZTogXCJlcnJvciBleGVjdXRpbmcgaGlkZGVuIGNvZGUgaW4gcHJlZml4L3N1ZmZpeFwiXG4gICAgdmlzdWFsaXplUmVzdWx0cyhjb250YWluZXIsIHJlc3VsdEFycmF5LCBkZXZOb3RlKSB7XG4gICAgICAgIGlmIChkZXZOb3RlKSB7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBzZWN0aW9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaHBfc3FsX3Jlc3VsdFwiKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWN0aW9uKTtcbiAgICAgICAgICAgIGxldCBtZXNzYWdlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSBkZXZOb3RlO1xuICAgICAgICAgICAgbWVzc2FnZUJveC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImhwX3NxbF9yZXN1bHRfZmFpbHVyZVwiKTtcbiAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQobWVzc2FnZUJveCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChsZXQgciBvZiByZXN1bHRBcnJheSkge1xuICAgICAgICAgICAgbGV0IHNlY3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgc2VjdGlvbi5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImhwX3NxbF9yZXN1bHRcIik7XG4gICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoc2VjdGlvbik7XG4gICAgICAgICAgICBpZiAoci5zdGF0dXMgPT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgaWYgKHIuY29sdW1ucykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFibGVEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKHRhYmxlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3InLCByKTtcbiAgICAgICAgICAgICAgICAgICAgY3JlYXRlVGFibGUociwgdGFibGVEaXYsIDIwMCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJtc2cgPSByLnJvd2NvdW50ICE9PSAxID8gXCIgcm93cyBcIiA6IFwiIHJvdyBcIjtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1zZyA9IFwiXCIgKyByLnJvd2NvdW50ICsgcm1zZyArIFwicmV0dXJuZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHIucm93Y291bnQgPiAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1zZyA9IG1zZyArIFwiIChvbmx5IGZpcnN0IDEwMCByb3dzIGRpc3BsYXllZClcIjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtc2cgPSBtc2cgKyBcIi5cIjtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJveC50ZXh0Q29udGVudCA9IG1zZztcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJveC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImhwX3NxbF9yZXN1bHRfc3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChtZXNzYWdlQm94KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHIucm93Y291bnQpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3AgPSByLm9wZXJhdGlvbjtcbiAgICAgICAgICAgICAgICAgICAgb3AgPSBvcCArIChvcC5jaGFyQXQob3AubGVuZ3RoIC0gMSkgPT09IFwiZVwiID8gXCJkLlwiIDogXCJlZC5cIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBybXNnID0gci5yb3djb3VudCAhPT0gMSA/IFwiIHJvd3MgXCIgOiBcIiByb3cgXCI7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSBcIlwiICsgci5yb3djb3VudCArIHJtc2cgKyBvcDtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUJveC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImhwX3NxbF9yZXN1bHRfc3VjY2Vzc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChtZXNzYWdlQm94KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSBcIk9wZXJhdGlvbiBzdWNjZWVkZWQuXCI7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJocF9zcWxfcmVzdWx0X3N1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQobWVzc2FnZUJveCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUJveC50ZXh0Q29udGVudCA9IHIubWVzc2FnZTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaHBfc3FsX3Jlc3VsdF9mYWlsdXJlXCIpO1xuICAgICAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQobWVzc2FnZUJveCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gXG4gICAgLy8gYWRhcHRlZCBmcm9tIGFjdGl2ZWNvZGVcbiAgICBhc3luYyBidWlsZFByb2coKSB7XG4gICAgICAgIC8vIGFzc2VtYmxlIGNvZGUgZnJvbSBwcmVmaXgsIHN1ZmZpeCwgYW5kIGVkaXRvciBmb3IgcnVubmluZy5cbiAgICAgICAgbGV0IHByb2cgPSB7fTtcbiAgICAgICAgaWYgKHRoaXMuaHBhcnNvbnMuaGlkZGVuUHJlZml4KSB7XG4gICAgICAgICAgICBwcm9nLnByZWZpeCA9IHRoaXMuaHBhcnNvbnMuaGlkZGVuUHJlZml4O1xuICAgICAgICB9XG4gICAgICAgIHByb2cuaW5wdXQgPSB0aGlzLmhwYXJzb25zLmhwYXJzb25zSW5wdXQuZ2V0UGFyc29uc1RleHRBcnJheSgpLmpvaW4oJyAnKSArIFwiXFxuXCI7XG4gICAgICAgIGlmICh0aGlzLmhwYXJzb25zLmhpZGRlblN1ZmZpeCkge1xuICAgICAgICAgICAgcHJvZy5zdWZmaXggPSB0aGlzLmhwYXJzb25zLmhpZGRlblN1ZmZpeDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHByb2cpO1xuICAgIH1cblxuICAgIC8vIGNvcGllZCBmcm9tIGFjdGl2ZWNvZGUtc3FsXG4gICAgYXN5bmMgbG9nQ3VycmVudEFuc3dlcigpIHtcbiAgICAgICAgaWYgKHRoaXMudW5pdF9yZXN1bHRzKSB7XG4gICAgICAgICAgICBsZXQgYWN0ID0ge1xuICAgICAgICAgICAgICAgIHNjaGVtZTogXCJleGVjdXRpb25cIixcbiAgICAgICAgICAgICAgICBjb3JyZWN0OiAodGhpcy5mYWlsZWQgPT09IDAgJiYgdGhpcy5wZXJjZW50ICE9IG51bGwpID8gXCJUXCIgOiBcIkZcIixcbiAgICAgICAgICAgICAgICBhbnN3ZXI6IHRoaXMuaHBhcnNvbnMuaHBhcnNvbnNJbnB1dC5nZXRQYXJzb25zVGV4dEFycmF5KCksXG4gICAgICAgICAgICAgICAgcGVyY2VudDogdGhpcy5wZXJjZW50IC8vIHBlcmNlbnQgaXMgbnVsbCBpZiB0aGVyZSBpcyBleGVjdXRpb24gZXJyb3JcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBsb2dEYXRhID0ge1xuICAgICAgICAgICAgICAgIGV2ZW50OiBcImhwYXJzb25zQW5zd2VyXCIsXG4gICAgICAgICAgICAgICAgZGl2X2lkOiB0aGlzLmhwYXJzb25zLmRpdmlkLFxuICAgICAgICAgICAgICAgIGFjdDogYWN0XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhd2FpdCB0aGlzLmhwYXJzb25zLmxvZ0Jvb2tFdmVudChsb2dEYXRhKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIG1pZ2h0IG1vdmUgdG8gYmFzZSBjbGFzcyBpZiB1c2VkIGJ5IG11bHRpcGxlIGV4ZWN1dGlvbiBiYXNlZCBmZWVkYmFja1xuICAgIGF1dG9ncmFkZShyZXN1bHRfdGFibGUpIHtcbiAgICAgICAgdmFyIHRlc3RzID0gdGhpcy5ocGFyc29ucy51bml0dGVzdC5zcGxpdCgvXFxuLyk7XG4gICAgICAgIHRoaXMucGFzc2VkID0gMDtcbiAgICAgICAgdGhpcy5mYWlsZWQgPSAwO1xuICAgICAgICAvLyBUZXN0cyBzaG91bGQgYmUgb2YgdGhlIGZvcm1cbiAgICAgICAgLy8gYXNzZXJ0IHJvdyxjb2wgb3BlciB2YWx1ZSBmb3IgZXhhbXBsZVxuICAgICAgICAvLyBhc3NlcnQgNCw0ID09IDNcbiAgICAgICAgdmFyIHJlc3VsdCA9IFwiXCI7XG4gICAgICAgIHRlc3RzID0gdGVzdHMuZmlsdGVyKGZ1bmN0aW9uIChzKSB7XG4gICAgICAgICAgICByZXR1cm4gcy5pbmRleE9mKFwiYXNzZXJ0XCIpID4gLTE7XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCB0ZXN0IG9mIHRlc3RzKSB7XG4gICAgICAgICAgICBsZXQgd2xpc3QgPSB0ZXN0LnNwbGl0KC9cXHMrLyk7XG4gICAgICAgICAgICB3bGlzdC5zaGlmdCgpO1xuICAgICAgICAgICAgbGV0IGxvYyA9IHdsaXN0LnNoaWZ0KCk7XG4gICAgICAgICAgICBsZXQgb3BlciA9IHdsaXN0LnNoaWZ0KCk7XG4gICAgICAgICAgICBsZXQgZXhwZWN0ZWQgPSB3bGlzdC5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIGxldCBbcm93LCBjb2xdID0gbG9jLnNwbGl0KFwiLFwiKTtcbiAgICAgICAgICAgIHJlc3VsdCArPSB0aGlzLnRlc3RPbmVBc3NlcnQoXG4gICAgICAgICAgICAgICAgcm93LFxuICAgICAgICAgICAgICAgIGNvbCxcbiAgICAgICAgICAgICAgICBvcGVyLFxuICAgICAgICAgICAgICAgIGV4cGVjdGVkLFxuICAgICAgICAgICAgICAgIHJlc3VsdF90YWJsZVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJlc3VsdCArPSBcIlxcblwiO1xuICAgICAgICB9XG4gICAgICAgIGxldCBwY3QgPSAoMTAwICogdGhpcy5wYXNzZWQpIC8gKHRoaXMucGFzc2VkICsgdGhpcy5mYWlsZWQpO1xuICAgICAgICB0aGlzLnBlcmNlbnQgPSBwY3Q7XG4gICAgICAgIHBjdCA9IHBjdC50b0xvY2FsZVN0cmluZyh1bmRlZmluZWQsIHsgbWF4aW11bUZyYWN0aW9uRGlnaXRzOiAyIH0pO1xuICAgICAgICByZXN1bHQgKz0gYFlvdSBwYXNzZWQgJHt0aGlzLnBhc3NlZH0gb3V0IG9mICR7dGhpcy5wYXNzZWQgKyB0aGlzLmZhaWxlZFxuICAgICAgICAgICAgfSB0ZXN0cyBmb3IgJHtwY3R9JWA7XG4gICAgICAgIHRoaXMudW5pdF9yZXN1bHRzID0gYHBlcmNlbnQ6JHtwY3R9OnBhc3NlZDoke3RoaXMucGFzc2VkfTpmYWlsZWQ6JHt0aGlzLmZhaWxlZH1gO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cblxuICAgIC8vIG1pZ2h0IG1vdmUgdG8gYmFzZSBjbGFzcyBpZiB1c2VkIGJ5IG11bHRpcGxlIGV4ZWN1dGlvbiBiYXNlZCBmZWVkYmFja1xuICAgIHRlc3RPbmVBc3NlcnQocm93LCBjb2wsIG9wZXIsIGV4cGVjdGVkLCByZXN1bHRfdGFibGUpIHtcbiAgICAgICAgLy8gbWFrZSBzdXJlIHJvdyBhbmQgY29sIGFyZSBpbiBib3VuZHNcbiAgICAgICAgbGV0IGFjdHVhbDtcbiAgICAgICAgbGV0IG91dHB1dCA9IFwiXCI7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhY3R1YWwgPSByZXN1bHRfdGFibGUudmFsdWVzW3Jvd11bY29sXTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgaWYgKGV4cGVjdGVkID09ICdOT19EQVRBJykge1xuICAgICAgICAgICAgICAgIHRoaXMucGFzc2VkKys7XG4gICAgICAgICAgICAgICAgb3V0cHV0ID0gYFBhc3NlZDogTm8gZGF0YSBpbiByb3cgJHtyb3d9LCBjb2x1bW4gJHtjb2x9YDtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBgRmFpbGVkOiBOb3QgZW5vdWdoIGRhdGEgdG8gY2hlY2sgcm93ICR7cm93fSBvciBjb2x1bW4gJHtjb2x9YDtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG9wZXJhdG9ycyA9IHtcbiAgICAgICAgICAgIFwiPT1cIjogZnVuY3Rpb24gKG9wZXJhbmQxLCBvcGVyYW5kMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYW5kMSA9PSBvcGVyYW5kMjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIiE9XCI6IGZ1bmN0aW9uIChvcGVyYW5kMSwgb3BlcmFuZDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3BlcmFuZDEgIT0gb3BlcmFuZDI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCI+XCI6IGZ1bmN0aW9uIChvcGVyYW5kMSwgb3BlcmFuZDIpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3BlcmFuZDEgPiBvcGVyYW5kMjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIjxcIjogZnVuY3Rpb24gKG9wZXJhbmQxLCBvcGVyYW5kMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYW5kMSA+IG9wZXJhbmQyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHJlcyA9IG9wZXJhdG9yc1tvcGVyXShhY3R1YWwsIGV4cGVjdGVkKTtcbiAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgb3V0cHV0ID0gYFBhc3M6ICR7YWN0dWFsfSAke29wZXJ9ICR7ZXhwZWN0ZWR9IGluIHJvdyAke3Jvd30gY29sdW1uICR7cmVzdWx0X3RhYmxlLmNvbHVtbnNbY29sXX1gO1xuICAgICAgICAgICAgdGhpcy5wYXNzZWQrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCA9IGBGYWlsZWQgJHthY3R1YWx9ICR7b3Blcn0gJHtleHBlY3RlZH0gaW4gcm93ICR7cm93fSBjb2x1bW4gJHtyZXN1bHRfdGFibGUuY29sdW1uc1tjb2xdfWA7XG4gICAgICAgICAgICB0aGlzLmZhaWxlZCsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVUYWJsZSh0YWJsZURhdGEsIGNvbnRhaW5lciwgbWF4SGVpZ2h0KSB7XG4gICAgbGV0IGRhdGEgPSB0YWJsZURhdGEudmFsdWVzO1xuICAgIGxldCB0cmltUm93cyA9IHVuZGVmaW5lZDtcbiAgICBpZiAoZGF0YS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8ga2x1ZGdlOiBubyBjb2x1bW4gaGVhZGVycyB3aWxsIHNob3cgdXAgdW5sZXNzIHdlIGRvIHRoaXNcbiAgICAgICAgZGF0YSA9IFt0YWJsZURhdGEuY29sdW1ucy5tYXAoKGUpID0+IG51bGwpXTtcbiAgICAgICAgdHJpbVJvd3MgPSBbMF07XG4gICAgfVxuXG4gICAgdmFyIGhvdCA9IG5ldyBIYW5kc29udGFibGUoY29udGFpbmVyLCB7XG4gICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgIHRyaW1Sb3dzOiB0cmltUm93cyxcbiAgICAgICAgd2lkdGg6IFwiMTAwJVwiLFxuICAgICAgICBoZWlnaHQ6IG1heEhlaWdodCxcbiAgICAgICAgYXV0b1Jvd1NpemU6IHRydWUsXG4gICAgICAgIGF1dG9Db2x1bW5TaXplOiB7IHVzZUhlYWRlcnM6IHRydWUgfSxcbiAgICAgICAgcm93SGVhZGVyczogZmFsc2UsXG4gICAgICAgIGNvbEhlYWRlcnM6IHRhYmxlRGF0YS5jb2x1bW5zLFxuICAgICAgICBlZGl0b3I6IGZhbHNlLFxuICAgICAgICBtYXhSb3dzOiAxMDAsXG4gICAgICAgIGZpbHRlcnM6IGZhbHNlLFxuICAgICAgICBkcm9wZG93bk1lbnU6IGZhbHNlLFxuICAgICAgICBsaWNlbnNlS2V5OiBcIm5vbi1jb21tZXJjaWFsLWFuZC1ldmFsdWF0aW9uXCIsXG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZygnaG90JywgaG90KVxuXG4gICAgLy8gY2FsY3VsYXRlIGFjdHVhbCBoZWlnaHQgYW5kIHJlc2l6ZVxuICAgIGxldCBhY3R1YWxIZWlnaHQgPSA0MDsgLy8gaGVhZGVyIGhlaWdodCArIHNtYWxsIG1hcmdpblxuICAgIGlmICh0YWJsZURhdGEudmFsdWVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdnZXRyb3doZWlnaHQnLCBob3QuZ2V0Um93SGVpZ2h0KGkpKTtcbiAgICAgICAgICAgIGFjdHVhbEhlaWdodCA9IGFjdHVhbEhlaWdodCArIGhvdC5nZXRSb3dIZWlnaHQoaSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnYWN0dWFsaGVpZ2h0JywgYWN0dWFsSGVpZ2h0KTtcbiAgICAgICAgICAgIGlmIChhY3R1YWxIZWlnaHQgPiBtYXhIZWlnaHQpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdhY3R1YWxoZWlnaHQnLGFjdHVhbEhlaWdodClcblxuICAgIGhvdC51cGRhdGVTZXR0aW5ncyh7IGhlaWdodDogYWN0dWFsSGVpZ2h0IH0pO1xuXG4gICAgcmV0dXJuIGhvdDtcbn1cbiIsIi8vIFRoaXMgZmlsZSBpcyBhZGFwdGVkIGZyb20gbGluZUdyYWRlciBpbiBwYXJzb25zIGRpcmVjdGl2ZS5cbi8vIFdlIGNvdWxkIGhhdmUgZml0IG91ciBkYXRhIHN0cnVjdHVyZSB0byB1c2UgdGhlIG9yaWdpbmFsIExpbmVCYXNlZEdyYWRlciBkaXJlY3RseSxcbi8vIGJ1dCB0aGF0IHdvdWxkIHJlc3VsdCBpbiBjaGFuZ2VzIGluIHBhcnNvbnMgZGlyZWN0aXZlIGFmZmVjdGluZyB0aGlzLCBzbyB3ZSBjcmVhdGVkIGEgY29weVxuLy8gaW5zdGVhZC5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmxvY2tCYXNlZEdyYWRlciB7XG4gICAgY29uc3RydWN0b3IocHJvYmxlbSkge1xuICAgICAgICB0aGlzLnByb2JsZW0gPSBwcm9ibGVtO1xuICAgICAgICB0aGlzLnBlcmNlbnQgPSAwO1xuICAgIH1cbiAgICAvLyBVc2UgYSBMSVMgKExvbmdlc3QgSW5jcmVhc2luZyBTdWJzZXF1ZW5jZSkgYWxnb3JpdGhtIHRvIHJldHVybiB0aGUgaW5kZXhlc1xuICAgIC8vIHRoYXQgYXJlIG5vdCBwYXJ0IG9mIHRoYXQgc3Vic2VxdWVuY2UuXG4gICAgaW52ZXJzZUxJU0luZGljZXMoYXJyKSB7XG4gICAgICAgIC8vIEdldCBhbGwgc3Vic2VxdWVuY2VzXG4gICAgICAgIHZhciBhbGxTdWJzZXF1ZW5jZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHZhciBzdWJzZXF1ZW5jZUZvckN1cnJlbnQgPSBbYXJyW2ldXSxcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gYXJyW2ldLFxuICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50QWRkZWQgPSAtMTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSBpOyBqIDwgYXJyLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN1YnNlcXVlbnQgPSBhcnJbal07XG4gICAgICAgICAgICAgICAgaWYgKHN1YnNlcXVlbnQgPiBjdXJyZW50ICYmIGxhc3RFbGVtZW50QWRkZWQgPCBzdWJzZXF1ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHN1YnNlcXVlbmNlRm9yQ3VycmVudC5wdXNoKHN1YnNlcXVlbnQpO1xuICAgICAgICAgICAgICAgICAgICBsYXN0RWxlbWVudEFkZGVkID0gc3Vic2VxdWVudDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbGxTdWJzZXF1ZW5jZXMucHVzaChzdWJzZXF1ZW5jZUZvckN1cnJlbnQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIGxvbmdlc3Qgb25lXG4gICAgICAgIHZhciBsb25nZXN0U3Vic2VxdWVuY2VMZW5ndGggPSAtMTtcbiAgICAgICAgdmFyIGxvbmdlc3RTdWJzZXF1ZW5jZTtcbiAgICAgICAgZm9yIChsZXQgaSBpbiBhbGxTdWJzZXF1ZW5jZXMpIHtcbiAgICAgICAgICAgIHZhciBzdWJzID0gYWxsU3Vic2VxdWVuY2VzW2ldO1xuICAgICAgICAgICAgaWYgKHN1YnMubGVuZ3RoID4gbG9uZ2VzdFN1YnNlcXVlbmNlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbG9uZ2VzdFN1YnNlcXVlbmNlTGVuZ3RoID0gc3Vicy5sZW5ndGg7XG4gICAgICAgICAgICAgICAgbG9uZ2VzdFN1YnNlcXVlbmNlID0gc3VicztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBDcmVhdGUgdGhlIGludmVyc2UgaW5kZXhlc1xuICAgICAgICB2YXIgaW5kZXhlcyA9IFtdO1xuICAgICAgICB2YXIgbEluZGV4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChsSW5kZXggPiBsb25nZXN0U3Vic2VxdWVuY2UubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoYXJyW2ldID09IGxvbmdlc3RTdWJzZXF1ZW5jZVtsSW5kZXhdKSB7XG4gICAgICAgICAgICAgICAgICAgIGxJbmRleCArPSAxO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4ZXMucHVzaChpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGluZGV4ZXM7XG4gICAgfVxuICAgIC8vIGdyYWRlIHRoYXQgZWxlbWVudCwgcmV0dXJuaW5nIHRoZSBzdGF0ZVxuICAgIGdyYWRlKCkge1xuICAgICAgICB0aGlzLmNvcnJlY3RMaW5lcyA9IDA7XG4gICAgICAgIHRoaXMucGVyY2VudExpbmVzID0gMDtcbiAgICAgICAgdmFyIHNvbHV0aW9uTGluZXMgPSB0aGlzLnNvbHV0aW9uO1xuICAgICAgICB2YXIgYW5zd2VyTGluZXMgPSB0aGlzLmFuc3dlcjtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHZhciBzdGF0ZTtcbiAgICAgICAgdGhpcy5wZXJjZW50TGluZXMgPVxuICAgICAgICAgICAgTWF0aC5taW4oYW5zd2VyTGluZXMubGVuZ3RoLCBzb2x1dGlvbkxpbmVzLmxlbmd0aCkgL1xuICAgICAgICAgICAgTWF0aC5tYXgoYW5zd2VyTGluZXMubGVuZ3RoLCBzb2x1dGlvbkxpbmVzLmxlbmd0aCk7XG4gICAgICAgIGlmIChhbnN3ZXJMaW5lcy5sZW5ndGggPCBzb2x1dGlvbkxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgc3RhdGUgPSBcImluY29ycmVjdFRvb1Nob3J0XCI7XG4gICAgICAgICAgICB0aGlzLmNvcnJlY3RMZW5ndGggPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIGlmIChhbnN3ZXJMaW5lcy5sZW5ndGggPT0gc29sdXRpb25MaW5lcy5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuY29ycmVjdExlbmd0aCA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNvcnJlY3RMZW5ndGggPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIERldGVybWluZSB3aGV0aGVyIHRoZSBjb2RlICoqdGhhdCBpcyB0aGVyZSoqIGlzIGluIHRoZSBjb3JyZWN0IG9yZGVyXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBtdWNoIG9yIHRvbyBsaXR0bGUgY29kZSB0aGlzIG9ubHkgbWF0dGVycyBmb3JcbiAgICAgICAgLy8gY2FsY3VsYXRpbmcgYSBwZXJjZW50YWdlIHNjb3JlLlxuICAgICAgICBsZXQgaXNDb3JyZWN0T3JkZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvcnJlY3RMaW5lcyA9IDA7XG4gICAgICAgIHRoaXMuc29sdXRpb25MZW5ndGggPSBzb2x1dGlvbkxpbmVzLmxlbmd0aDtcbiAgICAgICAgbGV0IGxvb3BMaW1pdCA9IE1hdGgubWluKHNvbHV0aW9uTGluZXMubGVuZ3RoLCBhbnN3ZXJMaW5lcy5sZW5ndGgpO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbG9vcExpbWl0OyBpKyspIHtcbiAgICAgICAgICAgIGlmIChhbnN3ZXJMaW5lc1tpXSAhPT0gc29sdXRpb25MaW5lc1tpXSkge1xuICAgICAgICAgICAgICAgIGlzQ29ycmVjdE9yZGVyID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdExpbmVzICs9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoXG4gICAgICAgICAgICBpc0NvcnJlY3RPcmRlciAmJlxuICAgICAgICAgICAgdGhpcy5jb3JyZWN0TGVuZ3RoXG4gICAgICAgICkge1xuICAgICAgICAgICAgLy8gUGVyZmVjdFxuICAgICAgICAgICAgc3RhdGUgPSBcImNvcnJlY3RcIjtcbiAgICAgICAgfSBlbHNlIGlmICghaXNDb3JyZWN0T3JkZXIgJiYgc3RhdGUgIT0gXCJpbmNvcnJlY3RUb29TaG9ydFwiKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IFwiaW5jb3JyZWN0TW92ZUJsb2Nrc1wiO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmNvcnJlY3RMZW5ndGggJiYgc3RhdGUgIT0gXCJpbmNvcnJlY3RUb29TaG9ydFwiKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IFwiaW5jb3JyZWN0TW92ZUJsb2Nrc1wiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FsY3VsYXRlUGVyY2VudCgpO1xuICAgICAgICB0aGlzLmdyYWRlclN0YXRlID0gc3RhdGU7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICB9XG5cbiAgICBjYWxjdWxhdGVQZXJjZW50KCkge1xuICAgICAgICBsZXQgbnVtTGluZXMgPSB0aGlzLnBlcmNlbnRMaW5lcyAqIDAuMjtcbiAgICAgICAgbGV0IGxpbmVzID0gdGhpcy5hbnN3ZXIubGVuZ3RoO1xuICAgICAgICBsZXQgbnVtQ29ycmVjdEJsb2NrcyA9ICh0aGlzLmNvcnJlY3RMaW5lcyAvIGxpbmVzKSAqIDAuODtcblxuICAgICAgICB0aGlzLnBlcmNlbnQgPSBudW1MaW5lcyArIG51bUNvcnJlY3RCbG9ja3M7XG4gICAgfVxufVxuIiwiaW1wb3J0IFJ1bmVzdG9uZUJhc2UgZnJvbSBcIi4uLy4uL2NvbW1vbi9qcy9ydW5lc3RvbmViYXNlLmpzXCI7XG5pbXBvcnQgXCIuLi9jc3MvaHBhcnNvbnMuY3NzXCI7XG5pbXBvcnQgXCIuLi9jc3MvaGxqcy14Y29kZS5jc3NcIjtcbmltcG9ydCBCbG9ja0ZlZWRiYWNrIGZyb20gXCIuL0Jsb2NrRmVlZGJhY2suanNcIjtcbmltcG9ydCBTUUxGZWVkYmFjayBmcm9tIFwiLi9TUUxGZWVkYmFjay5qc1wiO1xuaW1wb3J0IHtJbml0TWljcm9QYXJzb25zfSBmcm9tICdtaWNyby1wYXJzb25zL21pY3JvLXBhcnNvbnMvbWljcm8tcGFyc29ucy5qcyc7XG5pbXBvcnQgJ21pY3JvLXBhcnNvbnMvbWljcm8tcGFyc29ucy9taWNyby1wYXJzb25zLmNzcyc7XG5cbmV4cG9ydCB2YXIgaHBMaXN0O1xuLy8gRGljdGlvbmFyeSB0aGF0IGNvbnRhaW5zIGFsbCBpbnN0YW5jZXMgb2YgaG9yaXpvbnRhbCBQYXJzb25zIHByb2JsZW0gb2JqZWN0c1xuaWYgKGhwTGlzdCA9PT0gdW5kZWZpbmVkKSBocExpc3QgPSB7fTtcblxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIUGFyc29ucyBleHRlbmRzIFJ1bmVzdG9uZUJhc2Uge1xuICAgIGNvbnN0cnVjdG9yKG9wdHMpIHtcbiAgICAgICAgc3VwZXIob3B0cyk7XG4gICAgICAgIC8vIGdldHRpbmcgc2V0dGluZ3NcbiAgICAgICAgdmFyIG9yaWcgPSAkKG9wdHMub3JpZykuZmluZChcInRleHRhcmVhXCIpWzBdO1xuICAgICAgICB0aGlzLnJldXNlID0gJChvcmlnKS5kYXRhKFwicmV1c2VcIikgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMucmFuZG9taXplID0gJChvcmlnKS5kYXRhKFwicmFuZG9taXplXCIpID8gdHJ1ZSA6IGZhbHNlO1xuICAgICAgICB0aGlzLmlzQmxvY2tHcmFkaW5nID0gJChvcmlnKS5kYXRhKFwiYmxvY2thbnN3ZXJcIikgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMubGFuZ3VhZ2UgPSAkKG9yaWcpLmRhdGEoXCJsYW5ndWFnZVwiKTtcbiAgICAgICAgaWYgKHRoaXMuaXNCbG9ja0dyYWRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuYmxvY2tBbnN3ZXIgPSAkKG9yaWcpLmRhdGEoXCJibG9ja2Fuc3dlclwiKS5zcGxpdChcIiBcIik7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXZpZCA9IG9wdHMub3JpZy5pZDtcbiAgICAgICAgdGhpcy5jb250YWluZXJEaXYgPSBvcHRzLm9yaWc7XG4gICAgICAgIHRoaXMudXNlUnVuZXN0b25lU2VydmljZXMgPSBvcHRzLnVzZVJ1bmVzdG9uZVNlcnZpY2VzO1xuICAgICAgICB0aGlzLm9yaWdFbGVtID0gb3JpZztcbiAgICAgICAgdGhpcy5vcmlnVGV4dCA9IHRoaXMub3JpZ0VsZW0udGV4dENvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29kZSA9ICQob3JpZykudGV4dCgpIHx8IFwiXFxuXFxuXFxuXFxuXFxuXCI7XG4gICAgICAgIHRoaXMuZGJ1cmwgPSAkKG9yaWcpLmRhdGEoXCJkYnVybFwiKTtcbiAgICAgICAgdGhpcy5ydW5CdXR0b24gPSBudWxsO1xuICAgICAgICB0aGlzLnNhdmVCdXR0b24gPSBudWxsO1xuICAgICAgICB0aGlzLmxvYWRCdXR0b24gPSBudWxsO1xuICAgICAgICB0aGlzLm91dGVyRGl2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb250cm9sRGl2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5wcm9jZXNzQ29udGVudCh0aGlzLmNvZGUpXG5cbiAgICAgICAgLy8gQ2hhbmdlIHRvIGZhY3Rvcnkgd2hlbiBtb3JlIGV4ZWN1dGlvbiBiYXNlZCBmZWVkYmFjayBpcyBpbmNsdWRlZFxuICAgICAgICBpZiAodGhpcy5pc0Jsb2NrR3JhZGluZykge1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja0NvbnRyb2xsZXIgPSBuZXcgQmxvY2tGZWVkYmFjayh0aGlzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tDb250cm9sbGVyID0gbmV3IFNRTEZlZWRiYWNrKHRoaXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY3JlYXRpbmcgVUkgY29tcG9uZW50c1xuICAgICAgICB0aGlzLmNyZWF0ZUVkaXRvcigpO1xuICAgICAgICB0aGlzLmNyZWF0ZU91dHB1dCgpO1xuICAgICAgICB0aGlzLmNyZWF0ZUNvbnRyb2xzKCk7XG4gICAgICAgIHRoaXMuZmVlZGJhY2tDb250cm9sbGVyLmN1c3RvbWl6ZVVJKCk7XG5cbiAgICAgICAgaWYgKCQob3JpZykuZGF0YShcImNhcHRpb25cIikpIHtcbiAgICAgICAgICAgIHRoaXMuY2FwdGlvbiA9ICQob3JpZykuZGF0YShcImNhcHRpb25cIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNhcHRpb24gPSBcIk1pY3JvUGFyc29uc1wiO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYWRkQ2FwdGlvbihcInJ1bmVzdG9uZVwiKTtcbiAgICAgICAgdGhpcy5pbmRpY2F0ZV9jb21wb25lbnRfcmVhZHkoKTtcblxuICAgICAgICAvLyBpbml0aWFsaXppbmcgZnVuY3Rpb25hbGl0aWVzIGZvciBkaWZmZXJlbnQgZmVlZGJhY2tcbiAgICAgICAgdGhpcy5mZWVkYmFja0NvbnRyb2xsZXIuaW5pdCgpO1xuICAgIH1cblxuICAgIHByb2Nlc3NDb250ZW50KGNvZGUpIHtcbiAgICAgICAgLy8gdG9kbzogYWRkIGVycm9ycyB3aGVuIGJsb2NrcyBhcmUgbm9uZXhpc3RlbnQgKG1heWJlIGluIHB5dGhvbik/XG4gICAgICAgIHRoaXMuaGlkZGVuUHJlZml4ID0gdGhpcy5wcm9jZXNzU2luZ2xlQ29udGVudChjb2RlLCAnLS1oaWRkZW5wcmVmaXgtLScpO1xuICAgICAgICB0aGlzLm9yaWdpbmFsQmxvY2tzID0gdGhpcy5wcm9jZXNzU2luZ2xlQ29udGVudChjb2RlLCAnLS1ibG9ja3MtLScpLnNwbGl0KCdcXG4nKS5zbGljZSgxLC0xKTtcbiAgICAgICAgdGhpcy5oaWRkZW5TdWZmaXggPSB0aGlzLnByb2Nlc3NTaW5nbGVDb250ZW50KGNvZGUsICctLWhpZGRlbnN1ZmZpeC0tJyk7XG4gICAgICAgIHRoaXMudW5pdHRlc3QgPSB0aGlzLnByb2Nlc3NTaW5nbGVDb250ZW50KGNvZGUsICctLXVuaXR0ZXN0LS0nKTtcbiAgICB9XG5cbiAgICBwcm9jZXNzU2luZ2xlQ29udGVudChjb2RlLCBkZWxpbWl0aWVyKSB7XG4gICAgICAgIGxldCBpbmRleCA9IGNvZGUuaW5kZXhPZihkZWxpbWl0aWVyKTtcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgICAgICAgIGxldCBjb250ZW50ID0gY29kZS5zdWJzdHJpbmcoaW5kZXggKyBkZWxpbWl0aWVyLmxlbmd0aCk7XG4gICAgICAgICAgICBsZXQgZW5kSW5kZXggPSBjb250ZW50LmluZGV4T2YoXCJcXG4tLVwiKTtcbiAgICAgICAgICAgIGNvbnRlbnQgPVxuICAgICAgICAgICAgICAgIGVuZEluZGV4ID4gLTFcbiAgICAgICAgICAgICAgICAgICAgPyBjb250ZW50LnN1YnN0cmluZygwLCBlbmRJbmRleCArIDEpXG4gICAgICAgICAgICAgICAgICAgIDogY29udGVudDtcbiAgICAgICAgICAgIHJldHVybiBjb250ZW50O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLy8gY29waWVkIGZyb20gYWN0aXZlY29kZSwgYWxyZWFkeSBtb2RpZmllZCB0byBhZGQgcGFyc29uc1xuICAgIGNyZWF0ZUVkaXRvcigpIHtcbiAgICAgICAgdGhpcy5vdXRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICQodGhpcy5vcmlnRWxlbSkucmVwbGFjZVdpdGgodGhpcy5vdXRlckRpdik7XG4gICAgICAgIHRoaXMub3V0ZXJEaXYuaWQgPSBgJHt0aGlzLmRpdmlkfS1jb250YWluZXJgO1xuICAgICAgICB0aGlzLm91dGVyRGl2LmFkZEV2ZW50TGlzdGVuZXIoXCJtaWNyby1wYXJzb25zXCIsIChldikgPT4ge1xuICAgICAgICAgICAgdGhpcy5sb2dIb3Jpem9udGFsUGFyc29uc0V2ZW50KGV2LmRldGFpbCk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrQ29udHJvbGxlci5jbGVhckZlZWRiYWNrKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zdCBwcm9wcyA9IHtcbiAgICAgICAgICAgIHNlbGVjdG9yOiBgIyR7dGhpcy5kaXZpZH0tY29udGFpbmVyYCxcbiAgICAgICAgICAgIGlkOiBgJHt0aGlzLmRpdmlkfS1ocGFyc29uc2AsXG4gICAgICAgICAgICByZXVzZTogdGhpcy5yZXVzZSxcbiAgICAgICAgICAgIHJhbmRvbWl6ZTogdGhpcy5yYW5kb21pemUsXG4gICAgICAgICAgICBwYXJzb25zQmxvY2tzOiBbLi4udGhpcy5vcmlnaW5hbEJsb2Nrc10sXG4gICAgICAgICAgICBsYW5ndWFnZTogdGhpcy5sYW5ndWFnZVxuICAgICAgICB9XG4gICAgICAgIEluaXRNaWNyb1BhcnNvbnMocHJvcHMpO1xuICAgICAgICB0aGlzLmhwYXJzb25zSW5wdXQgPSAkKHRoaXMub3V0ZXJEaXYpLmZpbmQoXCJtaWNyby1wYXJzb25zXCIpWzBdO1xuICAgIH1cblxuICAgIGNyZWF0ZU91dHB1dCgpIHtcbiAgICAgICAgdGhpcy5mZWVkYmFja0NvbnRyb2xsZXIuY3JlYXRlT3V0cHV0KCk7XG4gICAgfVxuXG4gICAgLy8gY29waWVkIGZyb20gYWN0aXZlY29kZVxuICAgIGNyZWF0ZUNvbnRyb2xzKCkge1xuICAgICAgICB2YXIgY3RybERpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICQoY3RybERpdikuYWRkQ2xhc3MoXCJocF9hY3Rpb25zXCIpO1xuICAgICAgICAkKGN0cmxEaXYpLmFkZENsYXNzKFwiY29sLW1kLTEyXCIpO1xuXG4gICAgICAgIC8vIFJ1biBCdXR0b25cbiAgICAgICAgdGhpcy5ydW5CdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAkKHRoaXMucnVuQnV0dG9uKS5hZGRDbGFzcyhcImJ0biBidG4tc3VjY2VzcyBydW4tYnV0dG9uXCIpO1xuICAgICAgICBjdHJsRGl2LmFwcGVuZENoaWxkKHRoaXMucnVuQnV0dG9uKTtcbiAgICAgICAgJCh0aGlzLnJ1bkJ1dHRvbikuYXR0cihcInR5cGVcIiwgXCJidXR0b25cIik7XG4gICAgICAgICQodGhpcy5ydW5CdXR0b24pLnRleHQoXCJSdW5cIik7XG4gICAgICAgIHRoaXMucnVuQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrQ29udHJvbGxlci5ydW5CdXR0b25IYW5kbGVyKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUmVzZXQgYnV0dG9uXG4gICAgICAgIHZhciByZXNldEJ0bjtcbiAgICAgICAgcmVzZXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICAgICAgICAkKHJlc2V0QnRuKS50ZXh0KFwiUmVzZXRcIik7XG4gICAgICAgICQocmVzZXRCdG4pLmFkZENsYXNzKFwiYnRuIGJ0bi13YXJuaW5nIHJ1bi1idXR0b25cIik7XG4gICAgICAgIGN0cmxEaXYuYXBwZW5kQ2hpbGQocmVzZXRCdG4pO1xuICAgICAgICB0aGlzLnJlc2V0QnV0dG9uID0gcmVzZXRCdG47XG4gICAgICAgIHRoaXMucmVzZXRCdXR0b24ub25jbGljayA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaHBhcnNvbnNJbnB1dC5yZXNldElucHV0KCk7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrQ29udHJvbGxlci5yZXNldCgpO1xuICAgICAgICB9O1xuICAgICAgICAkKHJlc2V0QnRuKS5hdHRyKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcblxuICAgICAgICAkKHRoaXMub3V0ZXJEaXYpLnByZXBlbmQoY3RybERpdik7XG4gICAgICAgIHRoaXMuY29udHJvbERpdiA9IGN0cmxEaXY7XG4gICAgfVxuXG4gICAgbG9nSG9yaXpvbnRhbFBhcnNvbnNFdmVudChocGFyc29uc0V2ZW50KSB7XG4gICAgICAgIGxldCBldiA9IHtcbiAgICAgICAgICAgIGV2ZW50OiBcImhwYXJzb25zXCIsXG4gICAgICAgICAgICBkaXZfaWQ6IHRoaXMuZGl2aWQsXG4gICAgICAgICAgICBhY3Q6IEpTT04uc3RyaW5naWZ5KGhwYXJzb25zRXZlbnQpLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmxvZ0Jvb2tFdmVudChldik7XG4gICAgfVxufVxuXG5cbi8qPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG49PSBGaW5kIHRoZSBjdXN0b20gSFRNTCB0YWdzIGFuZCA9PVxuPT0gICBleGVjdXRlIG91ciBjb2RlIG9uIHRoZW0gICAgPT1cbj09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSovXG4kKGRvY3VtZW50KS5vbihcInJ1bmVzdG9uZTpsb2dpbi1jb21wbGV0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgJChcIltkYXRhLWNvbXBvbmVudD1ocGFyc29uc11cIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmNsb3Nlc3QoXCJbZGF0YS1jb21wb25lbnQ9dGltZWRBc3Nlc3NtZW50XVwiKS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgLy8gSWYgdGhpcyBlbGVtZW50IGV4aXN0cyB3aXRoaW4gYSB0aW1lZCBjb21wb25lbnQsIGRvbid0IHJlbmRlciBpdCBoZXJlXG4gICAgICAgICAgICAvLyB0cnkge1xuICAgICAgICAgICAgaHBMaXN0W3RoaXMuaWRdID0gbmV3IEhQYXJzb25zKHtcbiAgICAgICAgICAgICAgICBvcmlnOiB0aGlzLFxuICAgICAgICAgICAgICAgIHVzZVJ1bmVzdG9uZVNlcnZpY2VzOiBlQm9va0NvbmZpZy51c2VSdW5lc3RvbmVTZXJ2aWNlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLy8gfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coYEVycm9yIHJlbmRlcmluZyBTaG9ydEFuc3dlciBQcm9ibGVtICR7dGhpcy5pZH1cbiAgICAgICAgICAgIC8vICAgICBEZXRhaWxzOiAke2Vycn1gKTtcbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgfVxuICAgIH0pO1xufSk7XG5cbmlmICh0eXBlb2Ygd2luZG93LmNvbXBvbmVudF9mYWN0b3J5ID09PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luZG93LmNvbXBvbmVudF9mYWN0b3J5ID0ge307XG59XG53aW5kb3cuY29tcG9uZW50X2ZhY3RvcnlbXCJocGFyc29uc1wiXSA9IGZ1bmN0aW9uIChvcHRzKSB7XG4gICAgcmV0dXJuIG5ldyBIUGFyc29ucyhvcHRzKTtcbn07XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBIUGFyc29uc0ZlZWRiYWNrIHtcbiAgICBjb25zdHJ1Y3RvcihocGFyc29ucykge1xuICAgICAgICB0aGlzLmhwYXJzb25zID0gaHBhcnNvbnM7XG4gICAgICAgIHRoaXMucGVyY2VudCA9IDA7XG4gICAgfVxuICAgIGNyZWF0ZU91dHB1dCgpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZU91dHB1dCBtZXRob2Qgbm90IGltcGxlbWVudGVkIGluIGZlZWRiYWNrIScpO1xuICAgIH1cbiAgICBhc3luYyBydW5CdXR0b25IYW5kbGVyKCkge1xuICAgICAgICBjb25zb2xlLmxvZygncnVuQnV0dG9uQ2xpY2tlZCBtZXRob2Qgbm90IGltcGxlbWVudGVkIGluIGZlZWRiYWNrIScpO1xuICAgIH1cbiAgICBjdXN0b21pemVVSSgpIHtcbiAgICAgICAgLy8gdXNlZCB0byBjaGFuZ2Ugc29tZSBtaW5vciBVSSwgZS5nLiB0aGUgdGV4dCBvbiBSdW4gYnV0dG9uXG4gICAgfVxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIGluaXRsaXphdGlvbnMgZnVuY3Rpb25hbGl0aWVzIHN1Y2ggYXMgcHJlcGFyaW5nIFNRTCxcbiAgICAgICAgLy8gb3IgY2hlY2tpbmcgcmVsYXRlZCBvcHRpb25zXG4gICAgfVxuXG4gICAgY2xlYXJGZWVkYmFjaygpIHtcbiAgICAgICAgLy8gY2FsbGVkIHdoZW4gaW5wdXQgaXMgY2hhbmdlZFxuICAgICAgICBjb25zb2xlLmxvZygnY2xlYXJGZWVkYmFjayBtZXRob2Qgbm90IGltcGxlbWVudGVkIGluIGZlZWRiYWNrIScpO1xuICAgIH1cbiAgICBcbiAgICByZXNldCgpIHtcbiAgICAgICAgLy8gY2FsbGVkIHdoZW4gcmVzZXQgaXMgY2xpY2tlZFxuICAgICAgICBjb25zb2xlLmxvZygncmVzZXQgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZCBpbiBmZWVkYmFjayEnKTtcbiAgICB9XG59XG4iLCIkLmkxOG4oKS5sb2FkKHtcbiAgICBlbjoge1xuICAgICAgICBtc2dfcGFyc29uX2NoZWNrX21lOiBcIkNoZWNrXCIsXG4gICAgICAgIG1zZ19wYXJzb25fcmVzZXQ6IFwiUmVzZXRcIixcbiAgICAgICAgbXNnX3BhcnNvbl9oZWxwOiBcIkhlbHAgbWVcIixcbiAgICAgICAgbXNnX3BhcnNvbl90b29fc2hvcnQ6IFwiWW91ciBhbnN3ZXIgaXMgdG9vIHNob3J0LiBBZGQgbW9yZSBibG9ja3MuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fZHJhZ19mcm9tX2hlcmU6IFwiRHJhZyBmcm9tIGhlcmVcIixcbiAgICAgICAgbXNnX3BhcnNvbl9kcmFnX3RvX2hlcmU6IFwiRHJvcCBibG9ja3MgaGVyZVwiLFxuICAgICAgICBtc2dfcGFyc29uX2NvcnJlY3RfZmlyc3RfdHJ5OlxuICAgICAgICAgICAgXCJQZXJmZWN0ISAgSXQgdG9vayB5b3Ugb25seSBvbmUgdHJ5IHRvIHNvbHZlIHRoaXMuICBHcmVhdCBqb2IhXCIsXG4gICAgICAgIG1zZ19wYXJzb25fY29ycmVjdDpcbiAgICAgICAgICAgIFwiUGVyZmVjdCEgIEl0IHRvb2sgeW91ICQxIHRyaWVzIHRvIHNvbHZlIHRoaXMuICBDbGljayBSZXNldCB0byB0cnkgdG8gc29sdmUgaXQgaW4gb25lIGF0dGVtcHQuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd3JvbmdfaW5kZW50OlxuICAgICAgICAgICAgXCJUaGlzIGJsb2NrIGlzIG5vdCBpbmRlbnRlZCBjb3JyZWN0bHkuIEVpdGhlciBpbmRlbnQgaXQgbW9yZSBieSBkcmFnZ2luZyBpdCByaWdodCBvciByZWR1Y2UgdGhlIGluZGVudGlvbiBieSBkcmFnZ2luZyBpdCBsZWZ0LlwiLFxuICAgICAgICBtc2dfcGFyc29uX3dyb25nX2luZGVudHM6XG4gICAgICAgICAgICBcIlRoZXNlIGJsb2NrcyBhcmUgbm90IGluZGVudGVkIGNvcnJlY3RseS4gVG8gaW5kZW50IGEgYmxvY2sgbW9yZSwgZHJhZyBpdCB0byB0aGUgcmlnaHQuIFRvIHJlZHVjZSB0aGUgaW5kZW50aW9uLCBkcmFnIGl0IHRvIHRoZSBsZWZ0LlwiLFxuICAgICAgICBtc2dfcGFyc29uX3dyb25nX29yZGVyOlxuICAgICAgICAgICAgXCJIaWdobGlnaHRlZCBibG9ja3MgaW4geW91ciBhbnN3ZXIgYXJlIHdyb25nIG9yIGFyZSBpbiB0aGUgd3Jvbmcgb3JkZXIuIFRoaXMgY2FuIGJlIGZpeGVkIGJ5IG1vdmluZywgcmVtb3ZpbmcsIG9yIHJlcGxhY2luZyBoaWdobGlnaHRlZCBibG9ja3MuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fYXJyb3dfbmF2aWdhdGU6XG4gICAgICAgICAgICBcIkFycm93IGtleXMgdG8gbmF2aWdhdGUuIFNwYWNlIHRvIHNlbGVjdCAvIGRlc2VsZWN0IGJsb2NrIHRvIG1vdmUuXCIsXG4gICAgICAgIG1zZ19wYXJzb25faGVscF9pbmZvOlxuICAgICAgICAgICAgXCJDbGljayBvbiB0aGUgSGVscCBNZSBidXR0b24gaWYgeW91IHdhbnQgdG8gbWFrZSB0aGUgcHJvYmxlbSBlYXNpZXJcIixcbiAgICAgICAgbXNnX3BhcnNvbl9ub3Rfc29sdXRpb246XG4gICAgICAgICAgICBcIkRpc2FibGVkIGFuIHVubmVlZGVkIGNvZGUgYmxvY2sgKG9uZSB0aGF0IGlzIG5vdCBwYXJ0IG9mIHRoZSBzb2x1dGlvbikuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fcHJvdmlkZWRfaW5kZW50OiBcIlByb3ZpZGVkIHRoZSBpbmRlbnRhdGlvbi5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9jb21iaW5lZF9ibG9ja3M6IFwiQ29tYmluZWQgdHdvIGNvZGUgYmxvY2tzIGludG8gb25lLlwiLFxuICAgICAgICBtc2dfcGFyc29uX3JlbW92ZV9pbmNvcnJlY3Q6XG4gICAgICAgICAgICBcIldpbGwgcmVtb3ZlIGFuIGluY29ycmVjdCBjb2RlIGJsb2NrIGZyb20gYW5zd2VyIGFyZWFcIixcbiAgICAgICAgbXNnX3BhcnNvbl93aWxsX2NvbWJpbmU6IFwiV2lsbCBjb21iaW5lIHR3byBibG9ja3NcIixcbiAgICAgICAgbXNnX3BhcnNvbl9hdGxlYXN0X3RocmVlX2F0dGVtcHRzOlxuICAgICAgICAgICAgXCJZb3UgbXVzdCBtYWtlIGF0IGxlYXN0IHRocmVlIGRpc3RpbmN0IGZ1bGwgYXR0ZW1wdHMgYXQgYSBzb2x1dGlvbiBiZWZvcmUgeW91IGNhbiBnZXQgaGVscFwiLFxuICAgICAgICBtc2dfcGFyc29uX3RocmVlX2Jsb2Nrc19sZWZ0OlxuICAgICAgICAgICAgXCJUaGVyZSBhcmUgb25seSAzIGNvcnJlY3QgYmxvY2tzIGxlZnQuICBZb3Ugc2hvdWxkIGJlIGFibGUgdG8gcHV0IHRoZW0gaW4gb3JkZXJcIixcbiAgICAgICAgbXNnX3BhcnNvbl93aWxsX3Byb3ZpZGVfaW5kZW50OiBcIldpbGwgcHJvdmlkZSBpbmRlbnRhdGlvblwiLFxuICAgIH0sXG59KTtcbiIsIiQuaTE4bigpLmxvYWQoe1xuICAgIFwicHQtYnJcIjoge1xuICAgICAgICBtc2dfcGFyc29uX2NoZWNrX21lOiBcIlZlcmlmaWNhclwiLFxuICAgICAgICBtc2dfcGFyc29uX3Jlc2V0OiBcIlJlc2V0YXJcIixcbiAgICAgICAgbXNnX3BhcnNvbl9oZWxwOlwiQWp1ZGFcIixcbiAgICAgICAgbXNnX3BhcnNvbl90b29fc2hvcnQ6IFwiU2V1IHByb2dyYW1hIMOpIG11aXRvIGN1cnRvLiBBZGljaW9uZSBtYWlzIGJsb2Nvcy5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9kcmFnX2Zyb21faGVyZTogXCJBcnJhc3RlIGRhcXVpXCIsXG4gICAgICAgIG1zZ19wYXJzb25fZHJhZ190b19oZXJlOiBcIkxhcmd1ZSBvcyBibG9jb3MgYXF1aVwiLFxuICAgICAgICBtc2dfcGFyc29uX2NvcnJlY3RfZmlyc3RfdHJ5OlxuICAgICAgICAgICAgXCJQZXJmZWl0byEgVm9jw6ogbGV2b3UgYXBlbmFzIHVtYSB0ZW50YXRpdmEgcGFyYSByZXNvbHZlci4gQm9tIHRyYWJhbGhvIVwiLFxuICAgICAgICBtc2dfcGFyc29uX2NvcnJlY3Q6XG4gICAgICAgICAgICBcIlBlcmZlaXRvISBWb2PDqiBsZXZvdSAkMSB0ZW50YXRpdmFzIHBhcmEgcmVzb2x2ZXIuIENsaXF1ZSBlbSBSZXNldGFyIHBhcmEgdGVudGFyIHJlc29sdmVyIGVtIHVtYSB0ZW50YXRpdmEuXCIgLFxuICAgICAgICBtc2dfcGFyc29uX3dyb25nX2luZGVudDpcbiAgICAgICAgICAgIFwiRXN0ZSBibG9jbyBuw6NvIGVzdMOhIGluZGVudGFkbyBjb3JyZXRhbWVudGUuIEluZGVudGUgbWFpcyBhcnJhc3RhbmRvLW8gcGFyYSBhIGRpcmVpdGEgb3UgcmVkdXphIGEgaW5kZW50YcOnw6NvIGFycmFzdGFuZG8gcGFyYSBhIGVzcXVlcmRhLlwiLFxuICAgICAgICBtc2dfcGFyc29uX3dyb25nX2luZGVudHM6XG4gICAgICAgICAgICBcIkVzdGVzIGJsb2NvcyBuw6NvIGVzdMOjbyBpbmRlbnRhZG9zIGNvcnJldGFtZW50ZS4gUGFyYSBpbmRlbnRhciBtYWlzLCBhcnJhc3RlIG8gYmxvY28gcGFyYSBhIGRpcmVpdGEuIFBhcmEgcmVkdXppciBhIGluZGVudGHDp8OjbywgYXJyYXN0ZSBwYXJhIGEgZXNxdWVyZGEuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd3Jvbmdfb3JkZXI6XG4gICAgICAgICAgICBcIkJsb2NvcyBkZXN0YWNhZG9zIG5vIHNldSBwcm9ncmFtYSBlc3TDo28gZXJyYWRvcyBvdSBlc3TDo28gbmEgb3JkZW0gZXJyYWRhLiBJc3NvIHBvZGUgc2VyIHJlc29sdmlkbyBtb3ZlbmRvLCBleGNsdWluZG8gb3Ugc3Vic3RpdHVpbmRvIG9zIGJsb2NvcyBkZXN0YWNhZG9zLlwiLFxuICAgICAgICBtc2dfcGFyc29uX2Fycm93X25hdmlnYXRlOlxuICAgICAgICAgICAgXCJVc2UgYXMgdGVjbGFzIGRlIHNldGFzIHBhcmEgbmF2ZWdhci4gRXNwYcOnbyBwYXJhIHNlbGVjaW9uYXIvIGRlc21hcmNhciBibG9jb3MgcGFyYSBtb3Zlci5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9oZWxwX2luZm86XG4gICAgICAgICAgICBcIkNsaXF1ZSBubyBib3TDo28gQWp1ZGEgc2Ugdm9jw6ogcXVpc2VyIGZhY2lsaXRhciBvIHByb2JsZW1hXCIsXG4gICAgICAgIG1zZ19wYXJzb25fbm90X3NvbHV0aW9uOlxuICAgICAgICAgICAgXCJGb2kgZGVzYWJpbGl0YWRvIHVtIGJsb2NvIGRlIGPDs2RpZ28gZGVzbmVjZXNzw6FyaW8gKHF1ZSBuw6NvIGZheiBwYXJ0ZSBkYSBzb2x1w6fDo28pLlwiLFxuICAgICAgICBtc2dfcGFyc29uX3Byb3ZpZGVkX2luZGVudDpcIkZvaSBmb3JuZWNpZGEgYSBpbmRlbnRhw6fDo28uXCIsXG4gICAgICAgIG1zZ19wYXJzb25fY29tYmluZWRfYmxvY2tzOlwiRG9pcyBibG9jb3MgZGUgY8OzZGlnb3MgZm9yYW0gY29tYmluYWRvcyBlbSB1bS5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9yZW1vdmVfaW5jb3JyZWN0OlxuICAgICAgICAgICAgXCJTZXLDoSByZW1vdmlkbyB1bSBibG9jbyBkZSBjw7NkaWdvIGluY29ycmV0byBkYSDDoXJlYSBkZSByZXNwb3N0YVwiLFxuICAgICAgICBtc2dfcGFyc29uX3dpbGxfY29tYmluZTpcIlNlcsOjbyBjb21iaW5hZG9zIGRvaXMgYmxvY29zXCIsXG4gICAgICAgIG1zZ19wYXJzb25fYXRsZWFzdF90aHJlZV9hdHRlbXB0czpcbiAgICAgICAgICAgIFwiVm9jw6ogZGV2ZSB0ZW50YXIgcGVsbyBtZW5vcyB0csOqcyB2ZXplcyBhbnRlcyBkZSBwZWRpciBhanVkYVwiLFxuICAgICAgICBtc2dfcGFyc29uX3RocmVlX2Jsb2Nrc19sZWZ0OlxuICAgICAgICAgICAgXCJSZXN0YW0gYXBlbmFzIDMgYmxvY29zIGNvcnJldG9zLiBWb2PDqiBkZXZlIGNvbG9jw6EtbG9zIGVtIG9yZGVtXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd2lsbF9wcm92aWRlX2luZGVudDogXCJTZXLDoSBmb3JuZWNpZGEgYSBpbmRlbnRhw6fDo29cIlxuICAgIH0sXG59KTtcbiIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyIsIi8qIChpZ25vcmVkKSAqLyJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==