(self["webpackChunkWebComponents"] = self["webpackChunkWebComponents"] || []).push([["node_modules_moment_locale_sync_recursive_-runestone_hparsons_js_hparsons_js-node_modules_mic-5ea6d2"],{

/***/ 28528:
/*!***********************************************!*\
  !*** ./runestone/hparsons/css/hljs-xcode.css ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ 32571:
/*!*********************************************!*\
  !*** ./runestone/hparsons/css/hparsons.css ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ 46700:
/*!***************************************************!*\
  !*** ./node_modules/moment/locale/ sync ^\.\/.*$ ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

var map = {
	"./af": 42786,
	"./af.js": 42786,
	"./ar": 30867,
	"./ar-dz": 14130,
	"./ar-dz.js": 14130,
	"./ar-kw": 96135,
	"./ar-kw.js": 96135,
	"./ar-ly": 56440,
	"./ar-ly.js": 56440,
	"./ar-ma": 47702,
	"./ar-ma.js": 47702,
	"./ar-sa": 16040,
	"./ar-sa.js": 16040,
	"./ar-tn": 37100,
	"./ar-tn.js": 37100,
	"./ar.js": 30867,
	"./az": 31083,
	"./az.js": 31083,
	"./be": 9808,
	"./be.js": 9808,
	"./bg": 68338,
	"./bg.js": 68338,
	"./bm": 67438,
	"./bm.js": 67438,
	"./bn": 8905,
	"./bn.js": 8905,
	"./bo": 11560,
	"./bo.js": 11560,
	"./br": 1278,
	"./br.js": 1278,
	"./bs": 80622,
	"./bs.js": 80622,
	"./ca": 2468,
	"./ca.js": 2468,
	"./cs": 5822,
	"./cs.js": 5822,
	"./cv": 50877,
	"./cv.js": 50877,
	"./cy": 47373,
	"./cy.js": 47373,
	"./da": 24780,
	"./da.js": 24780,
	"./de": 59740,
	"./de-at": 60217,
	"./de-at.js": 60217,
	"./de-ch": 60894,
	"./de-ch.js": 60894,
	"./de.js": 59740,
	"./dv": 5300,
	"./dv.js": 5300,
	"./el": 50837,
	"./el.js": 50837,
	"./en-au": 78348,
	"./en-au.js": 78348,
	"./en-ca": 77925,
	"./en-ca.js": 77925,
	"./en-gb": 22243,
	"./en-gb.js": 22243,
	"./en-ie": 46436,
	"./en-ie.js": 46436,
	"./en-nz": 76319,
	"./en-nz.js": 76319,
	"./eo": 92915,
	"./eo.js": 92915,
	"./es": 55655,
	"./es-do": 55251,
	"./es-do.js": 55251,
	"./es-us": 71146,
	"./es-us.js": 71146,
	"./es.js": 55655,
	"./et": 5603,
	"./et.js": 5603,
	"./eu": 77763,
	"./eu.js": 77763,
	"./fa": 76959,
	"./fa.js": 76959,
	"./fi": 11897,
	"./fi.js": 11897,
	"./fo": 94694,
	"./fo.js": 94694,
	"./fr": 94470,
	"./fr-ca": 63049,
	"./fr-ca.js": 63049,
	"./fr-ch": 52330,
	"./fr-ch.js": 52330,
	"./fr.js": 94470,
	"./fy": 5044,
	"./fy.js": 5044,
	"./gd": 2101,
	"./gd.js": 2101,
	"./gl": 38794,
	"./gl.js": 38794,
	"./gom-latn": 23168,
	"./gom-latn.js": 23168,
	"./gu": 95349,
	"./gu.js": 95349,
	"./he": 24206,
	"./he.js": 24206,
	"./hi": 30094,
	"./hi.js": 30094,
	"./hr": 30316,
	"./hr.js": 30316,
	"./hu": 22138,
	"./hu.js": 22138,
	"./hy-am": 11423,
	"./hy-am.js": 11423,
	"./id": 29218,
	"./id.js": 29218,
	"./is": 90135,
	"./is.js": 90135,
	"./it": 90626,
	"./it.js": 90626,
	"./ja": 39183,
	"./ja.js": 39183,
	"./jv": 24286,
	"./jv.js": 24286,
	"./ka": 40415,
	"./ka.js": 40415,
	"./kk": 47772,
	"./kk.js": 47772,
	"./km": 18758,
	"./km.js": 18758,
	"./kn": 79282,
	"./kn.js": 79282,
	"./ko": 33730,
	"./ko.js": 33730,
	"./ky": 33291,
	"./ky.js": 33291,
	"./lb": 36841,
	"./lb.js": 36841,
	"./lo": 55466,
	"./lo.js": 55466,
	"./lt": 57010,
	"./lt.js": 57010,
	"./lv": 37595,
	"./lv.js": 37595,
	"./me": 39861,
	"./me.js": 39861,
	"./mi": 35493,
	"./mi.js": 35493,
	"./mk": 95966,
	"./mk.js": 95966,
	"./ml": 87341,
	"./ml.js": 87341,
	"./mr": 10370,
	"./mr.js": 10370,
	"./ms": 9847,
	"./ms-my": 41237,
	"./ms-my.js": 41237,
	"./ms.js": 9847,
	"./mt": 72126,
	"./mt.js": 72126,
	"./my": 56165,
	"./my.js": 56165,
	"./nb": 64924,
	"./nb.js": 64924,
	"./ne": 16744,
	"./ne.js": 16744,
	"./nl": 93901,
	"./nl-be": 59814,
	"./nl-be.js": 59814,
	"./nl.js": 93901,
	"./nn": 83877,
	"./nn.js": 83877,
	"./pa-in": 15858,
	"./pa-in.js": 15858,
	"./pl": 64495,
	"./pl.js": 64495,
	"./pt": 89520,
	"./pt-br": 57971,
	"./pt-br.js": 57971,
	"./pt.js": 89520,
	"./ro": 96459,
	"./ro.js": 96459,
	"./ru": 21793,
	"./ru.js": 21793,
	"./sd": 40950,
	"./sd.js": 40950,
	"./se": 10490,
	"./se.js": 10490,
	"./si": 90124,
	"./si.js": 90124,
	"./sk": 64249,
	"./sk.js": 64249,
	"./sl": 14985,
	"./sl.js": 14985,
	"./sq": 51104,
	"./sq.js": 51104,
	"./sr": 49131,
	"./sr-cyrl": 13709,
	"./sr-cyrl.js": 13709,
	"./sr.js": 49131,
	"./ss": 85893,
	"./ss.js": 85893,
	"./sv": 98760,
	"./sv.js": 98760,
	"./sw": 91172,
	"./sw.js": 91172,
	"./ta": 27333,
	"./ta.js": 27333,
	"./te": 23110,
	"./te.js": 23110,
	"./tet": 52095,
	"./tet.js": 52095,
	"./th": 9041,
	"./th.js": 9041,
	"./tl-ph": 75768,
	"./tl-ph.js": 75768,
	"./tlh": 89444,
	"./tlh.js": 89444,
	"./tr": 72397,
	"./tr.js": 72397,
	"./tzl": 28254,
	"./tzl.js": 28254,
	"./tzm": 51106,
	"./tzm-latn": 30699,
	"./tzm-latn.js": 30699,
	"./tzm.js": 51106,
	"./uk": 67691,
	"./uk.js": 67691,
	"./ur": 13795,
	"./ur.js": 13795,
	"./uz": 6791,
	"./uz-latn": 60588,
	"./uz-latn.js": 60588,
	"./uz.js": 6791,
	"./vi": 65666,
	"./vi.js": 65666,
	"./x-pseudo": 14378,
	"./x-pseudo.js": 14378,
	"./yo": 75805,
	"./yo.js": 75805,
	"./zh-cn": 83839,
	"./zh-cn.js": 83839,
	"./zh-hk": 55726,
	"./zh-hk.js": 55726,
	"./zh-tw": 74152,
	"./zh-tw.js": 74152
};


function webpackContext(req) {
	var id = webpackContextResolve(req);
	return __webpack_require__(id);
}
function webpackContextResolve(req) {
	if(!__webpack_require__.o(map, req)) {
		var e = new Error("Cannot find module '" + req + "'");
		e.code = 'MODULE_NOT_FOUND';
		throw e;
	}
	return map[req];
}
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 46700;

/***/ }),

/***/ 87036:
/*!************************************************!*\
  !*** ./runestone/hparsons/js/BlockFeedback.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BlockFeedback)
/* harmony export */ });
/* harmony import */ var _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hparsonsFeedback */ 33965);
/* harmony import */ var _blockGrader_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blockGrader.js */ 92753);
/* harmony import */ var _parsons_js_parsons_i18n_en_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../parsons/js/parsons-i18n.en.js */ 59164);
/* harmony import */ var _parsons_js_parsons_i18n_en_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_parsons_js_parsons_i18n_en_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _parsons_js_parsons_i18n_pt_br_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../parsons/js/parsons-i18n.pt-br.js */ 16432);
/* harmony import */ var _parsons_js_parsons_i18n_pt_br_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_parsons_js_parsons_i18n_pt_br_js__WEBPACK_IMPORTED_MODULE_3__);





class BlockFeedback extends _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__["default"] {
    createOutput() {
        // Block based grading output
        this.messageDiv = document.createElement("div");
        this.hparsons.outerDiv.appendChild(this.messageDiv);
    }
    customizeUI() {
        $(this.hparsons.runButton).text('Check Me');
    }

    init() {
        this.checkCount = 0;
        this.solved = false;
        // TODO: not sure what is the best way to do this
        this.grader = new _blockGrader_js__WEBPACK_IMPORTED_MODULE_1__["default"]();
        let solutionBlocks = [];
        for (let i = 0; i < this.hparsons.blockAnswer.length; ++i) {
            solutionBlocks.push(this.hparsons.originalBlocks[this.hparsons.blockAnswer[i]]);
        }
        this.solution = solutionBlocks;
        this.grader.solution = solutionBlocks;
        this.answerArea = this.hparsons.hparsonsInput.querySelector('.drop-area');
    }

    // Called when check button clicked (block-based Feedback)
    async runButtonHandler() {
        this.checkCurrentAnswer();
        this.logCurrentAnswer();
        this.renderFeedback();
    }

    async logCurrentAnswer() {
        let act = {
            scheme: "block",
            correct: this.grader.graderState == 'correct' ? "T" : "F",
            answer: this.hparsons.hparsonsInput.getParsonsTextArray(),
            percent: this.grader.percent
        }
        let logData = {
            event: "hparsonsAnswer",
            div_id: this.hparsons.divid,
            act: JSON.stringify(act),
            answer: JSON.stringify({"blocks": act.answer}),
            percent: this.grader.percent,
            correct: act.correct,
        }
        await this.hparsons.logBookEvent(logData);
    }

    // Used for block-based feedback
    checkCurrentAnswer() {
        if (!this.solved) {
            this.checkCount++;
            this.clearFeedback();
            this.grader.answer = this.hparsons.hparsonsInput.getParsonsTextArray();
            this.grade = this.grader.grade();
            if (this.grade == "correct") {
                $(this.hparsons.runButton).prop("disabled", true);
                this.solved = true;
            }
        }
    }

    renderFeedback() {
        this.grade = this.grader.graderState;
        var feedbackArea;
        var answerArea = $(this.answerArea);
        feedbackArea = $(this.messageDiv);

        if (this.grade === "correct") {
            answerArea.addClass("correct");
            feedbackArea.fadeIn(100);
            feedbackArea.attr("class", "alert alert-info");
            if (this.checkCount > 1) {
                feedbackArea.html(
                    $.i18n("msg_parson_correct", this.checkCount)
                );
            } else {
                feedbackArea.html($.i18n("msg_parson_correct_first_try"));
            }
            this.checkCount = 0;
        }

        if (this.grade === "incorrectTooShort") {
            // too little code
            answerArea.addClass("incorrect");
            feedbackArea.fadeIn(500);
            feedbackArea.attr("class", "alert alert-danger");
            feedbackArea.html($.i18n("msg_parson_too_short"));
        }

        if (this.grade === "incorrectMoveBlocks") {
            var answerBlocks = this.answerArea.children;
            var inSolution = [];
            var inSolutionIndexes = [];
            var notInSolution = [];
            for (let i = 0; i < answerBlocks.length; i++) {
                var block = answerBlocks[i];
                var index = this.solution.indexOf(block.textContent);
                if (index == -1) {
                    notInSolution.push(block);
                } else {
                    inSolution.push(block);
                    inSolutionIndexes.push(index);
                }
            }
            var lisIndexes = this.grader.inverseLISIndices(inSolutionIndexes);
            for (let i = 0; i < lisIndexes.length; i++) {
                notInSolution.push(inSolution[lisIndexes[i]]);
            }
            answerArea.addClass("incorrect");
            feedbackArea.fadeIn(500);
            feedbackArea.attr("class", "alert alert-danger");
            for (let i = 0; i < notInSolution.length; i++) {
                $(notInSolution[i]).addClass("incorrectPosition");
            }
            feedbackArea.html($.i18n("msg_parson_wrong_order"));
        }
    }

    // Feedback UI for Block-based Feedback
    clearFeedback() {
        $(this.answerArea).removeClass("incorrect correct");
        var children = this.answerArea.childNodes;
        for (var i = 0; i < children.length; i++) {
            $(children[i]).removeClass(
                "correctPosition incorrectPosition"
            );
        }
        $(this.messageDiv).hide();
    }

    reset() {
        if (this.solved) {
            this.checkCount = 0;
            $(this.hparsons.runButton).prop("disabled", false);
            this.solved = false;
        }
        this.clearFeedback();
    }

}


/***/ }),

/***/ 3291:
/*!**********************************************!*\
  !*** ./runestone/hparsons/js/SQLFeedback.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ SQLFeedback)
/* harmony export */ });
/* harmony import */ var _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./hparsonsFeedback */ 33965);
/* harmony import */ var sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! sql.js/dist/sql-wasm.js */ 26657);
/* harmony import */ var sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var handsontable__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! handsontable */ 36080);
/* harmony import */ var handsontable_dist_handsontable_full_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! handsontable/dist/handsontable.full.css */ 59823);





var allDburls = {};

class SQLFeedback extends _hparsonsFeedback__WEBPACK_IMPORTED_MODULE_0__["default"] {

    createOutput() {
        var outDiv = document.createElement("div");
        $(outDiv).addClass("hp_output col-md-12");
        this.outDiv = outDiv;
        this.output = document.createElement("pre");
        this.output.id = this.hparsons.divid + "_stdout";
        $(this.output).css("visibility", "hidden");
        var clearDiv = document.createElement("div");
        $(clearDiv).css("clear", "both"); // needed to make parent div resize properly
        this.hparsons.outerDiv.appendChild(clearDiv);
        outDiv.appendChild(this.output);
        this.hparsons.outerDiv.appendChild(outDiv);
        clearDiv = document.createElement("div");
        $(clearDiv).css("clear", "both"); // needed to make parent div resize properly
        this.hparsons.outerDiv.appendChild(clearDiv);
    }

    renderFeedback() {
        if (this.testResult) {
            $(this.output).text(this.testResult);
            $(this.output).css("visibility", "visible");
        }
        $(this.outDiv).show();
    }

    clearFeedback() {
        $(this.outDiv).hide();
    }

    reset() {
        this.clearFeedback();
    }

    init() {
        // adapted from activecode-sql
        // fnprefix sets the path to load the sql-wasm.wasm file
        var bookprefix;
        var fnprefix;
        if (
            eBookConfig.useRunestoneServices ||
            window.location.search.includes("mode=browsing")
        ) {
            bookprefix = `${eBookConfig.app}/books/published/${eBookConfig.basecourse}`;
            fnprefix = bookprefix + "/_static";
        } else {
            // The else clause handles the case where you are building for a static web browser
            bookprefix = "";
            fnprefix = "/_static";
        }
        let SQLconfig = {
            locateFile: (filename) => `${fnprefix}/${filename}`,
        };
        var self = this.hparsons;
        sql_js_dist_sql_wasm_js__WEBPACK_IMPORTED_MODULE_1___default()(SQLconfig).then(function (SQL) {
            // set up call to load database asynchronously if given
            if (self.dburl) {
                if (self.dburl.startsWith("/_static")) {
                    self.dburl = `${bookprefix}${self.dburl}`;
                }
                $(self.runButton).attr("disabled", "disabled");
                let buttonText = $(self.runButton).text();
                $(self.runButton).text($.i18n("msg_activecode_load_db"));
                if (!(self.dburl in allDburls)) {
                    allDburls[self.dburl] = {
                        status: "loading",
                        xWaitFor: jQuery.Deferred(),
                    };
                } else {
                    if (allDburls[self.dburl].status == "loading") {
                        allDburls[self.dburl].xWaitFor.done(function () {
                            self.db = allDburls[self.dburl].dbObject;
                            $(self.runButton).removeAttr("disabled");
                            $(self.runButton).text(buttonText);
                        });
                        return;
                    }
                    self.db = allDburls[self.dburl].dbObject;
                    $(self.runButton).removeAttr("disabled");
                    $(self.runButton).text(buttonText);
                    return;
                }
                var xhr = new XMLHttpRequest();
                // For example: https://github.com/lerocha/chinook-database/raw/master/ChinookDatabase/DataSources/Chinook_Sqlite.sqlite
                xhr.open("GET", self.dburl, true);
                xhr.responseType = "arraybuffer";
                xhr.onload = (e) => {
                    var uInt8Array = new Uint8Array(xhr.response);
                    self.db = new SQL.Database(uInt8Array);
                    allDburls[self.dburl].dbObject = self.db;
                    $(self.runButton).text(buttonText);
                    $(self.runButton).removeAttr("disabled");
                    allDburls[self.dburl].db = uInt8Array;
                    allDburls[self.dburl].status = "ready";
                    allDburls[self.dburl].xWaitFor.resolve();
                    // contents is now [{columns:['col1','col2',...], values:[[first row], [second row], ...]}]
                };
                xhr.send();
            } else {
                self.db = new SQL.Database();
            }
        });
    }

    // adapted from activecode - SQL
    async runButtonHandler() {
        // Disable the run button until the run is finished.
        this.hparsons.runButton.disabled = true;
        try {
            await this.runProg();
        } catch (e) {
            console.log(`there was an error ${e} running the code`);
        }
        this.logCurrentAnswer();
        this.renderFeedback();
        // The run is finished; re-enable the button.
        this.hparsons.runButton.disabled = false;
    }

    // adapted from activecode-sql
    async runProg() {
        // Clear any old results
        let divid = this.hparsons.divid + "_sql_out";
        let respDiv = document.getElementById(divid);
        if (respDiv) {
            respDiv.parentElement.removeChild(respDiv);
        }
        $(this.output).text("");
        // creating new results div
        respDiv = document.createElement("div");
        respDiv.id = divid;
        this.outDiv.appendChild(respDiv);
        // show the output div
        $(this.outDiv).show();

        // Run this query
        let query = await this.buildProg();
        if (!this.hparsons.db) {
            $(this.output).text(
                `Error: Database not initialized! DBURL: ${this.hparsons.dburl}`
            );
            return;
        }

        // When having prefix/suffix, the visualization is consistent with "showlastsql" option of sql activecode:
        //        only visualize last entry

        let executionSuccessFlag = true;
        // executing hidden prefix if exist
        if (query.prefix) {
            this.prefixresults = this.executeIteratedStatements(this.hparsons.db.iterateStatements(query.prefix));
            if (this.prefixresults.at(-1).status == 'failure') {
                // if error occured in hidden prefix, log and stop executing the rest
                this.visualizeResults(respDiv, this.prefixresults, "Error executing hidden code in prefix");
                executionSuccessFlag = false;
            }
        }

        // executing student input in micro Parsons
        if (executionSuccessFlag) {
            this.results = this.executeIteratedStatements(this.hparsons.db.iterateStatements(query.input));
            if (this.results.at(-1).status == 'failure') {
                // if error occured in student input, stop executing suffix/unitttest 
                // and visualize the error
                this.visualizeResults(respDiv, this.results);
                executionSuccessFlag = false;
            } else if (!query.suffix) {
                this.visualizeResults(respDiv, this.results);
            }
        }
        
        // executing hidden suffix if exist
        // In most cases the suffix is just "select * from x" to 
        //    get all data from the table to see if the operations the table is correct
        if (executionSuccessFlag && query.suffix) {
            this.suffixresults = this.executeIteratedStatements(this.hparsons.db.iterateStatements(query.suffix));
            if (this.suffixresults.at(-1).status == 'failure') {
                // if error occured in hidden suffix, visualize the results
                this.visualizeResults(respDiv, this.suffixresults, "Error executing hidden code in suffix");
                executionSuccessFlag = false;
            } else {
                this.visualizeResults(respDiv, this.suffixresults);
            }
        }

        // Now handle autograding
        // autograding takes the results of the hidden suffix if exist
        // otherwise take the result of student input
        if (this.hparsons.unittest) {
            if (executionSuccessFlag) {
                if (this.suffixresults) {
                    this.testResult = this.autograde(
                        this.suffixresults[this.suffixresults.length - 1]
                    );
                } else {
                    this.testResult = this.autograde(
                        this.results[this.results.length - 1]
                    );
                }
            } else {
                // unit test results when execution failed
                this.passed = 0;
                this.failed = 0;
                this.percent = NaN;
                this.unit_results = `percent:${this.percent}:passed:${this.passed}:failed:${this.failed}`;
                // Do not show unittest results if execution failed
                $(this.output).css("visibility", "hidden");
            }
        } else {
            $(this.output).css("visibility", "hidden");
        }

        return Promise.resolve("done");
    }

    // Refactored from activecode-sql.
    // Takes iterated statements from db.iterateStatemnts(queryString)
    // Returns Array<result>:
    /* each result: {
        status: "success" or "faliure",
        // for SELECT statements (?):
        columns: number of columns,
        values: data,
        rowcount: number of rows in data,
        // for INSERT, UPDATE, DELETE:
        operation: "INSERT", "UPDATE", or "DELETE",
        rowcount: number of rows modified,
        // when error occurred (aside from status):
        message: error message,
        sql: remaining SQL (?)
        // when no queries were executed:
        message: "no queries submitted"
    }*/
    // If an error occurs it will stop executing the rest of queries in it.
    // Thus the error result will always be the last item.
    executeIteratedStatements(it) {
        let results = [];
        try {
            for (let statement of it) {
                let columns = statement.getColumnNames();
                if (columns.length > 0) {
                    // data! probably a SELECT
                    let data = [];
                    while (statement.step()) {
                        data.push(statement.get());
                    }
                    results.push({
                        status: "success",
                        columns: columns,
                        values: data,
                        rowcount: data.length,
                    });
                } else {
                    let nsql = statement.getNormalizedSQL();
                    let prefix = nsql.substr(0, 6).toLowerCase();
                    statement.step(); // execute the query
                    // Try to detect INSERT/UPDATE/DELETE to give friendly feedback
                    // on rows modified - unfortunately, this won't catch such queries
                    // if they use CTEs.  There seems to be no reliable way of knowing
                    // when a SQLite query actually modified data.
                    if (
                        prefix === "insert" ||
                        prefix === "update" ||
                        prefix === "delete"
                    ) {
                        results.push({
                            status: "success",
                            operation: prefix,
                            rowcount: this.hparsons.db.getRowsModified(),
                        });
                    } else {
                        results.push({ status: "success" });
                    }
                }
            }
        } catch (e) {
            results.push({
                status: "failure",
                message: e.toString(),
                sql: it.getRemainingSQL(),
            });
        }
        if (results.length === 0) {
            results.push({
                status: "failure",
                message: "No queries submitted.",
            });
        }
        return results;
    }

    // output the results in the resultArray(Array<results>).
    // container: the container that contains the results
    // resultArray (Array<result>): see executeIteratedStatements
    // Each result will be in a separate row.
    // devNote will be displayed in the top row if exist;
    //     it usually won't happen unless something is wrong with prefix and suffix.
    //     ("error execution prefix/suffix")
    visualizeResults(container, resultArray, devNote) {
        if (devNote) {
            let section = document.createElement("div");
            section.setAttribute("class", "hp_sql_result");
            container.appendChild(section);
            let messageBox = document.createElement("pre");
            messageBox.textContent = devNote;
            messageBox.setAttribute("class", "hp_sql_result_failure");
            section.appendChild(messageBox);
        }
        for (let r of resultArray) {
            let section = document.createElement("div");
            section.setAttribute("class", "hp_sql_result");
            container.appendChild(section);
            if (r.status === "success") {
                if (r.columns) {
                    let tableDiv = document.createElement("div");
                    section.appendChild(tableDiv);
                    let maxHeight = 350;
                    if (resultArray.length > 1) maxHeight = 200; // max height smaller if lots of results
                    createTable(r, tableDiv, maxHeight);
                    let messageBox = document.createElement("pre");
                    let rmsg = r.rowcount !== 1 ? " rows " : " row ";
                    let msg = "" + r.rowcount + rmsg + "returned";
                    if (r.rowcount > 100) {
                        msg = msg + " (only first 100 rows displayed)";
                    }
                    msg = msg + ".";
                    messageBox.textContent = msg;
                    messageBox.setAttribute("class", "hp_sql_result_success");
                    section.appendChild(messageBox);
                } else if (r.rowcount) {
                    let messageBox = document.createElement("pre");
                    let op = r.operation;
                    op = op + (op.charAt(op.length - 1) === "e" ? "d." : "ed.");
                    let rmsg = r.rowcount !== 1 ? " rows " : " row ";
                    messageBox.textContent = "" + r.rowcount + rmsg + op;
                    messageBox.setAttribute("class", "hp_sql_result_success");
                    section.appendChild(messageBox);
                } else {
                    let messageBox = document.createElement("pre");
                    messageBox.textContent = "Operation succeeded.";
                    messageBox.setAttribute("class", "hp_sql_result_success");
                    section.appendChild(messageBox);
                }
            } else {
                let messageBox = document.createElement("pre");
                messageBox.textContent = r.message;
                messageBox.setAttribute("class", "hp_sql_result_failure");
                section.appendChild(messageBox);
            }
        }
    }
 
    // adapted from activecode
    async buildProg() {
        // assemble code from prefix, suffix, and editor for running.
        let prog = {};
        if (this.hparsons.hiddenPrefix) {
            prog.prefix = this.hparsons.hiddenPrefix;
        }
        prog.input = this.hparsons.hparsonsInput.getParsonsTextArray().join(' ') + "\n";
        if (this.hparsons.hiddenSuffix) {
            prog.suffix = this.hparsons.hiddenSuffix;
        }
        return Promise.resolve(prog);
    }

    // copied from activecode-sql
    async logCurrentAnswer() {
        if (this.unit_results) {
            let act = {
                scheme: "execution",
                correct: (this.failed == 0 && this.passed != 0) ? "T" : "F",
                answer: this.hparsons.hparsonsInput.getParsonsTextArray(),
                percent: this.percent // percent is null if there is execution error
            }
            let logData = {
                event: "hparsonsAnswer",
                div_id: this.hparsons.divid,
                act: JSON.stringify(act),
                percent: this.percent || 0,
                correct: act.correct,
                answer: JSON.stringify({"blocks": act.answer}),
            }
            await this.hparsons.logBookEvent(logData);
        }
    }

    // might move to base class if used by multiple execution based feedback
    autograde(result_table) {
        var tests = this.hparsons.unittest.split(/\n/);
        this.passed = 0;
        this.failed = 0;
        // Tests should be of the form
        // assert row,col oper value for example
        // assert 4,4 == 3
        var result = "";
        tests = tests.filter(function (s) {
            return s.indexOf("assert") > -1;
        });
        for (let test of tests) {
            let wlist = test.split(/\s+/);
            wlist.shift();
            let loc = wlist.shift();
            let oper = wlist.shift();
            let expected = wlist.join(" ");
            let [row, col] = loc.split(",");
            result += this.testOneAssert(
                row,
                col,
                oper,
                expected,
                result_table
            );
            result += "\n";
        }
        let pct = (100 * this.passed) / (this.passed + this.failed);
        this.percent = pct;
        pct = pct.toLocaleString(undefined, { maximumFractionDigits: 2 });
        result += `You passed ${this.passed} out of ${this.passed + this.failed
            } tests for ${pct}%`;
        this.unit_results = `percent:${pct}:passed:${this.passed}:failed:${this.failed}`;
        return result;
    }

    // might move to base class if used by multiple execution based feedback
    testOneAssert(row, col, oper, expected, result_table) {
        // make sure row and col are in bounds
        let actual;
        let output = "";
        try {
            actual = result_table.values[row][col];
        } catch (e) {
            if (expected == 'NO_DATA') {
                this.passed++;
                output = `Passed: No data in row ${row}, column ${col}`;
                return output;
            } else {
                output = `Failed: Not enough data to check row ${row} or column ${col}`;
                return output;
            }
        }
        const operators = {
            "==": function (operand1, operand2) {
                return operand1 == operand2;
            },
            "!=": function (operand1, operand2) {
                return operand1 != operand2;
            },
            ">": function (operand1, operand2) {
                return operand1 > operand2;
            },
            "<": function (operand1, operand2) {
                return operand1 > operand2;
            },
        };
        let res = operators[oper](actual, expected);
        if (res) {
            output = `Pass: ${actual} ${oper} ${expected} in row ${row} column ${result_table.columns[col]}`;
            this.passed++;
        } else {
            output = `Failed ${actual} ${oper} ${expected} in row ${row} column ${result_table.columns[col]}`;
            this.failed++;
        }
        return output;
    }
}

function createTable(tableData, container, maxHeight) {
    let data = tableData.values;
    let trimRows = undefined;
    if (data.length === 0) {
        // kludge: no column headers will show up unless we do this
        data = [tableData.columns.map((e) => null)];
        trimRows = [0];
    }

    var hot = new handsontable__WEBPACK_IMPORTED_MODULE_2__["default"](container, {
        data: data,
        trimRows: trimRows,
        width: "100%",
        height: maxHeight,
        autoRowSize: true,
        autoColumnSize: { useHeaders: true },
        rowHeaders: false,
        colHeaders: tableData.columns,
        editor: false,
        maxRows: 100,
        filters: false,
        dropdownMenu: false,
        licenseKey: "non-commercial-and-evaluation",
    });

    // calculate actual height and resize
    let actualHeight = 40; // header height + small margin
    if (tableData.values.length > 0) {
        for (let i = 0; i < data.length; i++) {
            actualHeight = actualHeight + hot.getRowHeight(i);
            if (actualHeight > maxHeight) break;
        }
    }

    hot.updateSettings({ height: actualHeight });

    return hot;
}


/***/ }),

/***/ 92753:
/*!**********************************************!*\
  !*** ./runestone/hparsons/js/blockGrader.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ BlockBasedGrader)
/* harmony export */ });
// This file is adapted from lineGrader in parsons directive.
// We could have fit our data structure to use the original LineBasedGrader directly,
// but that would result in changes in parsons directive affecting this, so we created a copy
// instead.

class BlockBasedGrader {
    constructor(problem) {
        this.problem = problem;
        this.percent = 0;
    }
    // Use a LIS (Longest Increasing Subsequence) algorithm to return the indexes
    // that are not part of that subsequence.
    inverseLISIndices(arr) {
        // Get all subsequences
        var allSubsequences = [];
        for (var i = 0; i < arr.length; i++) {
            var subsequenceForCurrent = [arr[i]],
                current = arr[i],
                lastElementAdded = -1;
            for (var j = i; j < arr.length; j++) {
                var subsequent = arr[j];
                if (subsequent > current && lastElementAdded < subsequent) {
                    subsequenceForCurrent.push(subsequent);
                    lastElementAdded = subsequent;
                }
            }
            allSubsequences.push(subsequenceForCurrent);
        }
        // Figure out the longest one
        var longestSubsequenceLength = -1;
        var longestSubsequence;
        for (let i in allSubsequences) {
            var subs = allSubsequences[i];
            if (subs.length > longestSubsequenceLength) {
                longestSubsequenceLength = subs.length;
                longestSubsequence = subs;
            }
        }
        // Create the inverse indexes
        var indexes = [];
        var lIndex = 0;
        for (let i = 0; i < arr.length; i++) {
            if (lIndex > longestSubsequence.length) {
                indexes.push(i);
            } else {
                if (arr[i] == longestSubsequence[lIndex]) {
                    lIndex += 1;
                } else {
                    indexes.push(i);
                }
            }
        }
        return indexes;
    }
    // grade that element, returning the state
    grade() {
        this.correctLines = 0;
        this.percentLines = 0;
        var solutionLines = this.solution;
        var answerLines = this.answer;
        var i;
        var state;
        this.percentLines =
            Math.min(answerLines.length, solutionLines.length) /
            Math.max(answerLines.length, solutionLines.length);
        if (answerLines.length < solutionLines.length) {
            state = "incorrectTooShort";
            this.correctLength = false;
        } else if (answerLines.length == solutionLines.length) {
            this.correctLength = true;
        } else {
            this.correctLength = false;
        }

        // Determine whether the code **that is there** is in the correct order
        // If there is too much or too little code this only matters for
        // calculating a percentage score.
        let isCorrectOrder = true;
        this.correctLines = 0;
        this.solutionLength = solutionLines.length;
        let loopLimit = Math.min(solutionLines.length, answerLines.length);
        for (i = 0; i < loopLimit; i++) {
            if (answerLines[i] !== solutionLines[i]) {
                isCorrectOrder = false;
            } else {
                this.correctLines += 1;
            }
        }

        if (
            isCorrectOrder &&
            this.correctLength
        ) {
            // Perfect
            state = "correct";
        } else if (!isCorrectOrder && state != "incorrectTooShort") {
            state = "incorrectMoveBlocks";
        } else if (!this.correctLength && state != "incorrectTooShort") {
            state = "incorrectMoveBlocks";
        }
        this.calculatePercent();
        this.graderState = state;
        return state;
    }

    calculatePercent() {
        let numLines = this.percentLines * 0.2;
        let lines = this.answer.length;
        let numCorrectBlocks = (this.correctLines / lines) * 0.8;

        this.percent = numLines + numCorrectBlocks;
    }
}


/***/ }),

/***/ 58722:
/*!*******************************************!*\
  !*** ./runestone/hparsons/js/hparsons.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ HParsons),
/* harmony export */   "hpList": () => (/* binding */ hpList)
/* harmony export */ });
/* harmony import */ var _common_js_runestonebase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../common/js/runestonebase.js */ 2568);
/* harmony import */ var _css_hparsons_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../css/hparsons.css */ 32571);
/* harmony import */ var _css_hljs_xcode_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../css/hljs-xcode.css */ 28528);
/* harmony import */ var _BlockFeedback_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./BlockFeedback.js */ 87036);
/* harmony import */ var _SQLFeedback_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./SQLFeedback.js */ 3291);
/* harmony import */ var micro_parsons_micro_parsons_micro_parsons_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! micro-parsons/micro-parsons/micro-parsons.js */ 34344);
/* harmony import */ var micro_parsons_micro_parsons_micro_parsons_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! micro-parsons/micro-parsons/micro-parsons.css */ 67727);







// If you need to debug something in the micro-parsons library then
// gh repo clone amy21206/micro-parsons-element
// run npm install and npm build
// copy everything from bin into the hparsons/js folder and build the components.
/*import {InitMicroParsons} from './micro-parsons.js';
import './micro-parsons.css';*/

var hpList;
// Dictionary that contains all instances of horizontal Parsons problem objects
if (hpList === undefined) hpList = {};


class HParsons extends _common_js_runestonebase_js__WEBPACK_IMPORTED_MODULE_0__["default"] {
    constructor(opts) {
        super(opts);
        // getting settings
        var orig = $(opts.orig).find("textarea")[0];
        this.reuse = $(orig).data("reuse") ? true : false;
        this.randomize = $(orig).data("randomize") ? true : false;
        this.isBlockGrading = $(orig).data("blockanswer") ? true : false;
        this.language = $(orig).data("language");
        if (this.isBlockGrading) {
            this.blockAnswer = $(orig).data("blockanswer").split(" ");
        }
        this.divid = opts.orig.id;
        this.containerDiv = opts.orig;
        this.useRunestoneServices = opts.useRunestoneServices;

        // Set the storageId (key for storing data)
        var storageId = super.localStorageKey();
        this.storageId = storageId;

        this.origElem = orig;
        this.origText = this.origElem.textContent;
        this.code = $(orig).text() || "\n\n\n\n\n";
        this.dburl = $(orig).data("dburl");
        this.runButton = null;
        this.saveButton = null;
        this.loadButton = null;
        this.outerDiv = null;
        this.controlDiv = null;
        this.processContent(this.code)

        // Change to factory when more execution based feedback is included
        if (this.isBlockGrading) {
            this.feedbackController = new _BlockFeedback_js__WEBPACK_IMPORTED_MODULE_3__["default"](this);
        } else {
            this.feedbackController = new _SQLFeedback_js__WEBPACK_IMPORTED_MODULE_4__["default"](this);
        }

        // creating UI components
        this.createEditor();
        this.createOutput();
        this.createControls();
        this.feedbackController.customizeUI();

        if ($(orig).data("caption")) {
            this.caption = $(orig).data("caption");
        } else {
            this.caption = "MicroParsons";
        }
        this.addCaption("runestone");
        this.indicate_component_ready();

        // initializing functionalities for different feedback
        this.feedbackController.init();
        this.checkServer('hparsonsAnswer', true);
    }

    processContent(code) {
        // todo: add errors when blocks are nonexistent (maybe in python)?
        this.hiddenPrefix = this.processSingleContent(code, '--hiddenprefix--');
        this.originalBlocks = this.processSingleContent(code, '--blocks--').split('\n').slice(1,-1);
        this.hiddenSuffix = this.processSingleContent(code, '--hiddensuffix--');
        this.unittest = this.processSingleContent(code, '--unittest--');
    }

    processSingleContent(code, delimitier) {
        let index = code.indexOf(delimitier);
        if (index > -1) {
            let content = code.substring(index + delimitier.length);
            let endIndex = content.indexOf("\n--");
            content =
                endIndex > -1
                    ? content.substring(0, endIndex + 1)
                    : content;
            return content;
        }
        return undefined;
    }

    // copied from activecode, already modified to add parsons
    createEditor() {
        this.outerDiv = document.createElement("div");
        $(this.origElem).replaceWith(this.outerDiv);
        this.outerDiv.id = `${this.divid}-container`;
        this.outerDiv.addEventListener("micro-parsons", (ev) => {
            const eventListRunestone = ['input', 'reset'];
            if (eventListRunestone.includes(ev.detail.type)) {
                // only log the events in the event list
                this.logHorizontalParsonsEvent(ev.detail);
                // when event is input or reset: clear previous feedback
                this.feedbackController.clearFeedback();
            }
        });
        const props = {
            selector: `#${this.divid}-container`,
            id: `${this.divid}-hparsons`,
            reuse: this.reuse,
            randomize: this.randomize,
            parsonsBlocks: [...this.originalBlocks],
            language: this.language
        }
        ;(0,micro_parsons_micro_parsons_micro_parsons_js__WEBPACK_IMPORTED_MODULE_5__.InitMicroParsons)(props);
        this.hparsonsInput = $(this.outerDiv).find("micro-parsons")[0];
    }

    createOutput() {
        this.feedbackController.createOutput();
    }

    createControls() {
        var ctrlDiv = document.createElement("div");
        $(ctrlDiv).addClass("hp_actions");
        $(ctrlDiv).addClass("col-md-12");

        // Run Button
        this.runButton = document.createElement("button");
        $(this.runButton).addClass("btn btn-success run-button");
        ctrlDiv.appendChild(this.runButton);
        $(this.runButton).attr("type", "button");
        $(this.runButton).text("Run");
        var that = this;
        this.runButton.onclick = () => {
            that.feedbackController.runButtonHandler();
            that.setLocalStorage();
        };

        // Reset button
        var resetBtn;
        resetBtn = document.createElement("button");
        $(resetBtn).text("Reset");
        $(resetBtn).addClass("btn btn-warning run-button");
        ctrlDiv.appendChild(resetBtn);
        this.resetButton = resetBtn;
        this.resetButton.onclick = () => {
            that.hparsonsInput.resetInput();
            that.setLocalStorage();
            that.feedbackController.reset();
        };
        $(resetBtn).attr("type", "button");

        $(this.outerDiv).prepend(ctrlDiv);
        this.controlDiv = ctrlDiv;
    }

    // Return previous answers in local storage
    //
    localData() {
        var data = localStorage.getItem(this.storageId);
        if (data !== null) {
            if (data.charAt(0) == "{") {
                data = JSON.parse(data);
            } else {
                data = {};
            }
        } else {
            data = {};
        }
        return data;
    }
    // RunestoneBase: Sent when the server has data
    restoreAnswers(serverData) {
        // TODO: not tested with server data yet.
        // Server side data should be:
        /*
            {
                answer: Array<string>, // list of answer block content
                count: ?number // number of previous attempts if block-based feedback
            }
        */
        if (serverData.answer){
            this.hparsonsInput.restoreAnswer(serverData.answer.blocks);
        }
        if (serverData.count) {
            this.feedbackController.checkCount = serverData.count;
        }
    }
    // RunestoneBase: Load what is in local storage
    checkLocalStorage() {
        if (this.graderactive) {
            // Zihan: I think this means the component is still loading?
            return;
        }
        let localData = this.localData();
        if (localData.answer) {
            this.hparsonsInput.restoreAnswer(localData.answer);
        }
        if (localData.count) {
            this.feedbackController.checkCount = localData.count;
        }
    }
    // RunestoneBase: Set the state of the problem in local storage
    setLocalStorage(data) {
        let currentState = {};
        if (data == undefined) {
            currentState = {
                answer: this.hparsonsInput.getParsonsTextArray()
            }
            if (this.isBlockGrading) {
                // if this is block grading, add number of previous attempts too
                currentState.count = this.feedbackController.checkCount;
            }
        } else {
            currentState = data;
        }
        localStorage.setItem(this.storageId, JSON.stringify(currentState));
    }

    logHorizontalParsonsEvent(hparsonsEvent) {
        let ev = {
            event: "hparsons",
            div_id: this.divid,
            act: JSON.stringify(hparsonsEvent),
        };
        this.logBookEvent(ev);
    }
}


/*=================================
== Find the custom HTML tags and ==
==   execute our code on them    ==
=================================*/
$(document).on("runestone:login-complete", function () {
    $("[data-component=hparsons]").each(function () {
        if ($(this).closest("[data-component=timedAssessment]").length == 0) {
            // If this element exists within a timed component, don't render it here
            // try {
            hpList[this.id] = new HParsons({
                orig: this,
                useRunestoneServices: eBookConfig.useRunestoneServices,
            });
            // } catch (err) {
            //     console.log(`Error rendering ShortAnswer Problem ${this.id}
            //     Details: ${err}`);
            // }
        }
    });
});

if (typeof window.component_factory === "undefined") {
    window.component_factory = {};
}
window.component_factory["hparsons"] = function (opts) {
    return new HParsons(opts);
};


/***/ }),

/***/ 33965:
/*!***************************************************!*\
  !*** ./runestone/hparsons/js/hparsonsFeedback.js ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "default": () => (/* binding */ HParsonsFeedback)
/* harmony export */ });
class HParsonsFeedback {
    constructor(hparsons) {
        this.hparsons = hparsons;
        this.percent = 0;
    }
    createOutput() {
        console.log('createOutput method not implemented in feedback!');
    }
    async runButtonHandler() {
        console.log('runButtonClicked method not implemented in feedback!');
    }
    customizeUI() {
        // used to change some minor UI, e.g. the text on Run button
    }
    init() {
        // initlizations functionalities such as preparing SQL,
        // or checking related options
    }

    clearFeedback() {
        // called when input is changed
        console.log('clearFeedback method not implemented in feedback!');
    }
    
    reset() {
        // called when reset is clicked
        console.log('reset method not implemented in feedback!');
    }
}


/***/ }),

/***/ 59164:
/*!*************************************************!*\
  !*** ./runestone/parsons/js/parsons-i18n.en.js ***!
  \*************************************************/
/***/ (() => {

$.i18n().load({
    en: {
        msg_parson_check_me: "Check",
        msg_parson_reset: "Reset",
        msg_parson_help: "Help me",
        msg_parson_too_short: "Your answer is too short. Add more blocks.",
        msg_parson_drag_from_here: "Drag from here",
        msg_parson_drag_to_here: "Drop blocks here",
        msg_parson_correct_first_try:
            "Perfect!  It took you only one try to solve this.  Great job!",
        msg_parson_correct:
            "Perfect!  It took you $1 tries to solve this.  Click Reset to try to solve it in one attempt.",
        msg_parson_wrong_indent:
            "This block is not indented correctly. Either indent it more by dragging it right or reduce the indention by dragging it left.",
        msg_parson_wrong_indents:
            "These blocks are not indented correctly. To indent a block more, drag it to the right. To reduce the indention, drag it to the left.",
        msg_parson_wrong_order:
            "Highlighted blocks in your answer are wrong or are in the wrong order. This can be fixed by moving, removing, or replacing highlighted blocks.",
        msg_parson_arrow_navigate:
            "Arrow keys to navigate. Space to select / deselect block to move.",
        msg_parson_help_info:
            "Click on the Help Me button if you want to make the problem easier",
        msg_parson_not_solution:
            "Disabled an unneeded code block (one that is not part of the solution).",
        msg_parson_provided_indent: "Provided the indentation.",
        msg_parson_combined_blocks: "Combined two code blocks into one.",
        msg_parson_remove_incorrect:
            "Will remove an incorrect code block from answer area",
        msg_parson_will_combine: "Will combine two blocks",
        msg_parson_atleast_three_attempts:
            "You must make at least three distinct full attempts at a solution before you can get help",
        msg_parson_three_blocks_left:
            "There are only 3 correct blocks left.  You should be able to put them in order",
        msg_parson_will_provide_indent: "Will provide indentation",
    },
});


/***/ }),

/***/ 16432:
/*!****************************************************!*\
  !*** ./runestone/parsons/js/parsons-i18n.pt-br.js ***!
  \****************************************************/
/***/ (() => {

$.i18n().load({
    "pt-br": {
        msg_parson_check_me: "Verificar",
        msg_parson_reset: "Resetar",
        msg_parson_help:"Ajuda",
        msg_parson_too_short: "Seu programa  muito curto. Adicione mais blocos.",
        msg_parson_drag_from_here: "Arraste daqui",
        msg_parson_drag_to_here: "Largue os blocos aqui",
        msg_parson_correct_first_try:
            "Perfeito! Voc levou apenas uma tentativa para resolver. Bom trabalho!",
        msg_parson_correct:
            "Perfeito! Voc levou $1 tentativas para resolver. Clique em Resetar para tentar resolver em uma tentativa." ,
        msg_parson_wrong_indent:
            "Este bloco no est indentado corretamente. Indente mais arrastando-o para a direita ou reduza a indentao arrastando para a esquerda.",
        msg_parson_wrong_indents:
            "Estes blocos no esto indentados corretamente. Para indentar mais, arraste o bloco para a direita. Para reduzir a indentao, arraste para a esquerda.",
        msg_parson_wrong_order:
            "Blocos destacados no seu programa esto errados ou esto na ordem errada. Isso pode ser resolvido movendo, excluindo ou substituindo os blocos destacados.",
        msg_parson_arrow_navigate:
            "Use as teclas de setas para navegar. Espao para selecionar/ desmarcar blocos para mover.",
        msg_parson_help_info:
            "Clique no boto Ajuda se voc quiser facilitar o problema",
        msg_parson_not_solution:
            "Foi desabilitado um bloco de cdigo desnecessrio (que no faz parte da soluo).",
        msg_parson_provided_indent:"Foi fornecida a indentao.",
        msg_parson_combined_blocks:"Dois blocos de cdigos foram combinados em um.",
        msg_parson_remove_incorrect:
            "Ser removido um bloco de cdigo incorreto da rea de resposta",
        msg_parson_will_combine:"Sero combinados dois blocos",
        msg_parson_atleast_three_attempts:
            "Voc deve tentar pelo menos trs vezes antes de pedir ajuda",
        msg_parson_three_blocks_left:
            "Restam apenas 3 blocos corretos. Voc deve coloc-los em ordem",
        msg_parson_will_provide_indent: "Ser fornecida a indentao"
    },
});


/***/ }),

/***/ 37607:
/*!************************!*\
  !*** crypto (ignored) ***!
  \************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ 70803:
/*!********************!*\
  !*** fs (ignored) ***!
  \********************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ 59547:
/*!**********************!*\
  !*** path (ignored) ***!
  \**********************/
/***/ (() => {

/* (ignored) */

/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZV9tb2R1bGVzX21vbWVudF9sb2NhbGVfc3luY19yZWN1cnNpdmVfLXJ1bmVzdG9uZV9ocGFyc29uc19qc19ocGFyc29uc19qcy1ub2RlX21vZHVsZXNfbWljLTVlYTZkMi4yOGY0YzM2MzY2YzE4ODYzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUE7Ozs7Ozs7Ozs7Ozs7QUNBQTs7Ozs7Ozs7Ozs7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDblFrRDtBQUNGO0FBQ0g7QUFDRzs7QUFFakMsNEJBQTRCLHlEQUFnQjtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLHVEQUFnQjtBQUMxQztBQUNBLHdCQUF3QixzQ0FBc0M7QUFDOUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLHFCQUFx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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLGlCQUFpQjtBQUNqQixzRUFBc0U7QUFDdEUsOEJBQThCLElBQUk7QUFDbEM7QUFDQTtBQUNBLEtBQUs7QUFDTCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7Ozs7Ozs7Ozs7OztBQ3ZRZTtBQUNmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7O0FDNUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7Ozs7Ozs7Ozs7O0FDbkNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7Ozs7Ozs7Ozs7O0FDbkNEOzs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7Ozs7QUNBQSIsInNvdXJjZXMiOlsid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvaHBhcnNvbnMvY3NzL2hsanMteGNvZGUuY3NzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvaHBhcnNvbnMvY3NzL2hwYXJzb25zLmNzcyIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vbm9kZV9tb2R1bGVzL21vbWVudC9sb2NhbGUvIHN5bmMgXlxcLlxcLy4qJCIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vcnVuZXN0b25lL2hwYXJzb25zL2pzL0Jsb2NrRmVlZGJhY2suanMiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy8uL3J1bmVzdG9uZS9ocGFyc29ucy9qcy9TUUxGZWVkYmFjay5qcyIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzLy4vcnVuZXN0b25lL2hwYXJzb25zL2pzL2Jsb2NrR3JhZGVyLmpzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvaHBhcnNvbnMvanMvaHBhcnNvbnMuanMiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy8uL3J1bmVzdG9uZS9ocGFyc29ucy9qcy9ocGFyc29uc0ZlZWRiYWNrLmpzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvLi9ydW5lc3RvbmUvcGFyc29ucy9qcy9wYXJzb25zLWkxOG4uZW4uanMiLCJ3ZWJwYWNrOi8vV2ViQ29tcG9uZW50cy8uL3J1bmVzdG9uZS9wYXJzb25zL2pzL3BhcnNvbnMtaTE4bi5wdC1ici5qcyIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzL2lnbm9yZWR8L2hvbWUvYW15MjEyMDYvUnVuZXN0b25lU2VydmVyL3JzZG9ja2VyL1J1bmVzdG9uZUNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL3NxbC5qcy9kaXN0fGNyeXB0byIsIndlYnBhY2s6Ly9XZWJDb21wb25lbnRzL2lnbm9yZWR8L2hvbWUvYW15MjEyMDYvUnVuZXN0b25lU2VydmVyL3JzZG9ja2VyL1J1bmVzdG9uZUNvbXBvbmVudHMvbm9kZV9tb2R1bGVzL3NxbC5qcy9kaXN0fGZzIiwid2VicGFjazovL1dlYkNvbXBvbmVudHMvaWdub3JlZHwvaG9tZS9hbXkyMTIwNi9SdW5lc3RvbmVTZXJ2ZXIvcnNkb2NrZXIvUnVuZXN0b25lQ29tcG9uZW50cy9ub2RlX21vZHVsZXMvc3FsLmpzL2Rpc3R8cGF0aCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW5cbmV4cG9ydCB7fTsiLCJ2YXIgbWFwID0ge1xuXHRcIi4vYWZcIjogNDI3ODYsXG5cdFwiLi9hZi5qc1wiOiA0Mjc4Nixcblx0XCIuL2FyXCI6IDMwODY3LFxuXHRcIi4vYXItZHpcIjogMTQxMzAsXG5cdFwiLi9hci1kei5qc1wiOiAxNDEzMCxcblx0XCIuL2FyLWt3XCI6IDk2MTM1LFxuXHRcIi4vYXIta3cuanNcIjogOTYxMzUsXG5cdFwiLi9hci1seVwiOiA1NjQ0MCxcblx0XCIuL2FyLWx5LmpzXCI6IDU2NDQwLFxuXHRcIi4vYXItbWFcIjogNDc3MDIsXG5cdFwiLi9hci1tYS5qc1wiOiA0NzcwMixcblx0XCIuL2FyLXNhXCI6IDE2MDQwLFxuXHRcIi4vYXItc2EuanNcIjogMTYwNDAsXG5cdFwiLi9hci10blwiOiAzNzEwMCxcblx0XCIuL2FyLXRuLmpzXCI6IDM3MTAwLFxuXHRcIi4vYXIuanNcIjogMzA4NjcsXG5cdFwiLi9helwiOiAzMTA4Myxcblx0XCIuL2F6LmpzXCI6IDMxMDgzLFxuXHRcIi4vYmVcIjogOTgwOCxcblx0XCIuL2JlLmpzXCI6IDk4MDgsXG5cdFwiLi9iZ1wiOiA2ODMzOCxcblx0XCIuL2JnLmpzXCI6IDY4MzM4LFxuXHRcIi4vYm1cIjogNjc0MzgsXG5cdFwiLi9ibS5qc1wiOiA2NzQzOCxcblx0XCIuL2JuXCI6IDg5MDUsXG5cdFwiLi9ibi5qc1wiOiA4OTA1LFxuXHRcIi4vYm9cIjogMTE1NjAsXG5cdFwiLi9iby5qc1wiOiAxMTU2MCxcblx0XCIuL2JyXCI6IDEyNzgsXG5cdFwiLi9ici5qc1wiOiAxMjc4LFxuXHRcIi4vYnNcIjogODA2MjIsXG5cdFwiLi9icy5qc1wiOiA4MDYyMixcblx0XCIuL2NhXCI6IDI0NjgsXG5cdFwiLi9jYS5qc1wiOiAyNDY4LFxuXHRcIi4vY3NcIjogNTgyMixcblx0XCIuL2NzLmpzXCI6IDU4MjIsXG5cdFwiLi9jdlwiOiA1MDg3Nyxcblx0XCIuL2N2LmpzXCI6IDUwODc3LFxuXHRcIi4vY3lcIjogNDczNzMsXG5cdFwiLi9jeS5qc1wiOiA0NzM3Myxcblx0XCIuL2RhXCI6IDI0NzgwLFxuXHRcIi4vZGEuanNcIjogMjQ3ODAsXG5cdFwiLi9kZVwiOiA1OTc0MCxcblx0XCIuL2RlLWF0XCI6IDYwMjE3LFxuXHRcIi4vZGUtYXQuanNcIjogNjAyMTcsXG5cdFwiLi9kZS1jaFwiOiA2MDg5NCxcblx0XCIuL2RlLWNoLmpzXCI6IDYwODk0LFxuXHRcIi4vZGUuanNcIjogNTk3NDAsXG5cdFwiLi9kdlwiOiA1MzAwLFxuXHRcIi4vZHYuanNcIjogNTMwMCxcblx0XCIuL2VsXCI6IDUwODM3LFxuXHRcIi4vZWwuanNcIjogNTA4MzcsXG5cdFwiLi9lbi1hdVwiOiA3ODM0OCxcblx0XCIuL2VuLWF1LmpzXCI6IDc4MzQ4LFxuXHRcIi4vZW4tY2FcIjogNzc5MjUsXG5cdFwiLi9lbi1jYS5qc1wiOiA3NzkyNSxcblx0XCIuL2VuLWdiXCI6IDIyMjQzLFxuXHRcIi4vZW4tZ2IuanNcIjogMjIyNDMsXG5cdFwiLi9lbi1pZVwiOiA0NjQzNixcblx0XCIuL2VuLWllLmpzXCI6IDQ2NDM2LFxuXHRcIi4vZW4tbnpcIjogNzYzMTksXG5cdFwiLi9lbi1uei5qc1wiOiA3NjMxOSxcblx0XCIuL2VvXCI6IDkyOTE1LFxuXHRcIi4vZW8uanNcIjogOTI5MTUsXG5cdFwiLi9lc1wiOiA1NTY1NSxcblx0XCIuL2VzLWRvXCI6IDU1MjUxLFxuXHRcIi4vZXMtZG8uanNcIjogNTUyNTEsXG5cdFwiLi9lcy11c1wiOiA3MTE0Nixcblx0XCIuL2VzLXVzLmpzXCI6IDcxMTQ2LFxuXHRcIi4vZXMuanNcIjogNTU2NTUsXG5cdFwiLi9ldFwiOiA1NjAzLFxuXHRcIi4vZXQuanNcIjogNTYwMyxcblx0XCIuL2V1XCI6IDc3NzYzLFxuXHRcIi4vZXUuanNcIjogNzc3NjMsXG5cdFwiLi9mYVwiOiA3Njk1OSxcblx0XCIuL2ZhLmpzXCI6IDc2OTU5LFxuXHRcIi4vZmlcIjogMTE4OTcsXG5cdFwiLi9maS5qc1wiOiAxMTg5Nyxcblx0XCIuL2ZvXCI6IDk0Njk0LFxuXHRcIi4vZm8uanNcIjogOTQ2OTQsXG5cdFwiLi9mclwiOiA5NDQ3MCxcblx0XCIuL2ZyLWNhXCI6IDYzMDQ5LFxuXHRcIi4vZnItY2EuanNcIjogNjMwNDksXG5cdFwiLi9mci1jaFwiOiA1MjMzMCxcblx0XCIuL2ZyLWNoLmpzXCI6IDUyMzMwLFxuXHRcIi4vZnIuanNcIjogOTQ0NzAsXG5cdFwiLi9meVwiOiA1MDQ0LFxuXHRcIi4vZnkuanNcIjogNTA0NCxcblx0XCIuL2dkXCI6IDIxMDEsXG5cdFwiLi9nZC5qc1wiOiAyMTAxLFxuXHRcIi4vZ2xcIjogMzg3OTQsXG5cdFwiLi9nbC5qc1wiOiAzODc5NCxcblx0XCIuL2dvbS1sYXRuXCI6IDIzMTY4LFxuXHRcIi4vZ29tLWxhdG4uanNcIjogMjMxNjgsXG5cdFwiLi9ndVwiOiA5NTM0OSxcblx0XCIuL2d1LmpzXCI6IDk1MzQ5LFxuXHRcIi4vaGVcIjogMjQyMDYsXG5cdFwiLi9oZS5qc1wiOiAyNDIwNixcblx0XCIuL2hpXCI6IDMwMDk0LFxuXHRcIi4vaGkuanNcIjogMzAwOTQsXG5cdFwiLi9oclwiOiAzMDMxNixcblx0XCIuL2hyLmpzXCI6IDMwMzE2LFxuXHRcIi4vaHVcIjogMjIxMzgsXG5cdFwiLi9odS5qc1wiOiAyMjEzOCxcblx0XCIuL2h5LWFtXCI6IDExNDIzLFxuXHRcIi4vaHktYW0uanNcIjogMTE0MjMsXG5cdFwiLi9pZFwiOiAyOTIxOCxcblx0XCIuL2lkLmpzXCI6IDI5MjE4LFxuXHRcIi4vaXNcIjogOTAxMzUsXG5cdFwiLi9pcy5qc1wiOiA5MDEzNSxcblx0XCIuL2l0XCI6IDkwNjI2LFxuXHRcIi4vaXQuanNcIjogOTA2MjYsXG5cdFwiLi9qYVwiOiAzOTE4Myxcblx0XCIuL2phLmpzXCI6IDM5MTgzLFxuXHRcIi4vanZcIjogMjQyODYsXG5cdFwiLi9qdi5qc1wiOiAyNDI4Nixcblx0XCIuL2thXCI6IDQwNDE1LFxuXHRcIi4va2EuanNcIjogNDA0MTUsXG5cdFwiLi9ra1wiOiA0Nzc3Mixcblx0XCIuL2trLmpzXCI6IDQ3NzcyLFxuXHRcIi4va21cIjogMTg3NTgsXG5cdFwiLi9rbS5qc1wiOiAxODc1OCxcblx0XCIuL2tuXCI6IDc5MjgyLFxuXHRcIi4va24uanNcIjogNzkyODIsXG5cdFwiLi9rb1wiOiAzMzczMCxcblx0XCIuL2tvLmpzXCI6IDMzNzMwLFxuXHRcIi4va3lcIjogMzMyOTEsXG5cdFwiLi9reS5qc1wiOiAzMzI5MSxcblx0XCIuL2xiXCI6IDM2ODQxLFxuXHRcIi4vbGIuanNcIjogMzY4NDEsXG5cdFwiLi9sb1wiOiA1NTQ2Nixcblx0XCIuL2xvLmpzXCI6IDU1NDY2LFxuXHRcIi4vbHRcIjogNTcwMTAsXG5cdFwiLi9sdC5qc1wiOiA1NzAxMCxcblx0XCIuL2x2XCI6IDM3NTk1LFxuXHRcIi4vbHYuanNcIjogMzc1OTUsXG5cdFwiLi9tZVwiOiAzOTg2MSxcblx0XCIuL21lLmpzXCI6IDM5ODYxLFxuXHRcIi4vbWlcIjogMzU0OTMsXG5cdFwiLi9taS5qc1wiOiAzNTQ5Myxcblx0XCIuL21rXCI6IDk1OTY2LFxuXHRcIi4vbWsuanNcIjogOTU5NjYsXG5cdFwiLi9tbFwiOiA4NzM0MSxcblx0XCIuL21sLmpzXCI6IDg3MzQxLFxuXHRcIi4vbXJcIjogMTAzNzAsXG5cdFwiLi9tci5qc1wiOiAxMDM3MCxcblx0XCIuL21zXCI6IDk4NDcsXG5cdFwiLi9tcy1teVwiOiA0MTIzNyxcblx0XCIuL21zLW15LmpzXCI6IDQxMjM3LFxuXHRcIi4vbXMuanNcIjogOTg0Nyxcblx0XCIuL210XCI6IDcyMTI2LFxuXHRcIi4vbXQuanNcIjogNzIxMjYsXG5cdFwiLi9teVwiOiA1NjE2NSxcblx0XCIuL215LmpzXCI6IDU2MTY1LFxuXHRcIi4vbmJcIjogNjQ5MjQsXG5cdFwiLi9uYi5qc1wiOiA2NDkyNCxcblx0XCIuL25lXCI6IDE2NzQ0LFxuXHRcIi4vbmUuanNcIjogMTY3NDQsXG5cdFwiLi9ubFwiOiA5MzkwMSxcblx0XCIuL25sLWJlXCI6IDU5ODE0LFxuXHRcIi4vbmwtYmUuanNcIjogNTk4MTQsXG5cdFwiLi9ubC5qc1wiOiA5MzkwMSxcblx0XCIuL25uXCI6IDgzODc3LFxuXHRcIi4vbm4uanNcIjogODM4NzcsXG5cdFwiLi9wYS1pblwiOiAxNTg1OCxcblx0XCIuL3BhLWluLmpzXCI6IDE1ODU4LFxuXHRcIi4vcGxcIjogNjQ0OTUsXG5cdFwiLi9wbC5qc1wiOiA2NDQ5NSxcblx0XCIuL3B0XCI6IDg5NTIwLFxuXHRcIi4vcHQtYnJcIjogNTc5NzEsXG5cdFwiLi9wdC1ici5qc1wiOiA1Nzk3MSxcblx0XCIuL3B0LmpzXCI6IDg5NTIwLFxuXHRcIi4vcm9cIjogOTY0NTksXG5cdFwiLi9yby5qc1wiOiA5NjQ1OSxcblx0XCIuL3J1XCI6IDIxNzkzLFxuXHRcIi4vcnUuanNcIjogMjE3OTMsXG5cdFwiLi9zZFwiOiA0MDk1MCxcblx0XCIuL3NkLmpzXCI6IDQwOTUwLFxuXHRcIi4vc2VcIjogMTA0OTAsXG5cdFwiLi9zZS5qc1wiOiAxMDQ5MCxcblx0XCIuL3NpXCI6IDkwMTI0LFxuXHRcIi4vc2kuanNcIjogOTAxMjQsXG5cdFwiLi9za1wiOiA2NDI0OSxcblx0XCIuL3NrLmpzXCI6IDY0MjQ5LFxuXHRcIi4vc2xcIjogMTQ5ODUsXG5cdFwiLi9zbC5qc1wiOiAxNDk4NSxcblx0XCIuL3NxXCI6IDUxMTA0LFxuXHRcIi4vc3EuanNcIjogNTExMDQsXG5cdFwiLi9zclwiOiA0OTEzMSxcblx0XCIuL3NyLWN5cmxcIjogMTM3MDksXG5cdFwiLi9zci1jeXJsLmpzXCI6IDEzNzA5LFxuXHRcIi4vc3IuanNcIjogNDkxMzEsXG5cdFwiLi9zc1wiOiA4NTg5Myxcblx0XCIuL3NzLmpzXCI6IDg1ODkzLFxuXHRcIi4vc3ZcIjogOTg3NjAsXG5cdFwiLi9zdi5qc1wiOiA5ODc2MCxcblx0XCIuL3N3XCI6IDkxMTcyLFxuXHRcIi4vc3cuanNcIjogOTExNzIsXG5cdFwiLi90YVwiOiAyNzMzMyxcblx0XCIuL3RhLmpzXCI6IDI3MzMzLFxuXHRcIi4vdGVcIjogMjMxMTAsXG5cdFwiLi90ZS5qc1wiOiAyMzExMCxcblx0XCIuL3RldFwiOiA1MjA5NSxcblx0XCIuL3RldC5qc1wiOiA1MjA5NSxcblx0XCIuL3RoXCI6IDkwNDEsXG5cdFwiLi90aC5qc1wiOiA5MDQxLFxuXHRcIi4vdGwtcGhcIjogNzU3NjgsXG5cdFwiLi90bC1waC5qc1wiOiA3NTc2OCxcblx0XCIuL3RsaFwiOiA4OTQ0NCxcblx0XCIuL3RsaC5qc1wiOiA4OTQ0NCxcblx0XCIuL3RyXCI6IDcyMzk3LFxuXHRcIi4vdHIuanNcIjogNzIzOTcsXG5cdFwiLi90emxcIjogMjgyNTQsXG5cdFwiLi90emwuanNcIjogMjgyNTQsXG5cdFwiLi90em1cIjogNTExMDYsXG5cdFwiLi90em0tbGF0blwiOiAzMDY5OSxcblx0XCIuL3R6bS1sYXRuLmpzXCI6IDMwNjk5LFxuXHRcIi4vdHptLmpzXCI6IDUxMTA2LFxuXHRcIi4vdWtcIjogNjc2OTEsXG5cdFwiLi91ay5qc1wiOiA2NzY5MSxcblx0XCIuL3VyXCI6IDEzNzk1LFxuXHRcIi4vdXIuanNcIjogMTM3OTUsXG5cdFwiLi91elwiOiA2NzkxLFxuXHRcIi4vdXotbGF0blwiOiA2MDU4OCxcblx0XCIuL3V6LWxhdG4uanNcIjogNjA1ODgsXG5cdFwiLi91ei5qc1wiOiA2NzkxLFxuXHRcIi4vdmlcIjogNjU2NjYsXG5cdFwiLi92aS5qc1wiOiA2NTY2Nixcblx0XCIuL3gtcHNldWRvXCI6IDE0Mzc4LFxuXHRcIi4veC1wc2V1ZG8uanNcIjogMTQzNzgsXG5cdFwiLi95b1wiOiA3NTgwNSxcblx0XCIuL3lvLmpzXCI6IDc1ODA1LFxuXHRcIi4vemgtY25cIjogODM4MzksXG5cdFwiLi96aC1jbi5qc1wiOiA4MzgzOSxcblx0XCIuL3poLWhrXCI6IDU1NzI2LFxuXHRcIi4vemgtaGsuanNcIjogNTU3MjYsXG5cdFwiLi96aC10d1wiOiA3NDE1Mixcblx0XCIuL3poLXR3LmpzXCI6IDc0MTUyXG59O1xuXG5cbmZ1bmN0aW9uIHdlYnBhY2tDb250ZXh0KHJlcSkge1xuXHR2YXIgaWQgPSB3ZWJwYWNrQ29udGV4dFJlc29sdmUocmVxKTtcblx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oaWQpO1xufVxuZnVuY3Rpb24gd2VicGFja0NvbnRleHRSZXNvbHZlKHJlcSkge1xuXHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKG1hcCwgcmVxKSkge1xuXHRcdHZhciBlID0gbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIiArIHJlcSArIFwiJ1wiKTtcblx0XHRlLmNvZGUgPSAnTU9EVUxFX05PVF9GT1VORCc7XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRyZXR1cm4gbWFwW3JlcV07XG59XG53ZWJwYWNrQ29udGV4dC5rZXlzID0gZnVuY3Rpb24gd2VicGFja0NvbnRleHRLZXlzKCkge1xuXHRyZXR1cm4gT2JqZWN0LmtleXMobWFwKTtcbn07XG53ZWJwYWNrQ29udGV4dC5yZXNvbHZlID0gd2VicGFja0NvbnRleHRSZXNvbHZlO1xubW9kdWxlLmV4cG9ydHMgPSB3ZWJwYWNrQ29udGV4dDtcbndlYnBhY2tDb250ZXh0LmlkID0gNDY3MDA7IiwiaW1wb3J0IEhQYXJzb25zRmVlZGJhY2sgZnJvbSBcIi4vaHBhcnNvbnNGZWVkYmFja1wiO1xuaW1wb3J0IEJsb2NrQmFzZWRHcmFkZXIgZnJvbSBcIi4vYmxvY2tHcmFkZXIuanNcIjtcbmltcG9ydCBcIi4uLy4uL3BhcnNvbnMvanMvcGFyc29ucy1pMThuLmVuLmpzXCI7XG5pbXBvcnQgXCIuLi8uLi9wYXJzb25zL2pzL3BhcnNvbnMtaTE4bi5wdC1ici5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbG9ja0ZlZWRiYWNrIGV4dGVuZHMgSFBhcnNvbnNGZWVkYmFjayB7XG4gICAgY3JlYXRlT3V0cHV0KCkge1xuICAgICAgICAvLyBCbG9jayBiYXNlZCBncmFkaW5nIG91dHB1dFxuICAgICAgICB0aGlzLm1lc3NhZ2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICB0aGlzLmhwYXJzb25zLm91dGVyRGl2LmFwcGVuZENoaWxkKHRoaXMubWVzc2FnZURpdik7XG4gICAgfVxuICAgIGN1c3RvbWl6ZVVJKCkge1xuICAgICAgICAkKHRoaXMuaHBhcnNvbnMucnVuQnV0dG9uKS50ZXh0KCdDaGVjayBNZScpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuY2hlY2tDb3VudCA9IDA7XG4gICAgICAgIHRoaXMuc29sdmVkID0gZmFsc2U7XG4gICAgICAgIC8vIFRPRE86IG5vdCBzdXJlIHdoYXQgaXMgdGhlIGJlc3Qgd2F5IHRvIGRvIHRoaXNcbiAgICAgICAgdGhpcy5ncmFkZXIgPSBuZXcgQmxvY2tCYXNlZEdyYWRlcigpO1xuICAgICAgICBsZXQgc29sdXRpb25CbG9ja3MgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmhwYXJzb25zLmJsb2NrQW5zd2VyLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBzb2x1dGlvbkJsb2Nrcy5wdXNoKHRoaXMuaHBhcnNvbnMub3JpZ2luYWxCbG9ja3NbdGhpcy5ocGFyc29ucy5ibG9ja0Fuc3dlcltpXV0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc29sdXRpb24gPSBzb2x1dGlvbkJsb2NrcztcbiAgICAgICAgdGhpcy5ncmFkZXIuc29sdXRpb24gPSBzb2x1dGlvbkJsb2NrcztcbiAgICAgICAgdGhpcy5hbnN3ZXJBcmVhID0gdGhpcy5ocGFyc29ucy5ocGFyc29uc0lucHV0LnF1ZXJ5U2VsZWN0b3IoJy5kcm9wLWFyZWEnKTtcbiAgICB9XG5cbiAgICAvLyBDYWxsZWQgd2hlbiBjaGVjayBidXR0b24gY2xpY2tlZCAoYmxvY2stYmFzZWQgRmVlZGJhY2spXG4gICAgYXN5bmMgcnVuQnV0dG9uSGFuZGxlcigpIHtcbiAgICAgICAgdGhpcy5jaGVja0N1cnJlbnRBbnN3ZXIoKTtcbiAgICAgICAgdGhpcy5sb2dDdXJyZW50QW5zd2VyKCk7XG4gICAgICAgIHRoaXMucmVuZGVyRmVlZGJhY2soKTtcbiAgICB9XG5cbiAgICBhc3luYyBsb2dDdXJyZW50QW5zd2VyKCkge1xuICAgICAgICBsZXQgYWN0ID0ge1xuICAgICAgICAgICAgc2NoZW1lOiBcImJsb2NrXCIsXG4gICAgICAgICAgICBjb3JyZWN0OiB0aGlzLmdyYWRlci5ncmFkZXJTdGF0ZSA9PSAnY29ycmVjdCcgPyBcIlRcIiA6IFwiRlwiLFxuICAgICAgICAgICAgYW5zd2VyOiB0aGlzLmhwYXJzb25zLmhwYXJzb25zSW5wdXQuZ2V0UGFyc29uc1RleHRBcnJheSgpLFxuICAgICAgICAgICAgcGVyY2VudDogdGhpcy5ncmFkZXIucGVyY2VudFxuICAgICAgICB9XG4gICAgICAgIGxldCBsb2dEYXRhID0ge1xuICAgICAgICAgICAgZXZlbnQ6IFwiaHBhcnNvbnNBbnN3ZXJcIixcbiAgICAgICAgICAgIGRpdl9pZDogdGhpcy5ocGFyc29ucy5kaXZpZCxcbiAgICAgICAgICAgIGFjdDogSlNPTi5zdHJpbmdpZnkoYWN0KSxcbiAgICAgICAgICAgIGFuc3dlcjogSlNPTi5zdHJpbmdpZnkoe1wiYmxvY2tzXCI6IGFjdC5hbnN3ZXJ9KSxcbiAgICAgICAgICAgIHBlcmNlbnQ6IHRoaXMuZ3JhZGVyLnBlcmNlbnQsXG4gICAgICAgICAgICBjb3JyZWN0OiBhY3QuY29ycmVjdCxcbiAgICAgICAgfVxuICAgICAgICBhd2FpdCB0aGlzLmhwYXJzb25zLmxvZ0Jvb2tFdmVudChsb2dEYXRhKTtcbiAgICB9XG5cbiAgICAvLyBVc2VkIGZvciBibG9jay1iYXNlZCBmZWVkYmFja1xuICAgIGNoZWNrQ3VycmVudEFuc3dlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLnNvbHZlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvdW50Kys7XG4gICAgICAgICAgICB0aGlzLmNsZWFyRmVlZGJhY2soKTtcbiAgICAgICAgICAgIHRoaXMuZ3JhZGVyLmFuc3dlciA9IHRoaXMuaHBhcnNvbnMuaHBhcnNvbnNJbnB1dC5nZXRQYXJzb25zVGV4dEFycmF5KCk7XG4gICAgICAgICAgICB0aGlzLmdyYWRlID0gdGhpcy5ncmFkZXIuZ3JhZGUoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdyYWRlID09IFwiY29ycmVjdFwiKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzLmhwYXJzb25zLnJ1bkJ1dHRvbikucHJvcChcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc29sdmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlbmRlckZlZWRiYWNrKCkge1xuICAgICAgICB0aGlzLmdyYWRlID0gdGhpcy5ncmFkZXIuZ3JhZGVyU3RhdGU7XG4gICAgICAgIHZhciBmZWVkYmFja0FyZWE7XG4gICAgICAgIHZhciBhbnN3ZXJBcmVhID0gJCh0aGlzLmFuc3dlckFyZWEpO1xuICAgICAgICBmZWVkYmFja0FyZWEgPSAkKHRoaXMubWVzc2FnZURpdik7XG5cbiAgICAgICAgaWYgKHRoaXMuZ3JhZGUgPT09IFwiY29ycmVjdFwiKSB7XG4gICAgICAgICAgICBhbnN3ZXJBcmVhLmFkZENsYXNzKFwiY29ycmVjdFwiKTtcbiAgICAgICAgICAgIGZlZWRiYWNrQXJlYS5mYWRlSW4oMTAwKTtcbiAgICAgICAgICAgIGZlZWRiYWNrQXJlYS5hdHRyKFwiY2xhc3NcIiwgXCJhbGVydCBhbGVydC1pbmZvXCIpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hlY2tDb3VudCA+IDEpIHtcbiAgICAgICAgICAgICAgICBmZWVkYmFja0FyZWEuaHRtbChcbiAgICAgICAgICAgICAgICAgICAgJC5pMThuKFwibXNnX3BhcnNvbl9jb3JyZWN0XCIsIHRoaXMuY2hlY2tDb3VudClcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBmZWVkYmFja0FyZWEuaHRtbCgkLmkxOG4oXCJtc2dfcGFyc29uX2NvcnJlY3RfZmlyc3RfdHJ5XCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY2hlY2tDb3VudCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5ncmFkZSA9PT0gXCJpbmNvcnJlY3RUb29TaG9ydFwiKSB7XG4gICAgICAgICAgICAvLyB0b28gbGl0dGxlIGNvZGVcbiAgICAgICAgICAgIGFuc3dlckFyZWEuYWRkQ2xhc3MoXCJpbmNvcnJlY3RcIik7XG4gICAgICAgICAgICBmZWVkYmFja0FyZWEuZmFkZUluKDUwMCk7XG4gICAgICAgICAgICBmZWVkYmFja0FyZWEuYXR0cihcImNsYXNzXCIsIFwiYWxlcnQgYWxlcnQtZGFuZ2VyXCIpO1xuICAgICAgICAgICAgZmVlZGJhY2tBcmVhLmh0bWwoJC5pMThuKFwibXNnX3BhcnNvbl90b29fc2hvcnRcIikpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZ3JhZGUgPT09IFwiaW5jb3JyZWN0TW92ZUJsb2Nrc1wiKSB7XG4gICAgICAgICAgICB2YXIgYW5zd2VyQmxvY2tzID0gdGhpcy5hbnN3ZXJBcmVhLmNoaWxkcmVuO1xuICAgICAgICAgICAgdmFyIGluU29sdXRpb24gPSBbXTtcbiAgICAgICAgICAgIHZhciBpblNvbHV0aW9uSW5kZXhlcyA9IFtdO1xuICAgICAgICAgICAgdmFyIG5vdEluU29sdXRpb24gPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW5zd2VyQmxvY2tzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGJsb2NrID0gYW5zd2VyQmxvY2tzW2ldO1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuc29sdXRpb24uaW5kZXhPZihibG9jay50ZXh0Q29udGVudCk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIG5vdEluU29sdXRpb24ucHVzaChibG9jayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5Tb2x1dGlvbi5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgaW5Tb2x1dGlvbkluZGV4ZXMucHVzaChpbmRleCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGxpc0luZGV4ZXMgPSB0aGlzLmdyYWRlci5pbnZlcnNlTElTSW5kaWNlcyhpblNvbHV0aW9uSW5kZXhlcyk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpc0luZGV4ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBub3RJblNvbHV0aW9uLnB1c2goaW5Tb2x1dGlvbltsaXNJbmRleGVzW2ldXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhbnN3ZXJBcmVhLmFkZENsYXNzKFwiaW5jb3JyZWN0XCIpO1xuICAgICAgICAgICAgZmVlZGJhY2tBcmVhLmZhZGVJbig1MDApO1xuICAgICAgICAgICAgZmVlZGJhY2tBcmVhLmF0dHIoXCJjbGFzc1wiLCBcImFsZXJ0IGFsZXJ0LWRhbmdlclwiKTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbm90SW5Tb2x1dGlvbi5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICQobm90SW5Tb2x1dGlvbltpXSkuYWRkQ2xhc3MoXCJpbmNvcnJlY3RQb3NpdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZlZWRiYWNrQXJlYS5odG1sKCQuaTE4bihcIm1zZ19wYXJzb25fd3Jvbmdfb3JkZXJcIikpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmVlZGJhY2sgVUkgZm9yIEJsb2NrLWJhc2VkIEZlZWRiYWNrXG4gICAgY2xlYXJGZWVkYmFjaygpIHtcbiAgICAgICAgJCh0aGlzLmFuc3dlckFyZWEpLnJlbW92ZUNsYXNzKFwiaW5jb3JyZWN0IGNvcnJlY3RcIik7XG4gICAgICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuYW5zd2VyQXJlYS5jaGlsZE5vZGVzO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAkKGNoaWxkcmVuW2ldKS5yZW1vdmVDbGFzcyhcbiAgICAgICAgICAgICAgICBcImNvcnJlY3RQb3NpdGlvbiBpbmNvcnJlY3RQb3NpdGlvblwiXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcy5tZXNzYWdlRGl2KS5oaWRlKCk7XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIGlmICh0aGlzLnNvbHZlZCkge1xuICAgICAgICAgICAgdGhpcy5jaGVja0NvdW50ID0gMDtcbiAgICAgICAgICAgICQodGhpcy5ocGFyc29ucy5ydW5CdXR0b24pLnByb3AoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICB0aGlzLnNvbHZlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2xlYXJGZWVkYmFjaygpO1xuICAgIH1cblxufVxuIiwiaW1wb3J0IEhQYXJzb25zRmVlZGJhY2sgZnJvbSBcIi4vaHBhcnNvbnNGZWVkYmFja1wiO1xuaW1wb3J0IGluaXRTcWxKcyBmcm9tIFwic3FsLmpzL2Rpc3Qvc3FsLXdhc20uanNcIjtcbmltcG9ydCBIYW5kc29udGFibGUgZnJvbSBcImhhbmRzb250YWJsZVwiO1xuaW1wb3J0ICdoYW5kc29udGFibGUvZGlzdC9oYW5kc29udGFibGUuZnVsbC5jc3MnO1xuXG52YXIgYWxsRGJ1cmxzID0ge307XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNRTEZlZWRiYWNrIGV4dGVuZHMgSFBhcnNvbnNGZWVkYmFjayB7XG5cbiAgICBjcmVhdGVPdXRwdXQoKSB7XG4gICAgICAgIHZhciBvdXREaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAkKG91dERpdikuYWRkQ2xhc3MoXCJocF9vdXRwdXQgY29sLW1kLTEyXCIpO1xuICAgICAgICB0aGlzLm91dERpdiA9IG91dERpdjtcbiAgICAgICAgdGhpcy5vdXRwdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgICB0aGlzLm91dHB1dC5pZCA9IHRoaXMuaHBhcnNvbnMuZGl2aWQgKyBcIl9zdGRvdXRcIjtcbiAgICAgICAgJCh0aGlzLm91dHB1dCkuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgdmFyIGNsZWFyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgJChjbGVhckRpdikuY3NzKFwiY2xlYXJcIiwgXCJib3RoXCIpOyAvLyBuZWVkZWQgdG8gbWFrZSBwYXJlbnQgZGl2IHJlc2l6ZSBwcm9wZXJseVxuICAgICAgICB0aGlzLmhwYXJzb25zLm91dGVyRGl2LmFwcGVuZENoaWxkKGNsZWFyRGl2KTtcbiAgICAgICAgb3V0RGl2LmFwcGVuZENoaWxkKHRoaXMub3V0cHV0KTtcbiAgICAgICAgdGhpcy5ocGFyc29ucy5vdXRlckRpdi5hcHBlbmRDaGlsZChvdXREaXYpO1xuICAgICAgICBjbGVhckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICQoY2xlYXJEaXYpLmNzcyhcImNsZWFyXCIsIFwiYm90aFwiKTsgLy8gbmVlZGVkIHRvIG1ha2UgcGFyZW50IGRpdiByZXNpemUgcHJvcGVybHlcbiAgICAgICAgdGhpcy5ocGFyc29ucy5vdXRlckRpdi5hcHBlbmRDaGlsZChjbGVhckRpdik7XG4gICAgfVxuXG4gICAgcmVuZGVyRmVlZGJhY2soKSB7XG4gICAgICAgIGlmICh0aGlzLnRlc3RSZXN1bHQpIHtcbiAgICAgICAgICAgICQodGhpcy5vdXRwdXQpLnRleHQodGhpcy50ZXN0UmVzdWx0KTtcbiAgICAgICAgICAgICQodGhpcy5vdXRwdXQpLmNzcyhcInZpc2liaWxpdHlcIiwgXCJ2aXNpYmxlXCIpO1xuICAgICAgICB9XG4gICAgICAgICQodGhpcy5vdXREaXYpLnNob3coKTtcbiAgICB9XG5cbiAgICBjbGVhckZlZWRiYWNrKCkge1xuICAgICAgICAkKHRoaXMub3V0RGl2KS5oaWRlKCk7XG4gICAgfVxuXG4gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuY2xlYXJGZWVkYmFjaygpO1xuICAgIH1cblxuICAgIGluaXQoKSB7XG4gICAgICAgIC8vIGFkYXB0ZWQgZnJvbSBhY3RpdmVjb2RlLXNxbFxuICAgICAgICAvLyBmbnByZWZpeCBzZXRzIHRoZSBwYXRoIHRvIGxvYWQgdGhlIHNxbC13YXNtLndhc20gZmlsZVxuICAgICAgICB2YXIgYm9va3ByZWZpeDtcbiAgICAgICAgdmFyIGZucHJlZml4O1xuICAgICAgICBpZiAoXG4gICAgICAgICAgICBlQm9va0NvbmZpZy51c2VSdW5lc3RvbmVTZXJ2aWNlcyB8fFxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcyhcIm1vZGU9YnJvd3NpbmdcIilcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBib29rcHJlZml4ID0gYCR7ZUJvb2tDb25maWcuYXBwfS9ib29rcy9wdWJsaXNoZWQvJHtlQm9va0NvbmZpZy5iYXNlY291cnNlfWA7XG4gICAgICAgICAgICBmbnByZWZpeCA9IGJvb2twcmVmaXggKyBcIi9fc3RhdGljXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBUaGUgZWxzZSBjbGF1c2UgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSB5b3UgYXJlIGJ1aWxkaW5nIGZvciBhIHN0YXRpYyB3ZWIgYnJvd3NlclxuICAgICAgICAgICAgYm9va3ByZWZpeCA9IFwiXCI7XG4gICAgICAgICAgICBmbnByZWZpeCA9IFwiL19zdGF0aWNcIjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgU1FMY29uZmlnID0ge1xuICAgICAgICAgICAgbG9jYXRlRmlsZTogKGZpbGVuYW1lKSA9PiBgJHtmbnByZWZpeH0vJHtmaWxlbmFtZX1gLFxuICAgICAgICB9O1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXMuaHBhcnNvbnM7XG4gICAgICAgIGluaXRTcWxKcyhTUUxjb25maWcpLnRoZW4oZnVuY3Rpb24gKFNRTCkge1xuICAgICAgICAgICAgLy8gc2V0IHVwIGNhbGwgdG8gbG9hZCBkYXRhYmFzZSBhc3luY2hyb25vdXNseSBpZiBnaXZlblxuICAgICAgICAgICAgaWYgKHNlbGYuZGJ1cmwpIHtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5kYnVybC5zdGFydHNXaXRoKFwiL19zdGF0aWNcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYnVybCA9IGAke2Jvb2twcmVmaXh9JHtzZWxmLmRidXJsfWA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICQoc2VsZi5ydW5CdXR0b24pLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgIGxldCBidXR0b25UZXh0ID0gJChzZWxmLnJ1bkJ1dHRvbikudGV4dCgpO1xuICAgICAgICAgICAgICAgICQoc2VsZi5ydW5CdXR0b24pLnRleHQoJC5pMThuKFwibXNnX2FjdGl2ZWNvZGVfbG9hZF9kYlwiKSk7XG4gICAgICAgICAgICAgICAgaWYgKCEoc2VsZi5kYnVybCBpbiBhbGxEYnVybHMpKSB7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJsb2FkaW5nXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICB4V2FpdEZvcjogalF1ZXJ5LkRlZmVycmVkKCksXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbERidXJsc1tzZWxmLmRidXJsXS5zdGF0dXMgPT0gXCJsb2FkaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS54V2FpdEZvci5kb25lKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmRiID0gYWxsRGJ1cmxzW3NlbGYuZGJ1cmxdLmRiT2JqZWN0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoc2VsZi5ydW5CdXR0b24pLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS50ZXh0KGJ1dHRvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2VsZi5kYiA9IGFsbERidXJsc1tzZWxmLmRidXJsXS5kYk9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgJChzZWxmLnJ1bkJ1dHRvbikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS50ZXh0KGJ1dHRvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAvLyBGb3IgZXhhbXBsZTogaHR0cHM6Ly9naXRodWIuY29tL2xlcm9jaGEvY2hpbm9vay1kYXRhYmFzZS9yYXcvbWFzdGVyL0NoaW5vb2tEYXRhYmFzZS9EYXRhU291cmNlcy9DaGlub29rX1NxbGl0ZS5zcWxpdGVcbiAgICAgICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCBzZWxmLmRidXJsLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gXCJhcnJheWJ1ZmZlclwiO1xuICAgICAgICAgICAgICAgIHhoci5vbmxvYWQgPSAoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdUludDhBcnJheSA9IG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZGIgPSBuZXcgU1FMLkRhdGFiYXNlKHVJbnQ4QXJyYXkpO1xuICAgICAgICAgICAgICAgICAgICBhbGxEYnVybHNbc2VsZi5kYnVybF0uZGJPYmplY3QgPSBzZWxmLmRiO1xuICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS50ZXh0KGJ1dHRvblRleHQpO1xuICAgICAgICAgICAgICAgICAgICAkKHNlbGYucnVuQnV0dG9uKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS5kYiA9IHVJbnQ4QXJyYXk7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS5zdGF0dXMgPSBcInJlYWR5XCI7XG4gICAgICAgICAgICAgICAgICAgIGFsbERidXJsc1tzZWxmLmRidXJsXS54V2FpdEZvci5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRzIGlzIG5vdyBbe2NvbHVtbnM6Wydjb2wxJywnY29sMicsLi4uXSwgdmFsdWVzOltbZmlyc3Qgcm93XSwgW3NlY29uZCByb3ddLCAuLi5dfV1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHhoci5zZW5kKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNlbGYuZGIgPSBuZXcgU1FMLkRhdGFiYXNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIGFkYXB0ZWQgZnJvbSBhY3RpdmVjb2RlIC0gU1FMXG4gICAgYXN5bmMgcnVuQnV0dG9uSGFuZGxlcigpIHtcbiAgICAgICAgLy8gRGlzYWJsZSB0aGUgcnVuIGJ1dHRvbiB1bnRpbCB0aGUgcnVuIGlzIGZpbmlzaGVkLlxuICAgICAgICB0aGlzLmhwYXJzb25zLnJ1bkJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB0aGlzLnJ1blByb2coKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coYHRoZXJlIHdhcyBhbiBlcnJvciAke2V9IHJ1bm5pbmcgdGhlIGNvZGVgKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvZ0N1cnJlbnRBbnN3ZXIoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJGZWVkYmFjaygpO1xuICAgICAgICAvLyBUaGUgcnVuIGlzIGZpbmlzaGVkOyByZS1lbmFibGUgdGhlIGJ1dHRvbi5cbiAgICAgICAgdGhpcy5ocGFyc29ucy5ydW5CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBhZGFwdGVkIGZyb20gYWN0aXZlY29kZS1zcWxcbiAgICBhc3luYyBydW5Qcm9nKCkge1xuICAgICAgICAvLyBDbGVhciBhbnkgb2xkIHJlc3VsdHNcbiAgICAgICAgbGV0IGRpdmlkID0gdGhpcy5ocGFyc29ucy5kaXZpZCArIFwiX3NxbF9vdXRcIjtcbiAgICAgICAgbGV0IHJlc3BEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChkaXZpZCk7XG4gICAgICAgIGlmIChyZXNwRGl2KSB7XG4gICAgICAgICAgICByZXNwRGl2LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQocmVzcERpdik7XG4gICAgICAgIH1cbiAgICAgICAgJCh0aGlzLm91dHB1dCkudGV4dChcIlwiKTtcbiAgICAgICAgLy8gY3JlYXRpbmcgbmV3IHJlc3VsdHMgZGl2XG4gICAgICAgIHJlc3BEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICByZXNwRGl2LmlkID0gZGl2aWQ7XG4gICAgICAgIHRoaXMub3V0RGl2LmFwcGVuZENoaWxkKHJlc3BEaXYpO1xuICAgICAgICAvLyBzaG93IHRoZSBvdXRwdXQgZGl2XG4gICAgICAgICQodGhpcy5vdXREaXYpLnNob3coKTtcblxuICAgICAgICAvLyBSdW4gdGhpcyBxdWVyeVxuICAgICAgICBsZXQgcXVlcnkgPSBhd2FpdCB0aGlzLmJ1aWxkUHJvZygpO1xuICAgICAgICBpZiAoIXRoaXMuaHBhcnNvbnMuZGIpIHtcbiAgICAgICAgICAgICQodGhpcy5vdXRwdXQpLnRleHQoXG4gICAgICAgICAgICAgICAgYEVycm9yOiBEYXRhYmFzZSBub3QgaW5pdGlhbGl6ZWQhIERCVVJMOiAke3RoaXMuaHBhcnNvbnMuZGJ1cmx9YFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFdoZW4gaGF2aW5nIHByZWZpeC9zdWZmaXgsIHRoZSB2aXN1YWxpemF0aW9uIGlzIGNvbnNpc3RlbnQgd2l0aCBcInNob3dsYXN0c3FsXCIgb3B0aW9uIG9mIHNxbCBhY3RpdmVjb2RlOlxuICAgICAgICAvLyAgICAgICAgb25seSB2aXN1YWxpemUgbGFzdCBlbnRyeVxuXG4gICAgICAgIGxldCBleGVjdXRpb25TdWNjZXNzRmxhZyA9IHRydWU7XG4gICAgICAgIC8vIGV4ZWN1dGluZyBoaWRkZW4gcHJlZml4IGlmIGV4aXN0XG4gICAgICAgIGlmIChxdWVyeS5wcmVmaXgpIHtcbiAgICAgICAgICAgIHRoaXMucHJlZml4cmVzdWx0cyA9IHRoaXMuZXhlY3V0ZUl0ZXJhdGVkU3RhdGVtZW50cyh0aGlzLmhwYXJzb25zLmRiLml0ZXJhdGVTdGF0ZW1lbnRzKHF1ZXJ5LnByZWZpeCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMucHJlZml4cmVzdWx0cy5hdCgtMSkuc3RhdHVzID09ICdmYWlsdXJlJykge1xuICAgICAgICAgICAgICAgIC8vIGlmIGVycm9yIG9jY3VyZWQgaW4gaGlkZGVuIHByZWZpeCwgbG9nIGFuZCBzdG9wIGV4ZWN1dGluZyB0aGUgcmVzdFxuICAgICAgICAgICAgICAgIHRoaXMudmlzdWFsaXplUmVzdWx0cyhyZXNwRGl2LCB0aGlzLnByZWZpeHJlc3VsdHMsIFwiRXJyb3IgZXhlY3V0aW5nIGhpZGRlbiBjb2RlIGluIHByZWZpeFwiKTtcbiAgICAgICAgICAgICAgICBleGVjdXRpb25TdWNjZXNzRmxhZyA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gZXhlY3V0aW5nIHN0dWRlbnQgaW5wdXQgaW4gbWljcm8gUGFyc29uc1xuICAgICAgICBpZiAoZXhlY3V0aW9uU3VjY2Vzc0ZsYWcpIHtcbiAgICAgICAgICAgIHRoaXMucmVzdWx0cyA9IHRoaXMuZXhlY3V0ZUl0ZXJhdGVkU3RhdGVtZW50cyh0aGlzLmhwYXJzb25zLmRiLml0ZXJhdGVTdGF0ZW1lbnRzKHF1ZXJ5LmlucHV0KSk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZXN1bHRzLmF0KC0xKS5zdGF0dXMgPT0gJ2ZhaWx1cmUnKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgZXJyb3Igb2NjdXJlZCBpbiBzdHVkZW50IGlucHV0LCBzdG9wIGV4ZWN1dGluZyBzdWZmaXgvdW5pdHR0ZXN0IFxuICAgICAgICAgICAgICAgIC8vIGFuZCB2aXN1YWxpemUgdGhlIGVycm9yXG4gICAgICAgICAgICAgICAgdGhpcy52aXN1YWxpemVSZXN1bHRzKHJlc3BEaXYsIHRoaXMucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgZXhlY3V0aW9uU3VjY2Vzc0ZsYWcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoIXF1ZXJ5LnN1ZmZpeCkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzdWFsaXplUmVzdWx0cyhyZXNwRGl2LCB0aGlzLnJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBleGVjdXRpbmcgaGlkZGVuIHN1ZmZpeCBpZiBleGlzdFxuICAgICAgICAvLyBJbiBtb3N0IGNhc2VzIHRoZSBzdWZmaXggaXMganVzdCBcInNlbGVjdCAqIGZyb20geFwiIHRvIFxuICAgICAgICAvLyAgICBnZXQgYWxsIGRhdGEgZnJvbSB0aGUgdGFibGUgdG8gc2VlIGlmIHRoZSBvcGVyYXRpb25zIHRoZSB0YWJsZSBpcyBjb3JyZWN0XG4gICAgICAgIGlmIChleGVjdXRpb25TdWNjZXNzRmxhZyAmJiBxdWVyeS5zdWZmaXgpIHtcbiAgICAgICAgICAgIHRoaXMuc3VmZml4cmVzdWx0cyA9IHRoaXMuZXhlY3V0ZUl0ZXJhdGVkU3RhdGVtZW50cyh0aGlzLmhwYXJzb25zLmRiLml0ZXJhdGVTdGF0ZW1lbnRzKHF1ZXJ5LnN1ZmZpeCkpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3VmZml4cmVzdWx0cy5hdCgtMSkuc3RhdHVzID09ICdmYWlsdXJlJykge1xuICAgICAgICAgICAgICAgIC8vIGlmIGVycm9yIG9jY3VyZWQgaW4gaGlkZGVuIHN1ZmZpeCwgdmlzdWFsaXplIHRoZSByZXN1bHRzXG4gICAgICAgICAgICAgICAgdGhpcy52aXN1YWxpemVSZXN1bHRzKHJlc3BEaXYsIHRoaXMuc3VmZml4cmVzdWx0cywgXCJFcnJvciBleGVjdXRpbmcgaGlkZGVuIGNvZGUgaW4gc3VmZml4XCIpO1xuICAgICAgICAgICAgICAgIGV4ZWN1dGlvblN1Y2Nlc3NGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMudmlzdWFsaXplUmVzdWx0cyhyZXNwRGl2LCB0aGlzLnN1ZmZpeHJlc3VsdHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTm93IGhhbmRsZSBhdXRvZ3JhZGluZ1xuICAgICAgICAvLyBhdXRvZ3JhZGluZyB0YWtlcyB0aGUgcmVzdWx0cyBvZiB0aGUgaGlkZGVuIHN1ZmZpeCBpZiBleGlzdFxuICAgICAgICAvLyBvdGhlcndpc2UgdGFrZSB0aGUgcmVzdWx0IG9mIHN0dWRlbnQgaW5wdXRcbiAgICAgICAgaWYgKHRoaXMuaHBhcnNvbnMudW5pdHRlc3QpIHtcbiAgICAgICAgICAgIGlmIChleGVjdXRpb25TdWNjZXNzRmxhZykge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN1ZmZpeHJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXN0UmVzdWx0ID0gdGhpcy5hdXRvZ3JhZGUoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN1ZmZpeHJlc3VsdHNbdGhpcy5zdWZmaXhyZXN1bHRzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXN0UmVzdWx0ID0gdGhpcy5hdXRvZ3JhZGUoXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdHNbdGhpcy5yZXN1bHRzLmxlbmd0aCAtIDFdXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyB1bml0IHRlc3QgcmVzdWx0cyB3aGVuIGV4ZWN1dGlvbiBmYWlsZWRcbiAgICAgICAgICAgICAgICB0aGlzLnBhc3NlZCA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5mYWlsZWQgPSAwO1xuICAgICAgICAgICAgICAgIHRoaXMucGVyY2VudCA9IE5hTjtcbiAgICAgICAgICAgICAgICB0aGlzLnVuaXRfcmVzdWx0cyA9IGBwZXJjZW50OiR7dGhpcy5wZXJjZW50fTpwYXNzZWQ6JHt0aGlzLnBhc3NlZH06ZmFpbGVkOiR7dGhpcy5mYWlsZWR9YDtcbiAgICAgICAgICAgICAgICAvLyBEbyBub3Qgc2hvdyB1bml0dGVzdCByZXN1bHRzIGlmIGV4ZWN1dGlvbiBmYWlsZWRcbiAgICAgICAgICAgICAgICAkKHRoaXMub3V0cHV0KS5jc3MoXCJ2aXNpYmlsaXR5XCIsIFwiaGlkZGVuXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJCh0aGlzLm91dHB1dCkuY3NzKFwidmlzaWJpbGl0eVwiLCBcImhpZGRlblwiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoXCJkb25lXCIpO1xuICAgIH1cblxuICAgIC8vIFJlZmFjdG9yZWQgZnJvbSBhY3RpdmVjb2RlLXNxbC5cbiAgICAvLyBUYWtlcyBpdGVyYXRlZCBzdGF0ZW1lbnRzIGZyb20gZGIuaXRlcmF0ZVN0YXRlbW50cyhxdWVyeVN0cmluZylcbiAgICAvLyBSZXR1cm5zIEFycmF5PHJlc3VsdD46XG4gICAgLyogZWFjaCByZXN1bHQ6IHtcbiAgICAgICAgc3RhdHVzOiBcInN1Y2Nlc3NcIiBvciBcImZhbGl1cmVcIixcbiAgICAgICAgLy8gZm9yIFNFTEVDVCBzdGF0ZW1lbnRzICg/KTpcbiAgICAgICAgY29sdW1uczogbnVtYmVyIG9mIGNvbHVtbnMsXG4gICAgICAgIHZhbHVlczogZGF0YSxcbiAgICAgICAgcm93Y291bnQ6IG51bWJlciBvZiByb3dzIGluIGRhdGEsXG4gICAgICAgIC8vIGZvciBJTlNFUlQsIFVQREFURSwgREVMRVRFOlxuICAgICAgICBvcGVyYXRpb246IFwiSU5TRVJUXCIsIFwiVVBEQVRFXCIsIG9yIFwiREVMRVRFXCIsXG4gICAgICAgIHJvd2NvdW50OiBudW1iZXIgb2Ygcm93cyBtb2RpZmllZCxcbiAgICAgICAgLy8gd2hlbiBlcnJvciBvY2N1cnJlZCAoYXNpZGUgZnJvbSBzdGF0dXMpOlxuICAgICAgICBtZXNzYWdlOiBlcnJvciBtZXNzYWdlLFxuICAgICAgICBzcWw6IHJlbWFpbmluZyBTUUwgKD8pXG4gICAgICAgIC8vIHdoZW4gbm8gcXVlcmllcyB3ZXJlIGV4ZWN1dGVkOlxuICAgICAgICBtZXNzYWdlOiBcIm5vIHF1ZXJpZXMgc3VibWl0dGVkXCJcbiAgICB9Ki9cbiAgICAvLyBJZiBhbiBlcnJvciBvY2N1cnMgaXQgd2lsbCBzdG9wIGV4ZWN1dGluZyB0aGUgcmVzdCBvZiBxdWVyaWVzIGluIGl0LlxuICAgIC8vIFRodXMgdGhlIGVycm9yIHJlc3VsdCB3aWxsIGFsd2F5cyBiZSB0aGUgbGFzdCBpdGVtLlxuICAgIGV4ZWN1dGVJdGVyYXRlZFN0YXRlbWVudHMoaXQpIHtcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAobGV0IHN0YXRlbWVudCBvZiBpdCkge1xuICAgICAgICAgICAgICAgIGxldCBjb2x1bW5zID0gc3RhdGVtZW50LmdldENvbHVtbk5hbWVzKCk7XG4gICAgICAgICAgICAgICAgaWYgKGNvbHVtbnMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBkYXRhISBwcm9iYWJseSBhIFNFTEVDVFxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAoc3RhdGVtZW50LnN0ZXAoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5wdXNoKHN0YXRlbWVudC5nZXQoKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2x1bW5zOiBjb2x1bW5zLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBkYXRhLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm93Y291bnQ6IGRhdGEubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZXQgbnNxbCA9IHN0YXRlbWVudC5nZXROb3JtYWxpemVkU1FMKCk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSBuc3FsLnN1YnN0cigwLCA2KS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZW1lbnQuc3RlcCgpOyAvLyBleGVjdXRlIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgICAgICAvLyBUcnkgdG8gZGV0ZWN0IElOU0VSVC9VUERBVEUvREVMRVRFIHRvIGdpdmUgZnJpZW5kbHkgZmVlZGJhY2tcbiAgICAgICAgICAgICAgICAgICAgLy8gb24gcm93cyBtb2RpZmllZCAtIHVuZm9ydHVuYXRlbHksIHRoaXMgd29uJ3QgY2F0Y2ggc3VjaCBxdWVyaWVzXG4gICAgICAgICAgICAgICAgICAgIC8vIGlmIHRoZXkgdXNlIENURXMuICBUaGVyZSBzZWVtcyB0byBiZSBubyByZWxpYWJsZSB3YXkgb2Yga25vd2luZ1xuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIGEgU1FMaXRlIHF1ZXJ5IGFjdHVhbGx5IG1vZGlmaWVkIGRhdGEuXG4gICAgICAgICAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZWZpeCA9PT0gXCJpbnNlcnRcIiB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJlZml4ID09PSBcInVwZGF0ZVwiIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmVmaXggPT09IFwiZGVsZXRlXCJcbiAgICAgICAgICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1czogXCJzdWNjZXNzXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0aW9uOiBwcmVmaXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93Y291bnQ6IHRoaXMuaHBhcnNvbnMuZGIuZ2V0Um93c01vZGlmaWVkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7IHN0YXR1czogXCJzdWNjZXNzXCIgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7XG4gICAgICAgICAgICAgICAgc3RhdHVzOiBcImZhaWx1cmVcIixcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgc3FsOiBpdC5nZXRSZW1haW5pbmdTUUwoKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICAgICAgICBzdGF0dXM6IFwiZmFpbHVyZVwiLFxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwiTm8gcXVlcmllcyBzdWJtaXR0ZWQuXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICB9XG5cbiAgICAvLyBvdXRwdXQgdGhlIHJlc3VsdHMgaW4gdGhlIHJlc3VsdEFycmF5KEFycmF5PHJlc3VsdHM+KS5cbiAgICAvLyBjb250YWluZXI6IHRoZSBjb250YWluZXIgdGhhdCBjb250YWlucyB0aGUgcmVzdWx0c1xuICAgIC8vIHJlc3VsdEFycmF5IChBcnJheTxyZXN1bHQ+KTogc2VlIGV4ZWN1dGVJdGVyYXRlZFN0YXRlbWVudHNcbiAgICAvLyBFYWNoIHJlc3VsdCB3aWxsIGJlIGluIGEgc2VwYXJhdGUgcm93LlxuICAgIC8vIGRldk5vdGUgd2lsbCBiZSBkaXNwbGF5ZWQgaW4gdGhlIHRvcCByb3cgaWYgZXhpc3Q7XG4gICAgLy8gICAgIGl0IHVzdWFsbHkgd29uJ3QgaGFwcGVuIHVubGVzcyBzb21ldGhpbmcgaXMgd3Jvbmcgd2l0aCBwcmVmaXggYW5kIHN1ZmZpeC5cbiAgICAvLyAgICAgKFwiZXJyb3IgZXhlY3V0aW9uIHByZWZpeC9zdWZmaXhcIilcbiAgICB2aXN1YWxpemVSZXN1bHRzKGNvbnRhaW5lciwgcmVzdWx0QXJyYXksIGRldk5vdGUpIHtcbiAgICAgICAgaWYgKGRldk5vdGUpIHtcbiAgICAgICAgICAgIGxldCBzZWN0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgICAgIHNlY3Rpb24uc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJocF9zcWxfcmVzdWx0XCIpO1xuICAgICAgICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHNlY3Rpb24pO1xuICAgICAgICAgICAgbGV0IG1lc3NhZ2VCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgICAgICAgbWVzc2FnZUJveC50ZXh0Q29udGVudCA9IGRldk5vdGU7XG4gICAgICAgICAgICBtZXNzYWdlQm94LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaHBfc3FsX3Jlc3VsdF9mYWlsdXJlXCIpO1xuICAgICAgICAgICAgc2VjdGlvbi5hcHBlbmRDaGlsZChtZXNzYWdlQm94KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGxldCByIG9mIHJlc3VsdEFycmF5KSB7XG4gICAgICAgICAgICBsZXQgc2VjdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICBzZWN0aW9uLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaHBfc3FsX3Jlc3VsdFwiKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChzZWN0aW9uKTtcbiAgICAgICAgICAgIGlmIChyLnN0YXR1cyA9PT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICBpZiAoci5jb2x1bW5zKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCB0YWJsZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQodGFibGVEaXYpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWF4SGVpZ2h0ID0gMzUwO1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0QXJyYXkubGVuZ3RoID4gMSkgbWF4SGVpZ2h0ID0gMjAwOyAvLyBtYXggaGVpZ2h0IHNtYWxsZXIgaWYgbG90cyBvZiByZXN1bHRzXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZVRhYmxlKHIsIHRhYmxlRGl2LCBtYXhIZWlnaHQpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgbWVzc2FnZUJveCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwcmVcIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBybXNnID0gci5yb3djb3VudCAhPT0gMSA/IFwiIHJvd3MgXCIgOiBcIiByb3cgXCI7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtc2cgPSBcIlwiICsgci5yb3djb3VudCArIHJtc2cgKyBcInJldHVybmVkXCI7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyLnJvd2NvdW50ID4gMTAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBtc2cgKyBcIiAob25seSBmaXJzdCAxMDAgcm93cyBkaXNwbGF5ZWQpXCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgbXNnID0gbXNnICsgXCIuXCI7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSBtc2c7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJocF9zcWxfcmVzdWx0X3N1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQobWVzc2FnZUJveCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyLnJvd2NvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtZXNzYWdlQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInByZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG9wID0gci5vcGVyYXRpb247XG4gICAgICAgICAgICAgICAgICAgIG9wID0gb3AgKyAob3AuY2hhckF0KG9wLmxlbmd0aCAtIDEpID09PSBcImVcIiA/IFwiZC5cIiA6IFwiZWQuXCIpO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcm1zZyA9IHIucm93Y291bnQgIT09IDEgPyBcIiByb3dzIFwiIDogXCIgcm93IFwiO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnRleHRDb250ZW50ID0gXCJcIiArIHIucm93Y291bnQgKyBybXNnICsgb3A7XG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3guc2V0QXR0cmlidXRlKFwiY2xhc3NcIiwgXCJocF9zcWxfcmVzdWx0X3N1Y2Nlc3NcIik7XG4gICAgICAgICAgICAgICAgICAgIHNlY3Rpb24uYXBwZW5kQ2hpbGQobWVzc2FnZUJveCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnRleHRDb250ZW50ID0gXCJPcGVyYXRpb24gc3VjY2VlZGVkLlwiO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlQm94LnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwiaHBfc3FsX3Jlc3VsdF9zdWNjZXNzXCIpO1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKG1lc3NhZ2VCb3gpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IG1lc3NhZ2VCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwicHJlXCIpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2VCb3gudGV4dENvbnRlbnQgPSByLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgbWVzc2FnZUJveC5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcImhwX3NxbF9yZXN1bHRfZmFpbHVyZVwiKTtcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKG1lc3NhZ2VCb3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuIFxuICAgIC8vIGFkYXB0ZWQgZnJvbSBhY3RpdmVjb2RlXG4gICAgYXN5bmMgYnVpbGRQcm9nKCkge1xuICAgICAgICAvLyBhc3NlbWJsZSBjb2RlIGZyb20gcHJlZml4LCBzdWZmaXgsIGFuZCBlZGl0b3IgZm9yIHJ1bm5pbmcuXG4gICAgICAgIGxldCBwcm9nID0ge307XG4gICAgICAgIGlmICh0aGlzLmhwYXJzb25zLmhpZGRlblByZWZpeCkge1xuICAgICAgICAgICAgcHJvZy5wcmVmaXggPSB0aGlzLmhwYXJzb25zLmhpZGRlblByZWZpeDtcbiAgICAgICAgfVxuICAgICAgICBwcm9nLmlucHV0ID0gdGhpcy5ocGFyc29ucy5ocGFyc29uc0lucHV0LmdldFBhcnNvbnNUZXh0QXJyYXkoKS5qb2luKCcgJykgKyBcIlxcblwiO1xuICAgICAgICBpZiAodGhpcy5ocGFyc29ucy5oaWRkZW5TdWZmaXgpIHtcbiAgICAgICAgICAgIHByb2cuc3VmZml4ID0gdGhpcy5ocGFyc29ucy5oaWRkZW5TdWZmaXg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShwcm9nKTtcbiAgICB9XG5cbiAgICAvLyBjb3BpZWQgZnJvbSBhY3RpdmVjb2RlLXNxbFxuICAgIGFzeW5jIGxvZ0N1cnJlbnRBbnN3ZXIoKSB7XG4gICAgICAgIGlmICh0aGlzLnVuaXRfcmVzdWx0cykge1xuICAgICAgICAgICAgbGV0IGFjdCA9IHtcbiAgICAgICAgICAgICAgICBzY2hlbWU6IFwiZXhlY3V0aW9uXCIsXG4gICAgICAgICAgICAgICAgY29ycmVjdDogKHRoaXMuZmFpbGVkID09IDAgJiYgdGhpcy5wYXNzZWQgIT0gMCkgPyBcIlRcIiA6IFwiRlwiLFxuICAgICAgICAgICAgICAgIGFuc3dlcjogdGhpcy5ocGFyc29ucy5ocGFyc29uc0lucHV0LmdldFBhcnNvbnNUZXh0QXJyYXkoKSxcbiAgICAgICAgICAgICAgICBwZXJjZW50OiB0aGlzLnBlcmNlbnQgLy8gcGVyY2VudCBpcyBudWxsIGlmIHRoZXJlIGlzIGV4ZWN1dGlvbiBlcnJvclxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGV0IGxvZ0RhdGEgPSB7XG4gICAgICAgICAgICAgICAgZXZlbnQ6IFwiaHBhcnNvbnNBbnN3ZXJcIixcbiAgICAgICAgICAgICAgICBkaXZfaWQ6IHRoaXMuaHBhcnNvbnMuZGl2aWQsXG4gICAgICAgICAgICAgICAgYWN0OiBKU09OLnN0cmluZ2lmeShhY3QpLFxuICAgICAgICAgICAgICAgIHBlcmNlbnQ6IHRoaXMucGVyY2VudCB8fCAwLFxuICAgICAgICAgICAgICAgIGNvcnJlY3Q6IGFjdC5jb3JyZWN0LFxuICAgICAgICAgICAgICAgIGFuc3dlcjogSlNPTi5zdHJpbmdpZnkoe1wiYmxvY2tzXCI6IGFjdC5hbnN3ZXJ9KSxcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaHBhcnNvbnMubG9nQm9va0V2ZW50KGxvZ0RhdGEpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gbWlnaHQgbW92ZSB0byBiYXNlIGNsYXNzIGlmIHVzZWQgYnkgbXVsdGlwbGUgZXhlY3V0aW9uIGJhc2VkIGZlZWRiYWNrXG4gICAgYXV0b2dyYWRlKHJlc3VsdF90YWJsZSkge1xuICAgICAgICB2YXIgdGVzdHMgPSB0aGlzLmhwYXJzb25zLnVuaXR0ZXN0LnNwbGl0KC9cXG4vKTtcbiAgICAgICAgdGhpcy5wYXNzZWQgPSAwO1xuICAgICAgICB0aGlzLmZhaWxlZCA9IDA7XG4gICAgICAgIC8vIFRlc3RzIHNob3VsZCBiZSBvZiB0aGUgZm9ybVxuICAgICAgICAvLyBhc3NlcnQgcm93LGNvbCBvcGVyIHZhbHVlIGZvciBleGFtcGxlXG4gICAgICAgIC8vIGFzc2VydCA0LDQgPT0gM1xuICAgICAgICB2YXIgcmVzdWx0ID0gXCJcIjtcbiAgICAgICAgdGVzdHMgPSB0ZXN0cy5maWx0ZXIoZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzLmluZGV4T2YoXCJhc3NlcnRcIikgPiAtMTtcbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IHRlc3Qgb2YgdGVzdHMpIHtcbiAgICAgICAgICAgIGxldCB3bGlzdCA9IHRlc3Quc3BsaXQoL1xccysvKTtcbiAgICAgICAgICAgIHdsaXN0LnNoaWZ0KCk7XG4gICAgICAgICAgICBsZXQgbG9jID0gd2xpc3Quc2hpZnQoKTtcbiAgICAgICAgICAgIGxldCBvcGVyID0gd2xpc3Quc2hpZnQoKTtcbiAgICAgICAgICAgIGxldCBleHBlY3RlZCA9IHdsaXN0LmpvaW4oXCIgXCIpO1xuICAgICAgICAgICAgbGV0IFtyb3csIGNvbF0gPSBsb2Muc3BsaXQoXCIsXCIpO1xuICAgICAgICAgICAgcmVzdWx0ICs9IHRoaXMudGVzdE9uZUFzc2VydChcbiAgICAgICAgICAgICAgICByb3csXG4gICAgICAgICAgICAgICAgY29sLFxuICAgICAgICAgICAgICAgIG9wZXIsXG4gICAgICAgICAgICAgICAgZXhwZWN0ZWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0X3RhYmxlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgcmVzdWx0ICs9IFwiXFxuXCI7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHBjdCA9ICgxMDAgKiB0aGlzLnBhc3NlZCkgLyAodGhpcy5wYXNzZWQgKyB0aGlzLmZhaWxlZCk7XG4gICAgICAgIHRoaXMucGVyY2VudCA9IHBjdDtcbiAgICAgICAgcGN0ID0gcGN0LnRvTG9jYWxlU3RyaW5nKHVuZGVmaW5lZCwgeyBtYXhpbXVtRnJhY3Rpb25EaWdpdHM6IDIgfSk7XG4gICAgICAgIHJlc3VsdCArPSBgWW91IHBhc3NlZCAke3RoaXMucGFzc2VkfSBvdXQgb2YgJHt0aGlzLnBhc3NlZCArIHRoaXMuZmFpbGVkXG4gICAgICAgICAgICB9IHRlc3RzIGZvciAke3BjdH0lYDtcbiAgICAgICAgdGhpcy51bml0X3Jlc3VsdHMgPSBgcGVyY2VudDoke3BjdH06cGFzc2VkOiR7dGhpcy5wYXNzZWR9OmZhaWxlZDoke3RoaXMuZmFpbGVkfWA7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuXG4gICAgLy8gbWlnaHQgbW92ZSB0byBiYXNlIGNsYXNzIGlmIHVzZWQgYnkgbXVsdGlwbGUgZXhlY3V0aW9uIGJhc2VkIGZlZWRiYWNrXG4gICAgdGVzdE9uZUFzc2VydChyb3csIGNvbCwgb3BlciwgZXhwZWN0ZWQsIHJlc3VsdF90YWJsZSkge1xuICAgICAgICAvLyBtYWtlIHN1cmUgcm93IGFuZCBjb2wgYXJlIGluIGJvdW5kc1xuICAgICAgICBsZXQgYWN0dWFsO1xuICAgICAgICBsZXQgb3V0cHV0ID0gXCJcIjtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGFjdHVhbCA9IHJlc3VsdF90YWJsZS52YWx1ZXNbcm93XVtjb2xdO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICBpZiAoZXhwZWN0ZWQgPT0gJ05PX0RBVEEnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXNzZWQrKztcbiAgICAgICAgICAgICAgICBvdXRwdXQgPSBgUGFzc2VkOiBObyBkYXRhIGluIHJvdyAke3Jvd30sIGNvbHVtbiAke2NvbH1gO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG91dHB1dCA9IGBGYWlsZWQ6IE5vdCBlbm91Z2ggZGF0YSB0byBjaGVjayByb3cgJHtyb3d9IG9yIGNvbHVtbiAke2NvbH1gO1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgb3BlcmF0b3JzID0ge1xuICAgICAgICAgICAgXCI9PVwiOiBmdW5jdGlvbiAob3BlcmFuZDEsIG9wZXJhbmQyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhbmQxID09IG9wZXJhbmQyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiIT1cIjogZnVuY3Rpb24gKG9wZXJhbmQxLCBvcGVyYW5kMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYW5kMSAhPSBvcGVyYW5kMjtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIj5cIjogZnVuY3Rpb24gKG9wZXJhbmQxLCBvcGVyYW5kMikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvcGVyYW5kMSA+IG9wZXJhbmQyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiPFwiOiBmdW5jdGlvbiAob3BlcmFuZDEsIG9wZXJhbmQyKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wZXJhbmQxID4gb3BlcmFuZDI7XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBsZXQgcmVzID0gb3BlcmF0b3JzW29wZXJdKGFjdHVhbCwgZXhwZWN0ZWQpO1xuICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICBvdXRwdXQgPSBgUGFzczogJHthY3R1YWx9ICR7b3Blcn0gJHtleHBlY3RlZH0gaW4gcm93ICR7cm93fSBjb2x1bW4gJHtyZXN1bHRfdGFibGUuY29sdW1uc1tjb2xdfWA7XG4gICAgICAgICAgICB0aGlzLnBhc3NlZCsrO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3V0cHV0ID0gYEZhaWxlZCAke2FjdHVhbH0gJHtvcGVyfSAke2V4cGVjdGVkfSBpbiByb3cgJHtyb3d9IGNvbHVtbiAke3Jlc3VsdF90YWJsZS5jb2x1bW5zW2NvbF19YDtcbiAgICAgICAgICAgIHRoaXMuZmFpbGVkKys7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG91dHB1dDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVRhYmxlKHRhYmxlRGF0YSwgY29udGFpbmVyLCBtYXhIZWlnaHQpIHtcbiAgICBsZXQgZGF0YSA9IHRhYmxlRGF0YS52YWx1ZXM7XG4gICAgbGV0IHRyaW1Sb3dzID0gdW5kZWZpbmVkO1xuICAgIGlmIChkYXRhLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAvLyBrbHVkZ2U6IG5vIGNvbHVtbiBoZWFkZXJzIHdpbGwgc2hvdyB1cCB1bmxlc3Mgd2UgZG8gdGhpc1xuICAgICAgICBkYXRhID0gW3RhYmxlRGF0YS5jb2x1bW5zLm1hcCgoZSkgPT4gbnVsbCldO1xuICAgICAgICB0cmltUm93cyA9IFswXTtcbiAgICB9XG5cbiAgICB2YXIgaG90ID0gbmV3IEhhbmRzb250YWJsZShjb250YWluZXIsIHtcbiAgICAgICAgZGF0YTogZGF0YSxcbiAgICAgICAgdHJpbVJvd3M6IHRyaW1Sb3dzLFxuICAgICAgICB3aWR0aDogXCIxMDAlXCIsXG4gICAgICAgIGhlaWdodDogbWF4SGVpZ2h0LFxuICAgICAgICBhdXRvUm93U2l6ZTogdHJ1ZSxcbiAgICAgICAgYXV0b0NvbHVtblNpemU6IHsgdXNlSGVhZGVyczogdHJ1ZSB9LFxuICAgICAgICByb3dIZWFkZXJzOiBmYWxzZSxcbiAgICAgICAgY29sSGVhZGVyczogdGFibGVEYXRhLmNvbHVtbnMsXG4gICAgICAgIGVkaXRvcjogZmFsc2UsXG4gICAgICAgIG1heFJvd3M6IDEwMCxcbiAgICAgICAgZmlsdGVyczogZmFsc2UsXG4gICAgICAgIGRyb3Bkb3duTWVudTogZmFsc2UsXG4gICAgICAgIGxpY2Vuc2VLZXk6IFwibm9uLWNvbW1lcmNpYWwtYW5kLWV2YWx1YXRpb25cIixcbiAgICB9KTtcblxuICAgIC8vIGNhbGN1bGF0ZSBhY3R1YWwgaGVpZ2h0IGFuZCByZXNpemVcbiAgICBsZXQgYWN0dWFsSGVpZ2h0ID0gNDA7IC8vIGhlYWRlciBoZWlnaHQgKyBzbWFsbCBtYXJnaW5cbiAgICBpZiAodGFibGVEYXRhLnZhbHVlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYWN0dWFsSGVpZ2h0ID0gYWN0dWFsSGVpZ2h0ICsgaG90LmdldFJvd0hlaWdodChpKTtcbiAgICAgICAgICAgIGlmIChhY3R1YWxIZWlnaHQgPiBtYXhIZWlnaHQpIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaG90LnVwZGF0ZVNldHRpbmdzKHsgaGVpZ2h0OiBhY3R1YWxIZWlnaHQgfSk7XG5cbiAgICByZXR1cm4gaG90O1xufVxuIiwiLy8gVGhpcyBmaWxlIGlzIGFkYXB0ZWQgZnJvbSBsaW5lR3JhZGVyIGluIHBhcnNvbnMgZGlyZWN0aXZlLlxuLy8gV2UgY291bGQgaGF2ZSBmaXQgb3VyIGRhdGEgc3RydWN0dXJlIHRvIHVzZSB0aGUgb3JpZ2luYWwgTGluZUJhc2VkR3JhZGVyIGRpcmVjdGx5LFxuLy8gYnV0IHRoYXQgd291bGQgcmVzdWx0IGluIGNoYW5nZXMgaW4gcGFyc29ucyBkaXJlY3RpdmUgYWZmZWN0aW5nIHRoaXMsIHNvIHdlIGNyZWF0ZWQgYSBjb3B5XG4vLyBpbnN0ZWFkLlxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCbG9ja0Jhc2VkR3JhZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcihwcm9ibGVtKSB7XG4gICAgICAgIHRoaXMucHJvYmxlbSA9IHByb2JsZW07XG4gICAgICAgIHRoaXMucGVyY2VudCA9IDA7XG4gICAgfVxuICAgIC8vIFVzZSBhIExJUyAoTG9uZ2VzdCBJbmNyZWFzaW5nIFN1YnNlcXVlbmNlKSBhbGdvcml0aG0gdG8gcmV0dXJuIHRoZSBpbmRleGVzXG4gICAgLy8gdGhhdCBhcmUgbm90IHBhcnQgb2YgdGhhdCBzdWJzZXF1ZW5jZS5cbiAgICBpbnZlcnNlTElTSW5kaWNlcyhhcnIpIHtcbiAgICAgICAgLy8gR2V0IGFsbCBzdWJzZXF1ZW5jZXNcbiAgICAgICAgdmFyIGFsbFN1YnNlcXVlbmNlcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHN1YnNlcXVlbmNlRm9yQ3VycmVudCA9IFthcnJbaV1dLFxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBhcnJbaV0sXG4gICAgICAgICAgICAgICAgbGFzdEVsZW1lbnRBZGRlZCA9IC0xO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IGk7IGogPCBhcnIubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgc3Vic2VxdWVudCA9IGFycltqXTtcbiAgICAgICAgICAgICAgICBpZiAoc3Vic2VxdWVudCA+IGN1cnJlbnQgJiYgbGFzdEVsZW1lbnRBZGRlZCA8IHN1YnNlcXVlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc3Vic2VxdWVuY2VGb3JDdXJyZW50LnB1c2goc3Vic2VxdWVudCk7XG4gICAgICAgICAgICAgICAgICAgIGxhc3RFbGVtZW50QWRkZWQgPSBzdWJzZXF1ZW50O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFsbFN1YnNlcXVlbmNlcy5wdXNoKHN1YnNlcXVlbmNlRm9yQ3VycmVudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmlndXJlIG91dCB0aGUgbG9uZ2VzdCBvbmVcbiAgICAgICAgdmFyIGxvbmdlc3RTdWJzZXF1ZW5jZUxlbmd0aCA9IC0xO1xuICAgICAgICB2YXIgbG9uZ2VzdFN1YnNlcXVlbmNlO1xuICAgICAgICBmb3IgKGxldCBpIGluIGFsbFN1YnNlcXVlbmNlcykge1xuICAgICAgICAgICAgdmFyIHN1YnMgPSBhbGxTdWJzZXF1ZW5jZXNbaV07XG4gICAgICAgICAgICBpZiAoc3Vicy5sZW5ndGggPiBsb25nZXN0U3Vic2VxdWVuY2VMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBsb25nZXN0U3Vic2VxdWVuY2VMZW5ndGggPSBzdWJzLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsb25nZXN0U3Vic2VxdWVuY2UgPSBzdWJzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW52ZXJzZSBpbmRleGVzXG4gICAgICAgIHZhciBpbmRleGVzID0gW107XG4gICAgICAgIHZhciBsSW5kZXggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGxJbmRleCA+IGxvbmdlc3RTdWJzZXF1ZW5jZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBpbmRleGVzLnB1c2goaSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT0gbG9uZ2VzdFN1YnNlcXVlbmNlW2xJbmRleF0pIHtcbiAgICAgICAgICAgICAgICAgICAgbEluZGV4ICs9IDE7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaW5kZXhlcy5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaW5kZXhlcztcbiAgICB9XG4gICAgLy8gZ3JhZGUgdGhhdCBlbGVtZW50LCByZXR1cm5pbmcgdGhlIHN0YXRlXG4gICAgZ3JhZGUoKSB7XG4gICAgICAgIHRoaXMuY29ycmVjdExpbmVzID0gMDtcbiAgICAgICAgdGhpcy5wZXJjZW50TGluZXMgPSAwO1xuICAgICAgICB2YXIgc29sdXRpb25MaW5lcyA9IHRoaXMuc29sdXRpb247XG4gICAgICAgIHZhciBhbnN3ZXJMaW5lcyA9IHRoaXMuYW5zd2VyO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgdmFyIHN0YXRlO1xuICAgICAgICB0aGlzLnBlcmNlbnRMaW5lcyA9XG4gICAgICAgICAgICBNYXRoLm1pbihhbnN3ZXJMaW5lcy5sZW5ndGgsIHNvbHV0aW9uTGluZXMubGVuZ3RoKSAvXG4gICAgICAgICAgICBNYXRoLm1heChhbnN3ZXJMaW5lcy5sZW5ndGgsIHNvbHV0aW9uTGluZXMubGVuZ3RoKTtcbiAgICAgICAgaWYgKGFuc3dlckxpbmVzLmxlbmd0aCA8IHNvbHV0aW9uTGluZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICBzdGF0ZSA9IFwiaW5jb3JyZWN0VG9vU2hvcnRcIjtcbiAgICAgICAgICAgIHRoaXMuY29ycmVjdExlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKGFuc3dlckxpbmVzLmxlbmd0aCA9PSBzb2x1dGlvbkxpbmVzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5jb3JyZWN0TGVuZ3RoID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY29ycmVjdExlbmd0aCA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXRoZXIgdGhlIGNvZGUgKip0aGF0IGlzIHRoZXJlKiogaXMgaW4gdGhlIGNvcnJlY3Qgb3JkZXJcbiAgICAgICAgLy8gSWYgdGhlcmUgaXMgdG9vIG11Y2ggb3IgdG9vIGxpdHRsZSBjb2RlIHRoaXMgb25seSBtYXR0ZXJzIGZvclxuICAgICAgICAvLyBjYWxjdWxhdGluZyBhIHBlcmNlbnRhZ2Ugc2NvcmUuXG4gICAgICAgIGxldCBpc0NvcnJlY3RPcmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMuY29ycmVjdExpbmVzID0gMDtcbiAgICAgICAgdGhpcy5zb2x1dGlvbkxlbmd0aCA9IHNvbHV0aW9uTGluZXMubGVuZ3RoO1xuICAgICAgICBsZXQgbG9vcExpbWl0ID0gTWF0aC5taW4oc29sdXRpb25MaW5lcy5sZW5ndGgsIGFuc3dlckxpbmVzLmxlbmd0aCk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsb29wTGltaXQ7IGkrKykge1xuICAgICAgICAgICAgaWYgKGFuc3dlckxpbmVzW2ldICE9PSBzb2x1dGlvbkxpbmVzW2ldKSB7XG4gICAgICAgICAgICAgICAgaXNDb3JyZWN0T3JkZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb3JyZWN0TGluZXMgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChcbiAgICAgICAgICAgIGlzQ29ycmVjdE9yZGVyICYmXG4gICAgICAgICAgICB0aGlzLmNvcnJlY3RMZW5ndGhcbiAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBQZXJmZWN0XG4gICAgICAgICAgICBzdGF0ZSA9IFwiY29ycmVjdFwiO1xuICAgICAgICB9IGVsc2UgaWYgKCFpc0NvcnJlY3RPcmRlciAmJiBzdGF0ZSAhPSBcImluY29ycmVjdFRvb1Nob3J0XCIpIHtcbiAgICAgICAgICAgIHN0YXRlID0gXCJpbmNvcnJlY3RNb3ZlQmxvY2tzXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuY29ycmVjdExlbmd0aCAmJiBzdGF0ZSAhPSBcImluY29ycmVjdFRvb1Nob3J0XCIpIHtcbiAgICAgICAgICAgIHN0YXRlID0gXCJpbmNvcnJlY3RNb3ZlQmxvY2tzXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYWxjdWxhdGVQZXJjZW50KCk7XG4gICAgICAgIHRoaXMuZ3JhZGVyU3RhdGUgPSBzdGF0ZTtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH1cblxuICAgIGNhbGN1bGF0ZVBlcmNlbnQoKSB7XG4gICAgICAgIGxldCBudW1MaW5lcyA9IHRoaXMucGVyY2VudExpbmVzICogMC4yO1xuICAgICAgICBsZXQgbGluZXMgPSB0aGlzLmFuc3dlci5sZW5ndGg7XG4gICAgICAgIGxldCBudW1Db3JyZWN0QmxvY2tzID0gKHRoaXMuY29ycmVjdExpbmVzIC8gbGluZXMpICogMC44O1xuXG4gICAgICAgIHRoaXMucGVyY2VudCA9IG51bUxpbmVzICsgbnVtQ29ycmVjdEJsb2NrcztcbiAgICB9XG59XG4iLCJpbXBvcnQgUnVuZXN0b25lQmFzZSBmcm9tIFwiLi4vLi4vY29tbW9uL2pzL3J1bmVzdG9uZWJhc2UuanNcIjtcbmltcG9ydCBcIi4uL2Nzcy9ocGFyc29ucy5jc3NcIjtcbmltcG9ydCBcIi4uL2Nzcy9obGpzLXhjb2RlLmNzc1wiO1xuaW1wb3J0IEJsb2NrRmVlZGJhY2sgZnJvbSBcIi4vQmxvY2tGZWVkYmFjay5qc1wiO1xuaW1wb3J0IFNRTEZlZWRiYWNrIGZyb20gXCIuL1NRTEZlZWRiYWNrLmpzXCI7XG5pbXBvcnQge0luaXRNaWNyb1BhcnNvbnN9IGZyb20gJ21pY3JvLXBhcnNvbnMvbWljcm8tcGFyc29ucy9taWNyby1wYXJzb25zLmpzJztcbmltcG9ydCAnbWljcm8tcGFyc29ucy9taWNyby1wYXJzb25zL21pY3JvLXBhcnNvbnMuY3NzJztcbi8vIElmIHlvdSBuZWVkIHRvIGRlYnVnIHNvbWV0aGluZyBpbiB0aGUgbWljcm8tcGFyc29ucyBsaWJyYXJ5IHRoZW5cbi8vIGdoIHJlcG8gY2xvbmUgYW15MjEyMDYvbWljcm8tcGFyc29ucy1lbGVtZW50XG4vLyBydW4gbnBtIGluc3RhbGwgYW5kIG5wbSBidWlsZFxuLy8gY29weSBldmVyeXRoaW5nIGZyb20gYmluIGludG8gdGhlIGhwYXJzb25zL2pzIGZvbGRlciBhbmQgYnVpbGQgdGhlIGNvbXBvbmVudHMuXG4vKmltcG9ydCB7SW5pdE1pY3JvUGFyc29uc30gZnJvbSAnLi9taWNyby1wYXJzb25zLmpzJztcbmltcG9ydCAnLi9taWNyby1wYXJzb25zLmNzcyc7Ki9cblxuZXhwb3J0IHZhciBocExpc3Q7XG4vLyBEaWN0aW9uYXJ5IHRoYXQgY29udGFpbnMgYWxsIGluc3RhbmNlcyBvZiBob3Jpem9udGFsIFBhcnNvbnMgcHJvYmxlbSBvYmplY3RzXG5pZiAoaHBMaXN0ID09PSB1bmRlZmluZWQpIGhwTGlzdCA9IHt9O1xuXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEhQYXJzb25zIGV4dGVuZHMgUnVuZXN0b25lQmFzZSB7XG4gICAgY29uc3RydWN0b3Iob3B0cykge1xuICAgICAgICBzdXBlcihvcHRzKTtcbiAgICAgICAgLy8gZ2V0dGluZyBzZXR0aW5nc1xuICAgICAgICB2YXIgb3JpZyA9ICQob3B0cy5vcmlnKS5maW5kKFwidGV4dGFyZWFcIilbMF07XG4gICAgICAgIHRoaXMucmV1c2UgPSAkKG9yaWcpLmRhdGEoXCJyZXVzZVwiKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5yYW5kb21pemUgPSAkKG9yaWcpLmRhdGEoXCJyYW5kb21pemVcIikgPyB0cnVlIDogZmFsc2U7XG4gICAgICAgIHRoaXMuaXNCbG9ja0dyYWRpbmcgPSAkKG9yaWcpLmRhdGEoXCJibG9ja2Fuc3dlclwiKSA/IHRydWUgOiBmYWxzZTtcbiAgICAgICAgdGhpcy5sYW5ndWFnZSA9ICQob3JpZykuZGF0YShcImxhbmd1YWdlXCIpO1xuICAgICAgICBpZiAodGhpcy5pc0Jsb2NrR3JhZGluZykge1xuICAgICAgICAgICAgdGhpcy5ibG9ja0Fuc3dlciA9ICQob3JpZykuZGF0YShcImJsb2NrYW5zd2VyXCIpLnNwbGl0KFwiIFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRpdmlkID0gb3B0cy5vcmlnLmlkO1xuICAgICAgICB0aGlzLmNvbnRhaW5lckRpdiA9IG9wdHMub3JpZztcbiAgICAgICAgdGhpcy51c2VSdW5lc3RvbmVTZXJ2aWNlcyA9IG9wdHMudXNlUnVuZXN0b25lU2VydmljZXM7XG5cbiAgICAgICAgLy8gU2V0IHRoZSBzdG9yYWdlSWQgKGtleSBmb3Igc3RvcmluZyBkYXRhKVxuICAgICAgICB2YXIgc3RvcmFnZUlkID0gc3VwZXIubG9jYWxTdG9yYWdlS2V5KCk7XG4gICAgICAgIHRoaXMuc3RvcmFnZUlkID0gc3RvcmFnZUlkO1xuXG4gICAgICAgIHRoaXMub3JpZ0VsZW0gPSBvcmlnO1xuICAgICAgICB0aGlzLm9yaWdUZXh0ID0gdGhpcy5vcmlnRWxlbS50ZXh0Q29udGVudDtcbiAgICAgICAgdGhpcy5jb2RlID0gJChvcmlnKS50ZXh0KCkgfHwgXCJcXG5cXG5cXG5cXG5cXG5cIjtcbiAgICAgICAgdGhpcy5kYnVybCA9ICQob3JpZykuZGF0YShcImRidXJsXCIpO1xuICAgICAgICB0aGlzLnJ1bkJ1dHRvbiA9IG51bGw7XG4gICAgICAgIHRoaXMuc2F2ZUJ1dHRvbiA9IG51bGw7XG4gICAgICAgIHRoaXMubG9hZEJ1dHRvbiA9IG51bGw7XG4gICAgICAgIHRoaXMub3V0ZXJEaXYgPSBudWxsO1xuICAgICAgICB0aGlzLmNvbnRyb2xEaXYgPSBudWxsO1xuICAgICAgICB0aGlzLnByb2Nlc3NDb250ZW50KHRoaXMuY29kZSlcblxuICAgICAgICAvLyBDaGFuZ2UgdG8gZmFjdG9yeSB3aGVuIG1vcmUgZXhlY3V0aW9uIGJhc2VkIGZlZWRiYWNrIGlzIGluY2x1ZGVkXG4gICAgICAgIGlmICh0aGlzLmlzQmxvY2tHcmFkaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmZlZWRiYWNrQ29udHJvbGxlciA9IG5ldyBCbG9ja0ZlZWRiYWNrKHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja0NvbnRyb2xsZXIgPSBuZXcgU1FMRmVlZGJhY2sodGhpcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjcmVhdGluZyBVSSBjb21wb25lbnRzXG4gICAgICAgIHRoaXMuY3JlYXRlRWRpdG9yKCk7XG4gICAgICAgIHRoaXMuY3JlYXRlT3V0cHV0KCk7XG4gICAgICAgIHRoaXMuY3JlYXRlQ29udHJvbHMoKTtcbiAgICAgICAgdGhpcy5mZWVkYmFja0NvbnRyb2xsZXIuY3VzdG9taXplVUkoKTtcblxuICAgICAgICBpZiAoJChvcmlnKS5kYXRhKFwiY2FwdGlvblwiKSkge1xuICAgICAgICAgICAgdGhpcy5jYXB0aW9uID0gJChvcmlnKS5kYXRhKFwiY2FwdGlvblwiKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2FwdGlvbiA9IFwiTWljcm9QYXJzb25zXCI7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hZGRDYXB0aW9uKFwicnVuZXN0b25lXCIpO1xuICAgICAgICB0aGlzLmluZGljYXRlX2NvbXBvbmVudF9yZWFkeSgpO1xuXG4gICAgICAgIC8vIGluaXRpYWxpemluZyBmdW5jdGlvbmFsaXRpZXMgZm9yIGRpZmZlcmVudCBmZWVkYmFja1xuICAgICAgICB0aGlzLmZlZWRiYWNrQ29udHJvbGxlci5pbml0KCk7XG4gICAgICAgIHRoaXMuY2hlY2tTZXJ2ZXIoJ2hwYXJzb25zQW5zd2VyJywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgcHJvY2Vzc0NvbnRlbnQoY29kZSkge1xuICAgICAgICAvLyB0b2RvOiBhZGQgZXJyb3JzIHdoZW4gYmxvY2tzIGFyZSBub25leGlzdGVudCAobWF5YmUgaW4gcHl0aG9uKT9cbiAgICAgICAgdGhpcy5oaWRkZW5QcmVmaXggPSB0aGlzLnByb2Nlc3NTaW5nbGVDb250ZW50KGNvZGUsICctLWhpZGRlbnByZWZpeC0tJyk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxCbG9ja3MgPSB0aGlzLnByb2Nlc3NTaW5nbGVDb250ZW50KGNvZGUsICctLWJsb2Nrcy0tJykuc3BsaXQoJ1xcbicpLnNsaWNlKDEsLTEpO1xuICAgICAgICB0aGlzLmhpZGRlblN1ZmZpeCA9IHRoaXMucHJvY2Vzc1NpbmdsZUNvbnRlbnQoY29kZSwgJy0taGlkZGVuc3VmZml4LS0nKTtcbiAgICAgICAgdGhpcy51bml0dGVzdCA9IHRoaXMucHJvY2Vzc1NpbmdsZUNvbnRlbnQoY29kZSwgJy0tdW5pdHRlc3QtLScpO1xuICAgIH1cblxuICAgIHByb2Nlc3NTaW5nbGVDb250ZW50KGNvZGUsIGRlbGltaXRpZXIpIHtcbiAgICAgICAgbGV0IGluZGV4ID0gY29kZS5pbmRleE9mKGRlbGltaXRpZXIpO1xuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBjb2RlLnN1YnN0cmluZyhpbmRleCArIGRlbGltaXRpZXIubGVuZ3RoKTtcbiAgICAgICAgICAgIGxldCBlbmRJbmRleCA9IGNvbnRlbnQuaW5kZXhPZihcIlxcbi0tXCIpO1xuICAgICAgICAgICAgY29udGVudCA9XG4gICAgICAgICAgICAgICAgZW5kSW5kZXggPiAtMVxuICAgICAgICAgICAgICAgICAgICA/IGNvbnRlbnQuc3Vic3RyaW5nKDAsIGVuZEluZGV4ICsgMSlcbiAgICAgICAgICAgICAgICAgICAgOiBjb250ZW50O1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvLyBjb3BpZWQgZnJvbSBhY3RpdmVjb2RlLCBhbHJlYWR5IG1vZGlmaWVkIHRvIGFkZCBwYXJzb25zXG4gICAgY3JlYXRlRWRpdG9yKCkge1xuICAgICAgICB0aGlzLm91dGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgJCh0aGlzLm9yaWdFbGVtKS5yZXBsYWNlV2l0aCh0aGlzLm91dGVyRGl2KTtcbiAgICAgICAgdGhpcy5vdXRlckRpdi5pZCA9IGAke3RoaXMuZGl2aWR9LWNvbnRhaW5lcmA7XG4gICAgICAgIHRoaXMub3V0ZXJEaXYuYWRkRXZlbnRMaXN0ZW5lcihcIm1pY3JvLXBhcnNvbnNcIiwgKGV2KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBldmVudExpc3RSdW5lc3RvbmUgPSBbJ2lucHV0JywgJ3Jlc2V0J107XG4gICAgICAgICAgICBpZiAoZXZlbnRMaXN0UnVuZXN0b25lLmluY2x1ZGVzKGV2LmRldGFpbC50eXBlKSkge1xuICAgICAgICAgICAgICAgIC8vIG9ubHkgbG9nIHRoZSBldmVudHMgaW4gdGhlIGV2ZW50IGxpc3RcbiAgICAgICAgICAgICAgICB0aGlzLmxvZ0hvcml6b250YWxQYXJzb25zRXZlbnQoZXYuZGV0YWlsKTtcbiAgICAgICAgICAgICAgICAvLyB3aGVuIGV2ZW50IGlzIGlucHV0IG9yIHJlc2V0OiBjbGVhciBwcmV2aW91cyBmZWVkYmFja1xuICAgICAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tDb250cm9sbGVyLmNsZWFyRmVlZGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHByb3BzID0ge1xuICAgICAgICAgICAgc2VsZWN0b3I6IGAjJHt0aGlzLmRpdmlkfS1jb250YWluZXJgLFxuICAgICAgICAgICAgaWQ6IGAke3RoaXMuZGl2aWR9LWhwYXJzb25zYCxcbiAgICAgICAgICAgIHJldXNlOiB0aGlzLnJldXNlLFxuICAgICAgICAgICAgcmFuZG9taXplOiB0aGlzLnJhbmRvbWl6ZSxcbiAgICAgICAgICAgIHBhcnNvbnNCbG9ja3M6IFsuLi50aGlzLm9yaWdpbmFsQmxvY2tzXSxcbiAgICAgICAgICAgIGxhbmd1YWdlOiB0aGlzLmxhbmd1YWdlXG4gICAgICAgIH1cbiAgICAgICAgSW5pdE1pY3JvUGFyc29ucyhwcm9wcyk7XG4gICAgICAgIHRoaXMuaHBhcnNvbnNJbnB1dCA9ICQodGhpcy5vdXRlckRpdikuZmluZChcIm1pY3JvLXBhcnNvbnNcIilbMF07XG4gICAgfVxuXG4gICAgY3JlYXRlT3V0cHV0KCkge1xuICAgICAgICB0aGlzLmZlZWRiYWNrQ29udHJvbGxlci5jcmVhdGVPdXRwdXQoKTtcbiAgICB9XG5cbiAgICBjcmVhdGVDb250cm9scygpIHtcbiAgICAgICAgdmFyIGN0cmxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgICAkKGN0cmxEaXYpLmFkZENsYXNzKFwiaHBfYWN0aW9uc1wiKTtcbiAgICAgICAgJChjdHJsRGl2KS5hZGRDbGFzcyhcImNvbC1tZC0xMlwiKTtcblxuICAgICAgICAvLyBSdW4gQnV0dG9uXG4gICAgICAgIHRoaXMucnVuQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgJCh0aGlzLnJ1bkJ1dHRvbikuYWRkQ2xhc3MoXCJidG4gYnRuLXN1Y2Nlc3MgcnVuLWJ1dHRvblwiKTtcbiAgICAgICAgY3RybERpdi5hcHBlbmRDaGlsZCh0aGlzLnJ1bkJ1dHRvbik7XG4gICAgICAgICQodGhpcy5ydW5CdXR0b24pLmF0dHIoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuICAgICAgICAkKHRoaXMucnVuQnV0dG9uKS50ZXh0KFwiUnVuXCIpO1xuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIHRoaXMucnVuQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGF0LmZlZWRiYWNrQ29udHJvbGxlci5ydW5CdXR0b25IYW5kbGVyKCk7XG4gICAgICAgICAgICB0aGF0LnNldExvY2FsU3RvcmFnZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFJlc2V0IGJ1dHRvblxuICAgICAgICB2YXIgcmVzZXRCdG47XG4gICAgICAgIHJlc2V0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgICAgICAgJChyZXNldEJ0bikudGV4dChcIlJlc2V0XCIpO1xuICAgICAgICAkKHJlc2V0QnRuKS5hZGRDbGFzcyhcImJ0biBidG4td2FybmluZyBydW4tYnV0dG9uXCIpO1xuICAgICAgICBjdHJsRGl2LmFwcGVuZENoaWxkKHJlc2V0QnRuKTtcbiAgICAgICAgdGhpcy5yZXNldEJ1dHRvbiA9IHJlc2V0QnRuO1xuICAgICAgICB0aGlzLnJlc2V0QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGF0LmhwYXJzb25zSW5wdXQucmVzZXRJbnB1dCgpO1xuICAgICAgICAgICAgdGhhdC5zZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgICAgIHRoYXQuZmVlZGJhY2tDb250cm9sbGVyLnJlc2V0KCk7XG4gICAgICAgIH07XG4gICAgICAgICQocmVzZXRCdG4pLmF0dHIoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xuXG4gICAgICAgICQodGhpcy5vdXRlckRpdikucHJlcGVuZChjdHJsRGl2KTtcbiAgICAgICAgdGhpcy5jb250cm9sRGl2ID0gY3RybERpdjtcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gcHJldmlvdXMgYW5zd2VycyBpbiBsb2NhbCBzdG9yYWdlXG4gICAgLy9cbiAgICBsb2NhbERhdGEoKSB7XG4gICAgICAgIHZhciBkYXRhID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0odGhpcy5zdG9yYWdlSWQpO1xuICAgICAgICBpZiAoZGF0YSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgaWYgKGRhdGEuY2hhckF0KDApID09IFwie1wiKSB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGRhdGEgPSB7fTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRhdGEgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgLy8gUnVuZXN0b25lQmFzZTogU2VudCB3aGVuIHRoZSBzZXJ2ZXIgaGFzIGRhdGFcbiAgICByZXN0b3JlQW5zd2VycyhzZXJ2ZXJEYXRhKSB7XG4gICAgICAgIC8vIFRPRE86IG5vdCB0ZXN0ZWQgd2l0aCBzZXJ2ZXIgZGF0YSB5ZXQuXG4gICAgICAgIC8vIFNlcnZlciBzaWRlIGRhdGEgc2hvdWxkIGJlOlxuICAgICAgICAvKlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFuc3dlcjogQXJyYXk8c3RyaW5nPiwgLy8gbGlzdCBvZiBhbnN3ZXIgYmxvY2sgY29udGVudFxuICAgICAgICAgICAgICAgIGNvdW50OiA/bnVtYmVyIC8vIG51bWJlciBvZiBwcmV2aW91cyBhdHRlbXB0cyBpZiBibG9jay1iYXNlZCBmZWVkYmFja1xuICAgICAgICAgICAgfVxuICAgICAgICAqL1xuICAgICAgICBpZiAoc2VydmVyRGF0YS5hbnN3ZXIpe1xuICAgICAgICAgICAgdGhpcy5ocGFyc29uc0lucHV0LnJlc3RvcmVBbnN3ZXIoc2VydmVyRGF0YS5hbnN3ZXIuYmxvY2tzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoc2VydmVyRGF0YS5jb3VudCkge1xuICAgICAgICAgICAgdGhpcy5mZWVkYmFja0NvbnRyb2xsZXIuY2hlY2tDb3VudCA9IHNlcnZlckRhdGEuY291bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUnVuZXN0b25lQmFzZTogTG9hZCB3aGF0IGlzIGluIGxvY2FsIHN0b3JhZ2VcbiAgICBjaGVja0xvY2FsU3RvcmFnZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZ3JhZGVyYWN0aXZlKSB7XG4gICAgICAgICAgICAvLyBaaWhhbjogSSB0aGluayB0aGlzIG1lYW5zIHRoZSBjb21wb25lbnQgaXMgc3RpbGwgbG9hZGluZz9cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBsZXQgbG9jYWxEYXRhID0gdGhpcy5sb2NhbERhdGEoKTtcbiAgICAgICAgaWYgKGxvY2FsRGF0YS5hbnN3ZXIpIHtcbiAgICAgICAgICAgIHRoaXMuaHBhcnNvbnNJbnB1dC5yZXN0b3JlQW5zd2VyKGxvY2FsRGF0YS5hbnN3ZXIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChsb2NhbERhdGEuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuZmVlZGJhY2tDb250cm9sbGVyLmNoZWNrQ291bnQgPSBsb2NhbERhdGEuY291bnQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gUnVuZXN0b25lQmFzZTogU2V0IHRoZSBzdGF0ZSBvZiB0aGUgcHJvYmxlbSBpbiBsb2NhbCBzdG9yYWdlXG4gICAgc2V0TG9jYWxTdG9yYWdlKGRhdGEpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRTdGF0ZSA9IHt9O1xuICAgICAgICBpZiAoZGF0YSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBhbnN3ZXI6IHRoaXMuaHBhcnNvbnNJbnB1dC5nZXRQYXJzb25zVGV4dEFycmF5KClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmlzQmxvY2tHcmFkaW5nKSB7XG4gICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBibG9jayBncmFkaW5nLCBhZGQgbnVtYmVyIG9mIHByZXZpb3VzIGF0dGVtcHRzIHRvb1xuICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZS5jb3VudCA9IHRoaXMuZmVlZGJhY2tDb250cm9sbGVyLmNoZWNrQ291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50U3RhdGUgPSBkYXRhO1xuICAgICAgICB9XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuc3RvcmFnZUlkLCBKU09OLnN0cmluZ2lmeShjdXJyZW50U3RhdGUpKTtcbiAgICB9XG5cbiAgICBsb2dIb3Jpem9udGFsUGFyc29uc0V2ZW50KGhwYXJzb25zRXZlbnQpIHtcbiAgICAgICAgbGV0IGV2ID0ge1xuICAgICAgICAgICAgZXZlbnQ6IFwiaHBhcnNvbnNcIixcbiAgICAgICAgICAgIGRpdl9pZDogdGhpcy5kaXZpZCxcbiAgICAgICAgICAgIGFjdDogSlNPTi5zdHJpbmdpZnkoaHBhcnNvbnNFdmVudCksXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMubG9nQm9va0V2ZW50KGV2KTtcbiAgICB9XG59XG5cblxuLyo9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbj09IEZpbmQgdGhlIGN1c3RvbSBIVE1MIHRhZ3MgYW5kID09XG49PSAgIGV4ZWN1dGUgb3VyIGNvZGUgb24gdGhlbSAgICA9PVxuPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09Ki9cbiQoZG9jdW1lbnQpLm9uKFwicnVuZXN0b25lOmxvZ2luLWNvbXBsZXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAkKFwiW2RhdGEtY29tcG9uZW50PWhwYXJzb25zXVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykuY2xvc2VzdChcIltkYXRhLWNvbXBvbmVudD10aW1lZEFzc2Vzc21lbnRdXCIpLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAvLyBJZiB0aGlzIGVsZW1lbnQgZXhpc3RzIHdpdGhpbiBhIHRpbWVkIGNvbXBvbmVudCwgZG9uJ3QgcmVuZGVyIGl0IGhlcmVcbiAgICAgICAgICAgIC8vIHRyeSB7XG4gICAgICAgICAgICBocExpc3RbdGhpcy5pZF0gPSBuZXcgSFBhcnNvbnMoe1xuICAgICAgICAgICAgICAgIG9yaWc6IHRoaXMsXG4gICAgICAgICAgICAgICAgdXNlUnVuZXN0b25lU2VydmljZXM6IGVCb29rQ29uZmlnLnVzZVJ1bmVzdG9uZVNlcnZpY2VzLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAvLyB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhgRXJyb3IgcmVuZGVyaW5nIFNob3J0QW5zd2VyIFByb2JsZW0gJHt0aGlzLmlkfVxuICAgICAgICAgICAgLy8gICAgIERldGFpbHM6ICR7ZXJyfWApO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgfSk7XG59KTtcblxuaWYgKHR5cGVvZiB3aW5kb3cuY29tcG9uZW50X2ZhY3RvcnkgPT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICB3aW5kb3cuY29tcG9uZW50X2ZhY3RvcnkgPSB7fTtcbn1cbndpbmRvdy5jb21wb25lbnRfZmFjdG9yeVtcImhwYXJzb25zXCJdID0gZnVuY3Rpb24gKG9wdHMpIHtcbiAgICByZXR1cm4gbmV3IEhQYXJzb25zKG9wdHMpO1xufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEhQYXJzb25zRmVlZGJhY2sge1xuICAgIGNvbnN0cnVjdG9yKGhwYXJzb25zKSB7XG4gICAgICAgIHRoaXMuaHBhcnNvbnMgPSBocGFyc29ucztcbiAgICAgICAgdGhpcy5wZXJjZW50ID0gMDtcbiAgICB9XG4gICAgY3JlYXRlT3V0cHV0KCkge1xuICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRlT3V0cHV0IG1ldGhvZCBub3QgaW1wbGVtZW50ZWQgaW4gZmVlZGJhY2shJyk7XG4gICAgfVxuICAgIGFzeW5jIHJ1bkJ1dHRvbkhhbmRsZXIoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdydW5CdXR0b25DbGlja2VkIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQgaW4gZmVlZGJhY2shJyk7XG4gICAgfVxuICAgIGN1c3RvbWl6ZVVJKCkge1xuICAgICAgICAvLyB1c2VkIHRvIGNoYW5nZSBzb21lIG1pbm9yIFVJLCBlLmcuIHRoZSB0ZXh0IG9uIFJ1biBidXR0b25cbiAgICB9XG4gICAgaW5pdCgpIHtcbiAgICAgICAgLy8gaW5pdGxpemF0aW9ucyBmdW5jdGlvbmFsaXRpZXMgc3VjaCBhcyBwcmVwYXJpbmcgU1FMLFxuICAgICAgICAvLyBvciBjaGVja2luZyByZWxhdGVkIG9wdGlvbnNcbiAgICB9XG5cbiAgICBjbGVhckZlZWRiYWNrKCkge1xuICAgICAgICAvLyBjYWxsZWQgd2hlbiBpbnB1dCBpcyBjaGFuZ2VkXG4gICAgICAgIGNvbnNvbGUubG9nKCdjbGVhckZlZWRiYWNrIG1ldGhvZCBub3QgaW1wbGVtZW50ZWQgaW4gZmVlZGJhY2shJyk7XG4gICAgfVxuICAgIFxuICAgIHJlc2V0KCkge1xuICAgICAgICAvLyBjYWxsZWQgd2hlbiByZXNldCBpcyBjbGlja2VkXG4gICAgICAgIGNvbnNvbGUubG9nKCdyZXNldCBtZXRob2Qgbm90IGltcGxlbWVudGVkIGluIGZlZWRiYWNrIScpO1xuICAgIH1cbn1cbiIsIiQuaTE4bigpLmxvYWQoe1xuICAgIGVuOiB7XG4gICAgICAgIG1zZ19wYXJzb25fY2hlY2tfbWU6IFwiQ2hlY2tcIixcbiAgICAgICAgbXNnX3BhcnNvbl9yZXNldDogXCJSZXNldFwiLFxuICAgICAgICBtc2dfcGFyc29uX2hlbHA6IFwiSGVscCBtZVwiLFxuICAgICAgICBtc2dfcGFyc29uX3Rvb19zaG9ydDogXCJZb3VyIGFuc3dlciBpcyB0b28gc2hvcnQuIEFkZCBtb3JlIGJsb2Nrcy5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9kcmFnX2Zyb21faGVyZTogXCJEcmFnIGZyb20gaGVyZVwiLFxuICAgICAgICBtc2dfcGFyc29uX2RyYWdfdG9faGVyZTogXCJEcm9wIGJsb2NrcyBoZXJlXCIsXG4gICAgICAgIG1zZ19wYXJzb25fY29ycmVjdF9maXJzdF90cnk6XG4gICAgICAgICAgICBcIlBlcmZlY3QhICBJdCB0b29rIHlvdSBvbmx5IG9uZSB0cnkgdG8gc29sdmUgdGhpcy4gIEdyZWF0IGpvYiFcIixcbiAgICAgICAgbXNnX3BhcnNvbl9jb3JyZWN0OlxuICAgICAgICAgICAgXCJQZXJmZWN0ISAgSXQgdG9vayB5b3UgJDEgdHJpZXMgdG8gc29sdmUgdGhpcy4gIENsaWNrIFJlc2V0IHRvIHRyeSB0byBzb2x2ZSBpdCBpbiBvbmUgYXR0ZW1wdC5cIixcbiAgICAgICAgbXNnX3BhcnNvbl93cm9uZ19pbmRlbnQ6XG4gICAgICAgICAgICBcIlRoaXMgYmxvY2sgaXMgbm90IGluZGVudGVkIGNvcnJlY3RseS4gRWl0aGVyIGluZGVudCBpdCBtb3JlIGJ5IGRyYWdnaW5nIGl0IHJpZ2h0IG9yIHJlZHVjZSB0aGUgaW5kZW50aW9uIGJ5IGRyYWdnaW5nIGl0IGxlZnQuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd3JvbmdfaW5kZW50czpcbiAgICAgICAgICAgIFwiVGhlc2UgYmxvY2tzIGFyZSBub3QgaW5kZW50ZWQgY29ycmVjdGx5LiBUbyBpbmRlbnQgYSBibG9jayBtb3JlLCBkcmFnIGl0IHRvIHRoZSByaWdodC4gVG8gcmVkdWNlIHRoZSBpbmRlbnRpb24sIGRyYWcgaXQgdG8gdGhlIGxlZnQuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd3Jvbmdfb3JkZXI6XG4gICAgICAgICAgICBcIkhpZ2hsaWdodGVkIGJsb2NrcyBpbiB5b3VyIGFuc3dlciBhcmUgd3Jvbmcgb3IgYXJlIGluIHRoZSB3cm9uZyBvcmRlci4gVGhpcyBjYW4gYmUgZml4ZWQgYnkgbW92aW5nLCByZW1vdmluZywgb3IgcmVwbGFjaW5nIGhpZ2hsaWdodGVkIGJsb2Nrcy5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9hcnJvd19uYXZpZ2F0ZTpcbiAgICAgICAgICAgIFwiQXJyb3cga2V5cyB0byBuYXZpZ2F0ZS4gU3BhY2UgdG8gc2VsZWN0IC8gZGVzZWxlY3QgYmxvY2sgdG8gbW92ZS5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9oZWxwX2luZm86XG4gICAgICAgICAgICBcIkNsaWNrIG9uIHRoZSBIZWxwIE1lIGJ1dHRvbiBpZiB5b3Ugd2FudCB0byBtYWtlIHRoZSBwcm9ibGVtIGVhc2llclwiLFxuICAgICAgICBtc2dfcGFyc29uX25vdF9zb2x1dGlvbjpcbiAgICAgICAgICAgIFwiRGlzYWJsZWQgYW4gdW5uZWVkZWQgY29kZSBibG9jayAob25lIHRoYXQgaXMgbm90IHBhcnQgb2YgdGhlIHNvbHV0aW9uKS5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9wcm92aWRlZF9pbmRlbnQ6IFwiUHJvdmlkZWQgdGhlIGluZGVudGF0aW9uLlwiLFxuICAgICAgICBtc2dfcGFyc29uX2NvbWJpbmVkX2Jsb2NrczogXCJDb21iaW5lZCB0d28gY29kZSBibG9ja3MgaW50byBvbmUuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fcmVtb3ZlX2luY29ycmVjdDpcbiAgICAgICAgICAgIFwiV2lsbCByZW1vdmUgYW4gaW5jb3JyZWN0IGNvZGUgYmxvY2sgZnJvbSBhbnN3ZXIgYXJlYVwiLFxuICAgICAgICBtc2dfcGFyc29uX3dpbGxfY29tYmluZTogXCJXaWxsIGNvbWJpbmUgdHdvIGJsb2Nrc1wiLFxuICAgICAgICBtc2dfcGFyc29uX2F0bGVhc3RfdGhyZWVfYXR0ZW1wdHM6XG4gICAgICAgICAgICBcIllvdSBtdXN0IG1ha2UgYXQgbGVhc3QgdGhyZWUgZGlzdGluY3QgZnVsbCBhdHRlbXB0cyBhdCBhIHNvbHV0aW9uIGJlZm9yZSB5b3UgY2FuIGdldCBoZWxwXCIsXG4gICAgICAgIG1zZ19wYXJzb25fdGhyZWVfYmxvY2tzX2xlZnQ6XG4gICAgICAgICAgICBcIlRoZXJlIGFyZSBvbmx5IDMgY29ycmVjdCBibG9ja3MgbGVmdC4gIFlvdSBzaG91bGQgYmUgYWJsZSB0byBwdXQgdGhlbSBpbiBvcmRlclwiLFxuICAgICAgICBtc2dfcGFyc29uX3dpbGxfcHJvdmlkZV9pbmRlbnQ6IFwiV2lsbCBwcm92aWRlIGluZGVudGF0aW9uXCIsXG4gICAgfSxcbn0pO1xuIiwiJC5pMThuKCkubG9hZCh7XG4gICAgXCJwdC1iclwiOiB7XG4gICAgICAgIG1zZ19wYXJzb25fY2hlY2tfbWU6IFwiVmVyaWZpY2FyXCIsXG4gICAgICAgIG1zZ19wYXJzb25fcmVzZXQ6IFwiUmVzZXRhclwiLFxuICAgICAgICBtc2dfcGFyc29uX2hlbHA6XCJBanVkYVwiLFxuICAgICAgICBtc2dfcGFyc29uX3Rvb19zaG9ydDogXCJTZXUgcHJvZ3JhbWEgw6kgbXVpdG8gY3VydG8uIEFkaWNpb25lIG1haXMgYmxvY29zLlwiLFxuICAgICAgICBtc2dfcGFyc29uX2RyYWdfZnJvbV9oZXJlOiBcIkFycmFzdGUgZGFxdWlcIixcbiAgICAgICAgbXNnX3BhcnNvbl9kcmFnX3RvX2hlcmU6IFwiTGFyZ3VlIG9zIGJsb2NvcyBhcXVpXCIsXG4gICAgICAgIG1zZ19wYXJzb25fY29ycmVjdF9maXJzdF90cnk6XG4gICAgICAgICAgICBcIlBlcmZlaXRvISBWb2PDqiBsZXZvdSBhcGVuYXMgdW1hIHRlbnRhdGl2YSBwYXJhIHJlc29sdmVyLiBCb20gdHJhYmFsaG8hXCIsXG4gICAgICAgIG1zZ19wYXJzb25fY29ycmVjdDpcbiAgICAgICAgICAgIFwiUGVyZmVpdG8hIFZvY8OqIGxldm91ICQxIHRlbnRhdGl2YXMgcGFyYSByZXNvbHZlci4gQ2xpcXVlIGVtIFJlc2V0YXIgcGFyYSB0ZW50YXIgcmVzb2x2ZXIgZW0gdW1hIHRlbnRhdGl2YS5cIiAsXG4gICAgICAgIG1zZ19wYXJzb25fd3JvbmdfaW5kZW50OlxuICAgICAgICAgICAgXCJFc3RlIGJsb2NvIG7Do28gZXN0w6EgaW5kZW50YWRvIGNvcnJldGFtZW50ZS4gSW5kZW50ZSBtYWlzIGFycmFzdGFuZG8tbyBwYXJhIGEgZGlyZWl0YSBvdSByZWR1emEgYSBpbmRlbnRhw6fDo28gYXJyYXN0YW5kbyBwYXJhIGEgZXNxdWVyZGEuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd3JvbmdfaW5kZW50czpcbiAgICAgICAgICAgIFwiRXN0ZXMgYmxvY29zIG7Do28gZXN0w6NvIGluZGVudGFkb3MgY29ycmV0YW1lbnRlLiBQYXJhIGluZGVudGFyIG1haXMsIGFycmFzdGUgbyBibG9jbyBwYXJhIGEgZGlyZWl0YS4gUGFyYSByZWR1emlyIGEgaW5kZW50YcOnw6NvLCBhcnJhc3RlIHBhcmEgYSBlc3F1ZXJkYS5cIixcbiAgICAgICAgbXNnX3BhcnNvbl93cm9uZ19vcmRlcjpcbiAgICAgICAgICAgIFwiQmxvY29zIGRlc3RhY2Fkb3Mgbm8gc2V1IHByb2dyYW1hIGVzdMOjbyBlcnJhZG9zIG91IGVzdMOjbyBuYSBvcmRlbSBlcnJhZGEuIElzc28gcG9kZSBzZXIgcmVzb2x2aWRvIG1vdmVuZG8sIGV4Y2x1aW5kbyBvdSBzdWJzdGl0dWluZG8gb3MgYmxvY29zIGRlc3RhY2Fkb3MuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fYXJyb3dfbmF2aWdhdGU6XG4gICAgICAgICAgICBcIlVzZSBhcyB0ZWNsYXMgZGUgc2V0YXMgcGFyYSBuYXZlZ2FyLiBFc3Bhw6dvIHBhcmEgc2VsZWNpb25hci8gZGVzbWFyY2FyIGJsb2NvcyBwYXJhIG1vdmVyLlwiLFxuICAgICAgICBtc2dfcGFyc29uX2hlbHBfaW5mbzpcbiAgICAgICAgICAgIFwiQ2xpcXVlIG5vIGJvdMOjbyBBanVkYSBzZSB2b2PDqiBxdWlzZXIgZmFjaWxpdGFyIG8gcHJvYmxlbWFcIixcbiAgICAgICAgbXNnX3BhcnNvbl9ub3Rfc29sdXRpb246XG4gICAgICAgICAgICBcIkZvaSBkZXNhYmlsaXRhZG8gdW0gYmxvY28gZGUgY8OzZGlnbyBkZXNuZWNlc3PDoXJpbyAocXVlIG7Do28gZmF6IHBhcnRlIGRhIHNvbHXDp8OjbykuXCIsXG4gICAgICAgIG1zZ19wYXJzb25fcHJvdmlkZWRfaW5kZW50OlwiRm9pIGZvcm5lY2lkYSBhIGluZGVudGHDp8Ojby5cIixcbiAgICAgICAgbXNnX3BhcnNvbl9jb21iaW5lZF9ibG9ja3M6XCJEb2lzIGJsb2NvcyBkZSBjw7NkaWdvcyBmb3JhbSBjb21iaW5hZG9zIGVtIHVtLlwiLFxuICAgICAgICBtc2dfcGFyc29uX3JlbW92ZV9pbmNvcnJlY3Q6XG4gICAgICAgICAgICBcIlNlcsOhIHJlbW92aWRvIHVtIGJsb2NvIGRlIGPDs2RpZ28gaW5jb3JyZXRvIGRhIMOhcmVhIGRlIHJlc3Bvc3RhXCIsXG4gICAgICAgIG1zZ19wYXJzb25fd2lsbF9jb21iaW5lOlwiU2Vyw6NvIGNvbWJpbmFkb3MgZG9pcyBibG9jb3NcIixcbiAgICAgICAgbXNnX3BhcnNvbl9hdGxlYXN0X3RocmVlX2F0dGVtcHRzOlxuICAgICAgICAgICAgXCJWb2PDqiBkZXZlIHRlbnRhciBwZWxvIG1lbm9zIHRyw6pzIHZlemVzIGFudGVzIGRlIHBlZGlyIGFqdWRhXCIsXG4gICAgICAgIG1zZ19wYXJzb25fdGhyZWVfYmxvY2tzX2xlZnQ6XG4gICAgICAgICAgICBcIlJlc3RhbSBhcGVuYXMgMyBibG9jb3MgY29ycmV0b3MuIFZvY8OqIGRldmUgY29sb2PDoS1sb3MgZW0gb3JkZW1cIixcbiAgICAgICAgbXNnX3BhcnNvbl93aWxsX3Byb3ZpZGVfaW5kZW50OiBcIlNlcsOhIGZvcm5lY2lkYSBhIGluZGVudGHDp8Ojb1wiXG4gICAgfSxcbn0pO1xuIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIiwiLyogKGlnbm9yZWQpICovIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9